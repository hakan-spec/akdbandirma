(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yf(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Pu={exports:{}},Li={},Lu={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var os=Symbol.for("react.element"),vf=Symbol.for("react.portal"),wf=Symbol.for("react.fragment"),bf=Symbol.for("react.strict_mode"),jf=Symbol.for("react.profiler"),kf=Symbol.for("react.provider"),_f=Symbol.for("react.context"),Nf=Symbol.for("react.forward_ref"),Sf=Symbol.for("react.suspense"),Ef=Symbol.for("react.memo"),Cf=Symbol.for("react.lazy"),Ko=Symbol.iterator;function Tf(e){return e===null||typeof e!="object"?null:(e=Ko&&e[Ko]||e["@@iterator"],typeof e=="function"?e:null)}var Au={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ru=Object.assign,Ou={};function ln(e,t,r){this.props=e,this.context=t,this.refs=Ou,this.updater=r||Au}ln.prototype.isReactComponent={};ln.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ln.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Uu(){}Uu.prototype=ln.prototype;function Gl(e,t,r){this.props=e,this.context=t,this.refs=Ou,this.updater=r||Au}var Hl=Gl.prototype=new Uu;Hl.constructor=Gl;Ru(Hl,ln.prototype);Hl.isPureReactComponent=!0;var Wo=Array.isArray,Du=Object.prototype.hasOwnProperty,Kl={current:null},Iu={key:!0,ref:!0,__self:!0,__source:!0};function Bu(e,t,r){var n,i={},a=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)Du.call(t,n)&&!Iu.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:os,type:e,key:a,ref:l,props:i,_owner:Kl.current}}function Pf(e,t){return{$$typeof:os,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wl(e){return typeof e=="object"&&e!==null&&e.$$typeof===os}function Lf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Vo=/\/+/g;function ta(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Lf(""+e.key):t.toString(36)}function Gs(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case os:case vf:l=!0}}if(l)return l=e,i=i(l),e=n===""?"."+ta(l,0):n,Wo(i)?(r="",e!=null&&(r=e.replace(Vo,"$&/")+"/"),Gs(i,t,r,"",function(u){return u})):i!=null&&(Wl(i)&&(i=Pf(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Vo,"$&/")+"/")+e)),t.push(i)),1;if(l=0,n=n===""?".":n+":",Wo(e))for(var o=0;o<e.length;o++){a=e[o];var c=n+ta(a,o);l+=Gs(a,t,r,c,i)}else if(c=Tf(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=n+ta(a,o++),l+=Gs(a,t,r,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function vs(e,t,r){if(e==null)return e;var n=[],i=0;return Gs(e,n,"","",function(a){return t.call(r,a,i++)}),n}function Af(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ne={current:null},Hs={transition:null},Rf={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:Hs,ReactCurrentOwner:Kl};function $u(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:vs,forEach:function(e,t,r){vs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return vs(e,function(){t++}),t},toArray:function(e){return vs(e,function(t){return t})||[]},only:function(e){if(!Wl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};H.Component=ln;H.Fragment=wf;H.Profiler=jf;H.PureComponent=Gl;H.StrictMode=bf;H.Suspense=Sf;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rf;H.act=$u;H.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ru({},e.props),i=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=Kl.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Du.call(t,c)&&!Iu.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:os,type:e.type,key:i,ref:a,props:n,_owner:l}};H.createContext=function(e){return e={$$typeof:_f,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kf,_context:e},e.Consumer=e};H.createElement=Bu;H.createFactory=function(e){var t=Bu.bind(null,e);return t.type=e,t};H.createRef=function(){return{current:null}};H.forwardRef=function(e){return{$$typeof:Nf,render:e}};H.isValidElement=Wl;H.lazy=function(e){return{$$typeof:Cf,_payload:{_status:-1,_result:e},_init:Af}};H.memo=function(e,t){return{$$typeof:Ef,type:e,compare:t===void 0?null:t}};H.startTransition=function(e){var t=Hs.transition;Hs.transition={};try{e()}finally{Hs.transition=t}};H.unstable_act=$u;H.useCallback=function(e,t){return Ne.current.useCallback(e,t)};H.useContext=function(e){return Ne.current.useContext(e)};H.useDebugValue=function(){};H.useDeferredValue=function(e){return Ne.current.useDeferredValue(e)};H.useEffect=function(e,t){return Ne.current.useEffect(e,t)};H.useId=function(){return Ne.current.useId()};H.useImperativeHandle=function(e,t,r){return Ne.current.useImperativeHandle(e,t,r)};H.useInsertionEffect=function(e,t){return Ne.current.useInsertionEffect(e,t)};H.useLayoutEffect=function(e,t){return Ne.current.useLayoutEffect(e,t)};H.useMemo=function(e,t){return Ne.current.useMemo(e,t)};H.useReducer=function(e,t,r){return Ne.current.useReducer(e,t,r)};H.useRef=function(e){return Ne.current.useRef(e)};H.useState=function(e){return Ne.current.useState(e)};H.useSyncExternalStore=function(e,t,r){return Ne.current.useSyncExternalStore(e,t,r)};H.useTransition=function(){return Ne.current.useTransition()};H.version="18.3.1";Lu.exports=H;var N=Lu.exports;const Of=xf(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf=N,Df=Symbol.for("react.element"),If=Symbol.for("react.fragment"),Bf=Object.prototype.hasOwnProperty,$f=Uf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zf={key:!0,ref:!0,__self:!0,__source:!0};function zu(e,t,r){var n,i={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Bf.call(t,n)&&!zf.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Df,type:e,key:a,ref:l,props:i,_owner:$f.current}}Li.Fragment=If;Li.jsx=zu;Li.jsxs=zu;Pu.exports=Li;var s=Pu.exports,Mu={exports:{}},$e={},Fu={exports:{}},Gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,L){var O=k.length;k.push(L);e:for(;0<O;){var B=O-1>>>1,F=k[B];if(0<i(F,L))k[B]=L,k[O]=F,O=B;else break e}}function r(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var L=k[0],O=k.pop();if(O!==L){k[0]=O;e:for(var B=0,F=k.length,fe=F>>>1;B<fe;){var v=2*(B+1)-1,R=k[v],K=v+1,xe=k[K];if(0>i(R,O))K<F&&0>i(xe,R)?(k[B]=xe,k[K]=O,B=K):(k[B]=R,k[v]=O,B=v);else if(K<F&&0>i(xe,O))k[B]=xe,k[K]=O,B=K;else break e}}return L}function i(k,L){var O=k.sortIndex-L.sortIndex;return O!==0?O:k.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],u=[],h=1,m=null,p=3,x=!1,y=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(k){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=k)n(u),L.sortIndex=L.expirationTime,t(c,L);else break;L=r(u)}}function j(k){if(w=!1,g(k),!y)if(r(c)!==null)y=!0,mt(C);else{var L=r(u);L!==null&&ue(j,L.startTime-k)}}function C(k,L){y=!1,w&&(w=!1,d(A),A=-1),x=!0;var O=p;try{for(g(L),m=r(c);m!==null&&(!(m.expirationTime>L)||k&&!I());){var B=m.callback;if(typeof B=="function"){m.callback=null,p=m.priorityLevel;var F=B(m.expirationTime<=L);L=e.unstable_now(),typeof F=="function"?m.callback=F:m===r(c)&&n(c),g(L)}else n(c);m=r(c)}if(m!==null)var fe=!0;else{var v=r(u);v!==null&&ue(j,v.startTime-L),fe=!1}return fe}finally{m=null,p=O,x=!1}}var T=!1,E=null,A=-1,S=5,_=-1;function I(){return!(e.unstable_now()-_<S)}function M(){if(E!==null){var k=e.unstable_now();_=k;var L=!0;try{L=E(!0,k)}finally{L?ce():(T=!1,E=null)}}else T=!1}var ce;if(typeof f=="function")ce=function(){f(M)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,ft=Re.port2;Re.port1.onmessage=M,ce=function(){ft.postMessage(null)}}else ce=function(){b(M,0)};function mt(k){E=k,T||(T=!0,ce())}function ue(k,L){A=b(function(){k(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,mt(C))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(k){switch(p){case 1:case 2:case 3:var L=3;break;default:L=p}var O=p;p=L;try{return k()}finally{p=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,L){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var O=p;p=k;try{return L()}finally{p=O}},e.unstable_scheduleCallback=function(k,L,O){var B=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?B+O:B):O=B,k){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=O+F,k={id:h++,callback:L,priorityLevel:k,startTime:O,expirationTime:F,sortIndex:-1},O>B?(k.sortIndex=O,t(u,k),r(c)===null&&k===r(u)&&(w?(d(A),A=-1):w=!0,ue(j,O-B))):(k.sortIndex=F,t(c,k),y||x||(y=!0,mt(C))),k},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(k){var L=p;return function(){var O=p;p=L;try{return k.apply(this,arguments)}finally{p=O}}}})(Gu);Fu.exports=Gu;var Mf=Fu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ff=N,Ie=Mf;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hu=new Set,Fn={};function vr(e,t){Qr(e,t),Qr(e+"Capture",t)}function Qr(e,t){for(Fn[e]=t,e=0;e<t.length;e++)Hu.add(t[e])}var jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=Object.prototype.hasOwnProperty,Gf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qo={},Yo={};function Hf(e){return Ba.call(Yo,e)?!0:Ba.call(qo,e)?!1:Gf.test(e)?Yo[e]=!0:(qo[e]=!0,!1)}function Kf(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wf(e,t,r,n){if(t===null||typeof t>"u"||Kf(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Se(e,t,r,n,i,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ge[e]=new Se(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ge[t]=new Se(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ge[e]=new Se(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ge[e]=new Se(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ge[e]=new Se(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ge[e]=new Se(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ge[e]=new Se(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ge[e]=new Se(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ge[e]=new Se(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vl=/[\-:]([a-z])/g;function ql(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vl,ql);ge[t]=new Se(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vl,ql);ge[t]=new Se(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vl,ql);ge[t]=new Se(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ge[e]=new Se(e,1,!1,e.toLowerCase(),null,!1,!1)});ge.xlinkHref=new Se("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ge[e]=new Se(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yl(e,t,r,n){var i=ge.hasOwnProperty(t)?ge[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wf(t,r,i,n)&&(r=null),n||i===null?Hf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var St=Ff.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ws=Symbol.for("react.element"),Ar=Symbol.for("react.portal"),Rr=Symbol.for("react.fragment"),Ql=Symbol.for("react.strict_mode"),$a=Symbol.for("react.profiler"),Ku=Symbol.for("react.provider"),Wu=Symbol.for("react.context"),Jl=Symbol.for("react.forward_ref"),za=Symbol.for("react.suspense"),Ma=Symbol.for("react.suspense_list"),Xl=Symbol.for("react.memo"),At=Symbol.for("react.lazy"),Vu=Symbol.for("react.offscreen"),Qo=Symbol.iterator;function mn(e){return e===null||typeof e!="object"?null:(e=Qo&&e[Qo]||e["@@iterator"],typeof e=="function"?e:null)}var te=Object.assign,ra;function Nn(e){if(ra===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ra=t&&t[1]||""}return`
`+ra+e}var na=!1;function sa(e,t){if(!e||na)return"";na=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),l=i.length-1,o=a.length-1;1<=l&&0<=o&&i[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==a[o]){var c=`
`+i[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{na=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Nn(e):""}function Vf(e){switch(e.tag){case 5:return Nn(e.type);case 16:return Nn("Lazy");case 13:return Nn("Suspense");case 19:return Nn("SuspenseList");case 0:case 2:case 15:return e=sa(e.type,!1),e;case 11:return e=sa(e.type.render,!1),e;case 1:return e=sa(e.type,!0),e;default:return""}}function Fa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rr:return"Fragment";case Ar:return"Portal";case $a:return"Profiler";case Ql:return"StrictMode";case za:return"Suspense";case Ma:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Wu:return(e.displayName||"Context")+".Consumer";case Ku:return(e._context.displayName||"Context")+".Provider";case Jl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xl:return t=e.displayName||null,t!==null?t:Fa(e.type)||"Memo";case At:t=e._payload,e=e._init;try{return Fa(e(t))}catch{}}return null}function qf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fa(t);case 8:return t===Ql?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yf(e){var t=qu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bs(e){e._valueTracker||(e._valueTracker=Yf(e))}function Yu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=qu(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ti(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ga(e,t){var r=t.checked;return te({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Jo(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=qt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Qu(e,t){t=t.checked,t!=null&&Yl(e,"checked",t,!1)}function Ha(e,t){Qu(e,t);var r=qt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ka(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ka(e,t.type,qt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xo(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ka(e,t,r){(t!=="number"||ti(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Sn=Array.isArray;function Hr(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+qt(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Wa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return te({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zo(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(P(92));if(Sn(r)){if(1<r.length)throw Error(P(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:qt(r)}}function Ju(e,t){var r=qt(t.value),n=qt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function ec(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Va(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var js,Zu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(js=js||document.createElement("div"),js.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=js.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Pn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qf=["Webkit","ms","Moz","O"];Object.keys(Pn).forEach(function(e){Qf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pn[t]=Pn[e]})});function ed(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Pn.hasOwnProperty(e)&&Pn[e]?(""+t).trim():t+"px"}function td(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=ed(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Jf=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qa(e,t){if(t){if(Jf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function Ya(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qa=null;function Zl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ja=null,Kr=null,Wr=null;function tc(e){if(e=ds(e)){if(typeof Ja!="function")throw Error(P(280));var t=e.stateNode;t&&(t=Di(t),Ja(e.stateNode,e.type,t))}}function rd(e){Kr?Wr?Wr.push(e):Wr=[e]:Kr=e}function nd(){if(Kr){var e=Kr,t=Wr;if(Wr=Kr=null,tc(e),t)for(e=0;e<t.length;e++)tc(t[e])}}function sd(e,t){return e(t)}function id(){}var ia=!1;function ad(e,t,r){if(ia)return e(t,r);ia=!0;try{return sd(e,t,r)}finally{ia=!1,(Kr!==null||Wr!==null)&&(id(),nd())}}function Hn(e,t){var r=e.stateNode;if(r===null)return null;var n=Di(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(P(231,t,typeof r));return r}var Xa=!1;if(jt)try{var pn={};Object.defineProperty(pn,"passive",{get:function(){Xa=!0}}),window.addEventListener("test",pn,pn),window.removeEventListener("test",pn,pn)}catch{Xa=!1}function Xf(e,t,r,n,i,a,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(h){this.onError(h)}}var Ln=!1,ri=null,ni=!1,Za=null,Zf={onError:function(e){Ln=!0,ri=e}};function em(e,t,r,n,i,a,l,o,c){Ln=!1,ri=null,Xf.apply(Zf,arguments)}function tm(e,t,r,n,i,a,l,o,c){if(em.apply(this,arguments),Ln){if(Ln){var u=ri;Ln=!1,ri=null}else throw Error(P(198));ni||(ni=!0,Za=u)}}function wr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ld(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rc(e){if(wr(e)!==e)throw Error(P(188))}function rm(e){var t=e.alternate;if(!t){if(t=wr(e),t===null)throw Error(P(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return rc(i),e;if(a===n)return rc(i),t;a=a.sibling}throw Error(P(188))}if(r.return!==n.return)r=i,n=a;else{for(var l=!1,o=i.child;o;){if(o===r){l=!0,r=i,n=a;break}if(o===n){l=!0,n=i,r=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===r){l=!0,r=a,n=i;break}if(o===n){l=!0,n=a,r=i;break}o=o.sibling}if(!l)throw Error(P(189))}}if(r.alternate!==n)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?e:t}function od(e){return e=rm(e),e!==null?cd(e):null}function cd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cd(e);if(t!==null)return t;e=e.sibling}return null}var ud=Ie.unstable_scheduleCallback,nc=Ie.unstable_cancelCallback,nm=Ie.unstable_shouldYield,sm=Ie.unstable_requestPaint,ne=Ie.unstable_now,im=Ie.unstable_getCurrentPriorityLevel,eo=Ie.unstable_ImmediatePriority,dd=Ie.unstable_UserBlockingPriority,si=Ie.unstable_NormalPriority,am=Ie.unstable_LowPriority,hd=Ie.unstable_IdlePriority,Ai=null,dt=null;function lm(e){if(dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(Ai,e,void 0,(e.current.flags&128)===128)}catch{}}var rt=Math.clz32?Math.clz32:um,om=Math.log,cm=Math.LN2;function um(e){return e>>>=0,e===0?32:31-(om(e)/cm|0)|0}var ks=64,_s=4194304;function En(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ii(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~i;o!==0?n=En(o):(a&=l,a!==0&&(n=En(a)))}else l=r&~i,l!==0?n=En(l):a!==0&&(n=En(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-rt(t),i=1<<r,n|=e[r],t&=~i;return n}function dm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hm(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-rt(a),o=1<<l,c=i[l];c===-1?(!(o&r)||o&n)&&(i[l]=dm(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function el(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function fd(){var e=ks;return ks<<=1,!(ks&4194240)&&(ks=64),e}function aa(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function cs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rt(t),e[t]=r}function fm(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-rt(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function to(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-rt(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var V=0;function md(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var pd,ro,gd,xd,yd,tl=!1,Ns=[],zt=null,Mt=null,Ft=null,Kn=new Map,Wn=new Map,Ot=[],mm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(e,t){switch(e){case"focusin":case"focusout":zt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":Kn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wn.delete(t.pointerId)}}function gn(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=ds(t),t!==null&&ro(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function pm(e,t,r,n,i){switch(t){case"focusin":return zt=gn(zt,e,t,r,n,i),!0;case"dragenter":return Mt=gn(Mt,e,t,r,n,i),!0;case"mouseover":return Ft=gn(Ft,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Kn.set(a,gn(Kn.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Wn.set(a,gn(Wn.get(a)||null,e,t,r,n,i)),!0}return!1}function vd(e){var t=or(e.target);if(t!==null){var r=wr(t);if(r!==null){if(t=r.tag,t===13){if(t=ld(r),t!==null){e.blockedOn=t,yd(e.priority,function(){gd(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ks(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=rl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Qa=n,r.target.dispatchEvent(n),Qa=null}else return t=ds(r),t!==null&&ro(t),e.blockedOn=r,!1;t.shift()}return!0}function ic(e,t,r){Ks(e)&&r.delete(t)}function gm(){tl=!1,zt!==null&&Ks(zt)&&(zt=null),Mt!==null&&Ks(Mt)&&(Mt=null),Ft!==null&&Ks(Ft)&&(Ft=null),Kn.forEach(ic),Wn.forEach(ic)}function xn(e,t){e.blockedOn===t&&(e.blockedOn=null,tl||(tl=!0,Ie.unstable_scheduleCallback(Ie.unstable_NormalPriority,gm)))}function Vn(e){function t(i){return xn(i,e)}if(0<Ns.length){xn(Ns[0],e);for(var r=1;r<Ns.length;r++){var n=Ns[r];n.blockedOn===e&&(n.blockedOn=null)}}for(zt!==null&&xn(zt,e),Mt!==null&&xn(Mt,e),Ft!==null&&xn(Ft,e),Kn.forEach(t),Wn.forEach(t),r=0;r<Ot.length;r++)n=Ot[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ot.length&&(r=Ot[0],r.blockedOn===null);)vd(r),r.blockedOn===null&&Ot.shift()}var Vr=St.ReactCurrentBatchConfig,ai=!0;function xm(e,t,r,n){var i=V,a=Vr.transition;Vr.transition=null;try{V=1,no(e,t,r,n)}finally{V=i,Vr.transition=a}}function ym(e,t,r,n){var i=V,a=Vr.transition;Vr.transition=null;try{V=4,no(e,t,r,n)}finally{V=i,Vr.transition=a}}function no(e,t,r,n){if(ai){var i=rl(e,t,r,n);if(i===null)ga(e,t,n,li,r),sc(e,n);else if(pm(i,e,t,r,n))n.stopPropagation();else if(sc(e,n),t&4&&-1<mm.indexOf(e)){for(;i!==null;){var a=ds(i);if(a!==null&&pd(a),a=rl(e,t,r,n),a===null&&ga(e,t,n,li,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else ga(e,t,n,null,r)}}var li=null;function rl(e,t,r,n){if(li=null,e=Zl(n),e=or(e),e!==null)if(t=wr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ld(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return li=e,null}function wd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(im()){case eo:return 1;case dd:return 4;case si:case am:return 16;case hd:return 536870912;default:return 16}default:return 16}}var Bt=null,so=null,Ws=null;function bd(){if(Ws)return Ws;var e,t=so,r=t.length,n,i="value"in Bt?Bt.value:Bt.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===i[a-n];n++);return Ws=i.slice(e,1<n?1-n:void 0)}function Vs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ss(){return!0}function ac(){return!1}function ze(e){function t(r,n,i,a,l){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ss:ac,this.isPropagationStopped=ac,this}return te(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ss)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ss)},persist:function(){},isPersistent:Ss}),t}var on={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},io=ze(on),us=te({},on,{view:0,detail:0}),vm=ze(us),la,oa,yn,Ri=te({},us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ao,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yn&&(yn&&e.type==="mousemove"?(la=e.screenX-yn.screenX,oa=e.screenY-yn.screenY):oa=la=0,yn=e),la)},movementY:function(e){return"movementY"in e?e.movementY:oa}}),lc=ze(Ri),wm=te({},Ri,{dataTransfer:0}),bm=ze(wm),jm=te({},us,{relatedTarget:0}),ca=ze(jm),km=te({},on,{animationName:0,elapsedTime:0,pseudoElement:0}),_m=ze(km),Nm=te({},on,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sm=ze(Nm),Em=te({},on,{data:0}),oc=ze(Em),Cm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Pm[e])?!!t[e]:!1}function ao(){return Lm}var Am=te({},us,{key:function(e){if(e.key){var t=Cm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Tm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ao,charCode:function(e){return e.type==="keypress"?Vs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rm=ze(Am),Om=te({},Ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cc=ze(Om),Um=te({},us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ao}),Dm=ze(Um),Im=te({},on,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bm=ze(Im),$m=te({},Ri,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zm=ze($m),Mm=[9,13,27,32],lo=jt&&"CompositionEvent"in window,An=null;jt&&"documentMode"in document&&(An=document.documentMode);var Fm=jt&&"TextEvent"in window&&!An,jd=jt&&(!lo||An&&8<An&&11>=An),uc=" ",dc=!1;function kd(e,t){switch(e){case"keyup":return Mm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _d(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Or=!1;function Gm(e,t){switch(e){case"compositionend":return _d(t);case"keypress":return t.which!==32?null:(dc=!0,uc);case"textInput":return e=t.data,e===uc&&dc?null:e;default:return null}}function Hm(e,t){if(Or)return e==="compositionend"||!lo&&kd(e,t)?(e=bd(),Ws=so=Bt=null,Or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jd&&t.locale!=="ko"?null:t.data;default:return null}}var Km={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Km[e.type]:t==="textarea"}function Nd(e,t,r,n){rd(n),t=oi(t,"onChange"),0<t.length&&(r=new io("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Rn=null,qn=null;function Wm(e){Dd(e,0)}function Oi(e){var t=Ir(e);if(Yu(t))return e}function Vm(e,t){if(e==="change")return t}var Sd=!1;if(jt){var ua;if(jt){var da="oninput"in document;if(!da){var fc=document.createElement("div");fc.setAttribute("oninput","return;"),da=typeof fc.oninput=="function"}ua=da}else ua=!1;Sd=ua&&(!document.documentMode||9<document.documentMode)}function mc(){Rn&&(Rn.detachEvent("onpropertychange",Ed),qn=Rn=null)}function Ed(e){if(e.propertyName==="value"&&Oi(qn)){var t=[];Nd(t,qn,e,Zl(e)),ad(Wm,t)}}function qm(e,t,r){e==="focusin"?(mc(),Rn=t,qn=r,Rn.attachEvent("onpropertychange",Ed)):e==="focusout"&&mc()}function Ym(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Oi(qn)}function Qm(e,t){if(e==="click")return Oi(t)}function Jm(e,t){if(e==="input"||e==="change")return Oi(t)}function Xm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var it=typeof Object.is=="function"?Object.is:Xm;function Yn(e,t){if(it(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Ba.call(t,i)||!it(e[i],t[i]))return!1}return!0}function pc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gc(e,t){var r=pc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pc(r)}}function Cd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Td(){for(var e=window,t=ti();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ti(e.document)}return t}function oo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zm(e){var t=Td(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Cd(r.ownerDocument.documentElement,r)){if(n!==null&&oo(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=gc(r,a);var l=gc(r,n);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ep=jt&&"documentMode"in document&&11>=document.documentMode,Ur=null,nl=null,On=null,sl=!1;function xc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sl||Ur==null||Ur!==ti(n)||(n=Ur,"selectionStart"in n&&oo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),On&&Yn(On,n)||(On=n,n=oi(nl,"onSelect"),0<n.length&&(t=new io("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ur)))}function Es(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Dr={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionend:Es("Transition","TransitionEnd")},ha={},Pd={};jt&&(Pd=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function Ui(e){if(ha[e])return ha[e];if(!Dr[e])return e;var t=Dr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Pd)return ha[e]=t[r];return e}var Ld=Ui("animationend"),Ad=Ui("animationiteration"),Rd=Ui("animationstart"),Od=Ui("transitionend"),Ud=new Map,yc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xt(e,t){Ud.set(e,t),vr(t,[e])}for(var fa=0;fa<yc.length;fa++){var ma=yc[fa],tp=ma.toLowerCase(),rp=ma[0].toUpperCase()+ma.slice(1);Xt(tp,"on"+rp)}Xt(Ld,"onAnimationEnd");Xt(Ad,"onAnimationIteration");Xt(Rd,"onAnimationStart");Xt("dblclick","onDoubleClick");Xt("focusin","onFocus");Xt("focusout","onBlur");Xt(Od,"onTransitionEnd");Qr("onMouseEnter",["mouseout","mouseover"]);Qr("onMouseLeave",["mouseout","mouseover"]);Qr("onPointerEnter",["pointerout","pointerover"]);Qr("onPointerLeave",["pointerout","pointerover"]);vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),np=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cn));function vc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,tm(n,t,void 0,e),e.currentTarget=null}function Dd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;vc(i,o,u),a=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;vc(i,o,u),a=c}}}if(ni)throw e=Za,ni=!1,Za=null,e}function Q(e,t){var r=t[cl];r===void 0&&(r=t[cl]=new Set);var n=e+"__bubble";r.has(n)||(Id(t,e,2,!1),r.add(n))}function pa(e,t,r){var n=0;t&&(n|=4),Id(r,e,n,t)}var Cs="_reactListening"+Math.random().toString(36).slice(2);function Qn(e){if(!e[Cs]){e[Cs]=!0,Hu.forEach(function(r){r!=="selectionchange"&&(np.has(r)||pa(r,!1,e),pa(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cs]||(t[Cs]=!0,pa("selectionchange",!1,t))}}function Id(e,t,r,n){switch(wd(t)){case 1:var i=xm;break;case 4:i=ym;break;default:i=no}r=i.bind(null,t,r,e),i=void 0,!Xa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function ga(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;o!==null;){if(l=or(o),l===null)return;if(c=l.tag,c===5||c===6){n=a=l;continue e}o=o.parentNode}}n=n.return}ad(function(){var u=a,h=Zl(r),m=[];e:{var p=Ud.get(e);if(p!==void 0){var x=io,y=e;switch(e){case"keypress":if(Vs(r)===0)break e;case"keydown":case"keyup":x=Rm;break;case"focusin":y="focus",x=ca;break;case"focusout":y="blur",x=ca;break;case"beforeblur":case"afterblur":x=ca;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=lc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=bm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Dm;break;case Ld:case Ad:case Rd:x=_m;break;case Od:x=Bm;break;case"scroll":x=vm;break;case"wheel":x=zm;break;case"copy":case"cut":case"paste":x=Sm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=cc}var w=(t&4)!==0,b=!w&&e==="scroll",d=w?p!==null?p+"Capture":null:p;w=[];for(var f=u,g;f!==null;){g=f;var j=g.stateNode;if(g.tag===5&&j!==null&&(g=j,d!==null&&(j=Hn(f,d),j!=null&&w.push(Jn(f,j,g)))),b)break;f=f.return}0<w.length&&(p=new x(p,y,null,r,h),m.push({event:p,listeners:w}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",p&&r!==Qa&&(y=r.relatedTarget||r.fromElement)&&(or(y)||y[kt]))break e;if((x||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,x?(y=r.relatedTarget||r.toElement,x=u,y=y?or(y):null,y!==null&&(b=wr(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=u),x!==y)){if(w=lc,j="onMouseLeave",d="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(w=cc,j="onPointerLeave",d="onPointerEnter",f="pointer"),b=x==null?p:Ir(x),g=y==null?p:Ir(y),p=new w(j,f+"leave",x,r,h),p.target=b,p.relatedTarget=g,j=null,or(h)===u&&(w=new w(d,f+"enter",y,r,h),w.target=g,w.relatedTarget=b,j=w),b=j,x&&y)t:{for(w=x,d=y,f=0,g=w;g;g=kr(g))f++;for(g=0,j=d;j;j=kr(j))g++;for(;0<f-g;)w=kr(w),f--;for(;0<g-f;)d=kr(d),g--;for(;f--;){if(w===d||d!==null&&w===d.alternate)break t;w=kr(w),d=kr(d)}w=null}else w=null;x!==null&&wc(m,p,x,w,!1),y!==null&&b!==null&&wc(m,b,y,w,!0)}}e:{if(p=u?Ir(u):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var C=Vm;else if(hc(p))if(Sd)C=Jm;else{C=Ym;var T=qm}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=Qm);if(C&&(C=C(e,u))){Nd(m,C,r,h);break e}T&&T(e,p,u),e==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&Ka(p,"number",p.value)}switch(T=u?Ir(u):window,e){case"focusin":(hc(T)||T.contentEditable==="true")&&(Ur=T,nl=u,On=null);break;case"focusout":On=nl=Ur=null;break;case"mousedown":sl=!0;break;case"contextmenu":case"mouseup":case"dragend":sl=!1,xc(m,r,h);break;case"selectionchange":if(ep)break;case"keydown":case"keyup":xc(m,r,h)}var E;if(lo)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Or?kd(e,r)&&(A="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(jd&&r.locale!=="ko"&&(Or||A!=="onCompositionStart"?A==="onCompositionEnd"&&Or&&(E=bd()):(Bt=h,so="value"in Bt?Bt.value:Bt.textContent,Or=!0)),T=oi(u,A),0<T.length&&(A=new oc(A,e,null,r,h),m.push({event:A,listeners:T}),E?A.data=E:(E=_d(r),E!==null&&(A.data=E)))),(E=Fm?Gm(e,r):Hm(e,r))&&(u=oi(u,"onBeforeInput"),0<u.length&&(h=new oc("onBeforeInput","beforeinput",null,r,h),m.push({event:h,listeners:u}),h.data=E))}Dd(m,t)})}function Jn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function oi(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Hn(e,r),a!=null&&n.unshift(Jn(e,a,i)),a=Hn(e,t),a!=null&&n.push(Jn(e,a,i))),e=e.return}return n}function kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wc(e,t,r,n,i){for(var a=t._reactName,l=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=Hn(r,a),c!=null&&l.unshift(Jn(r,c,o))):i||(c=Hn(r,a),c!=null&&l.push(Jn(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var sp=/\r\n?/g,ip=/\u0000|\uFFFD/g;function bc(e){return(typeof e=="string"?e:""+e).replace(sp,`
`).replace(ip,"")}function Ts(e,t,r){if(t=bc(t),bc(e)!==t&&r)throw Error(P(425))}function ci(){}var il=null,al=null;function ll(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ol=typeof setTimeout=="function"?setTimeout:void 0,ap=typeof clearTimeout=="function"?clearTimeout:void 0,jc=typeof Promise=="function"?Promise:void 0,lp=typeof queueMicrotask=="function"?queueMicrotask:typeof jc<"u"?function(e){return jc.resolve(null).then(e).catch(op)}:ol;function op(e){setTimeout(function(){throw e})}function xa(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Vn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Vn(t)}function Gt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var cn=Math.random().toString(36).slice(2),ct="__reactFiber$"+cn,Xn="__reactProps$"+cn,kt="__reactContainer$"+cn,cl="__reactEvents$"+cn,cp="__reactListeners$"+cn,up="__reactHandles$"+cn;function or(e){var t=e[ct];if(t)return t;for(var r=e.parentNode;r;){if(t=r[kt]||r[ct]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=kc(e);e!==null;){if(r=e[ct])return r;e=kc(e)}return t}e=r,r=e.parentNode}return null}function ds(e){return e=e[ct]||e[kt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ir(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function Di(e){return e[Xn]||null}var ul=[],Br=-1;function Zt(e){return{current:e}}function J(e){0>Br||(e.current=ul[Br],ul[Br]=null,Br--)}function Y(e,t){Br++,ul[Br]=e.current,e.current=t}var Yt={},be=Zt(Yt),Pe=Zt(!1),fr=Yt;function Jr(e,t){var r=e.type.contextTypes;if(!r)return Yt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Le(e){return e=e.childContextTypes,e!=null}function ui(){J(Pe),J(be)}function _c(e,t,r){if(be.current!==Yt)throw Error(P(168));Y(be,t),Y(Pe,r)}function Bd(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(P(108,qf(e)||"Unknown",i));return te({},r,n)}function di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yt,fr=be.current,Y(be,e),Y(Pe,Pe.current),!0}function Nc(e,t,r){var n=e.stateNode;if(!n)throw Error(P(169));r?(e=Bd(e,t,fr),n.__reactInternalMemoizedMergedChildContext=e,J(Pe),J(be),Y(be,e)):J(Pe),Y(Pe,r)}var yt=null,Ii=!1,ya=!1;function $d(e){yt===null?yt=[e]:yt.push(e)}function dp(e){Ii=!0,$d(e)}function er(){if(!ya&&yt!==null){ya=!0;var e=0,t=V;try{var r=yt;for(V=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}yt=null,Ii=!1}catch(i){throw yt!==null&&(yt=yt.slice(e+1)),ud(eo,er),i}finally{V=t,ya=!1}}return null}var $r=[],zr=0,hi=null,fi=0,Me=[],Fe=0,mr=null,vt=1,wt="";function sr(e,t){$r[zr++]=fi,$r[zr++]=hi,hi=e,fi=t}function zd(e,t,r){Me[Fe++]=vt,Me[Fe++]=wt,Me[Fe++]=mr,mr=e;var n=vt;e=wt;var i=32-rt(n)-1;n&=~(1<<i),r+=1;var a=32-rt(t)+i;if(30<a){var l=i-i%5;a=(n&(1<<l)-1).toString(32),n>>=l,i-=l,vt=1<<32-rt(t)+i|r<<i|n,wt=a+e}else vt=1<<a|r<<i|n,wt=e}function co(e){e.return!==null&&(sr(e,1),zd(e,1,0))}function uo(e){for(;e===hi;)hi=$r[--zr],$r[zr]=null,fi=$r[--zr],$r[zr]=null;for(;e===mr;)mr=Me[--Fe],Me[Fe]=null,wt=Me[--Fe],Me[Fe]=null,vt=Me[--Fe],Me[Fe]=null}var De=null,Ue=null,X=!1,et=null;function Md(e,t){var r=Ge(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Sc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,De=e,Ue=Gt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,De=e,Ue=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=mr!==null?{id:vt,overflow:wt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ge(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,De=e,Ue=null,!0):!1;default:return!1}}function dl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hl(e){if(X){var t=Ue;if(t){var r=t;if(!Sc(e,t)){if(dl(e))throw Error(P(418));t=Gt(r.nextSibling);var n=De;t&&Sc(e,t)?Md(n,r):(e.flags=e.flags&-4097|2,X=!1,De=e)}}else{if(dl(e))throw Error(P(418));e.flags=e.flags&-4097|2,X=!1,De=e}}}function Ec(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;De=e}function Ps(e){if(e!==De)return!1;if(!X)return Ec(e),X=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ll(e.type,e.memoizedProps)),t&&(t=Ue)){if(dl(e))throw Fd(),Error(P(418));for(;t;)Md(e,t),t=Gt(t.nextSibling)}if(Ec(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ue=Gt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ue=null}}else Ue=De?Gt(e.stateNode.nextSibling):null;return!0}function Fd(){for(var e=Ue;e;)e=Gt(e.nextSibling)}function Xr(){Ue=De=null,X=!1}function ho(e){et===null?et=[e]:et.push(e)}var hp=St.ReactCurrentBatchConfig;function vn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var n=r.stateNode}if(!n)throw Error(P(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var o=i.refs;l===null?delete o[a]:o[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,e))}return e}function Ls(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cc(e){var t=e._init;return t(e._payload)}function Gd(e){function t(d,f){if(e){var g=d.deletions;g===null?(d.deletions=[f],d.flags|=16):g.push(f)}}function r(d,f){if(!e)return null;for(;f!==null;)t(d,f),f=f.sibling;return null}function n(d,f){for(d=new Map;f!==null;)f.key!==null?d.set(f.key,f):d.set(f.index,f),f=f.sibling;return d}function i(d,f){return d=Vt(d,f),d.index=0,d.sibling=null,d}function a(d,f,g){return d.index=g,e?(g=d.alternate,g!==null?(g=g.index,g<f?(d.flags|=2,f):g):(d.flags|=2,f)):(d.flags|=1048576,f)}function l(d){return e&&d.alternate===null&&(d.flags|=2),d}function o(d,f,g,j){return f===null||f.tag!==6?(f=Na(g,d.mode,j),f.return=d,f):(f=i(f,g),f.return=d,f)}function c(d,f,g,j){var C=g.type;return C===Rr?h(d,f,g.props.children,j,g.key):f!==null&&(f.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===At&&Cc(C)===f.type)?(j=i(f,g.props),j.ref=vn(d,f,g),j.return=d,j):(j=ei(g.type,g.key,g.props,null,d.mode,j),j.ref=vn(d,f,g),j.return=d,j)}function u(d,f,g,j){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=Sa(g,d.mode,j),f.return=d,f):(f=i(f,g.children||[]),f.return=d,f)}function h(d,f,g,j,C){return f===null||f.tag!==7?(f=hr(g,d.mode,j,C),f.return=d,f):(f=i(f,g),f.return=d,f)}function m(d,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Na(""+f,d.mode,g),f.return=d,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ws:return g=ei(f.type,f.key,f.props,null,d.mode,g),g.ref=vn(d,null,f),g.return=d,g;case Ar:return f=Sa(f,d.mode,g),f.return=d,f;case At:var j=f._init;return m(d,j(f._payload),g)}if(Sn(f)||mn(f))return f=hr(f,d.mode,g,null),f.return=d,f;Ls(d,f)}return null}function p(d,f,g,j){var C=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return C!==null?null:o(d,f,""+g,j);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ws:return g.key===C?c(d,f,g,j):null;case Ar:return g.key===C?u(d,f,g,j):null;case At:return C=g._init,p(d,f,C(g._payload),j)}if(Sn(g)||mn(g))return C!==null?null:h(d,f,g,j,null);Ls(d,g)}return null}function x(d,f,g,j,C){if(typeof j=="string"&&j!==""||typeof j=="number")return d=d.get(g)||null,o(f,d,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ws:return d=d.get(j.key===null?g:j.key)||null,c(f,d,j,C);case Ar:return d=d.get(j.key===null?g:j.key)||null,u(f,d,j,C);case At:var T=j._init;return x(d,f,g,T(j._payload),C)}if(Sn(j)||mn(j))return d=d.get(g)||null,h(f,d,j,C,null);Ls(f,j)}return null}function y(d,f,g,j){for(var C=null,T=null,E=f,A=f=0,S=null;E!==null&&A<g.length;A++){E.index>A?(S=E,E=null):S=E.sibling;var _=p(d,E,g[A],j);if(_===null){E===null&&(E=S);break}e&&E&&_.alternate===null&&t(d,E),f=a(_,f,A),T===null?C=_:T.sibling=_,T=_,E=S}if(A===g.length)return r(d,E),X&&sr(d,A),C;if(E===null){for(;A<g.length;A++)E=m(d,g[A],j),E!==null&&(f=a(E,f,A),T===null?C=E:T.sibling=E,T=E);return X&&sr(d,A),C}for(E=n(d,E);A<g.length;A++)S=x(E,d,A,g[A],j),S!==null&&(e&&S.alternate!==null&&E.delete(S.key===null?A:S.key),f=a(S,f,A),T===null?C=S:T.sibling=S,T=S);return e&&E.forEach(function(I){return t(d,I)}),X&&sr(d,A),C}function w(d,f,g,j){var C=mn(g);if(typeof C!="function")throw Error(P(150));if(g=C.call(g),g==null)throw Error(P(151));for(var T=C=null,E=f,A=f=0,S=null,_=g.next();E!==null&&!_.done;A++,_=g.next()){E.index>A?(S=E,E=null):S=E.sibling;var I=p(d,E,_.value,j);if(I===null){E===null&&(E=S);break}e&&E&&I.alternate===null&&t(d,E),f=a(I,f,A),T===null?C=I:T.sibling=I,T=I,E=S}if(_.done)return r(d,E),X&&sr(d,A),C;if(E===null){for(;!_.done;A++,_=g.next())_=m(d,_.value,j),_!==null&&(f=a(_,f,A),T===null?C=_:T.sibling=_,T=_);return X&&sr(d,A),C}for(E=n(d,E);!_.done;A++,_=g.next())_=x(E,d,A,_.value,j),_!==null&&(e&&_.alternate!==null&&E.delete(_.key===null?A:_.key),f=a(_,f,A),T===null?C=_:T.sibling=_,T=_);return e&&E.forEach(function(M){return t(d,M)}),X&&sr(d,A),C}function b(d,f,g,j){if(typeof g=="object"&&g!==null&&g.type===Rr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case ws:e:{for(var C=g.key,T=f;T!==null;){if(T.key===C){if(C=g.type,C===Rr){if(T.tag===7){r(d,T.sibling),f=i(T,g.props.children),f.return=d,d=f;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===At&&Cc(C)===T.type){r(d,T.sibling),f=i(T,g.props),f.ref=vn(d,T,g),f.return=d,d=f;break e}r(d,T);break}else t(d,T);T=T.sibling}g.type===Rr?(f=hr(g.props.children,d.mode,j,g.key),f.return=d,d=f):(j=ei(g.type,g.key,g.props,null,d.mode,j),j.ref=vn(d,f,g),j.return=d,d=j)}return l(d);case Ar:e:{for(T=g.key;f!==null;){if(f.key===T)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){r(d,f.sibling),f=i(f,g.children||[]),f.return=d,d=f;break e}else{r(d,f);break}else t(d,f);f=f.sibling}f=Sa(g,d.mode,j),f.return=d,d=f}return l(d);case At:return T=g._init,b(d,f,T(g._payload),j)}if(Sn(g))return y(d,f,g,j);if(mn(g))return w(d,f,g,j);Ls(d,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(r(d,f.sibling),f=i(f,g),f.return=d,d=f):(r(d,f),f=Na(g,d.mode,j),f.return=d,d=f),l(d)):r(d,f)}return b}var Zr=Gd(!0),Hd=Gd(!1),mi=Zt(null),pi=null,Mr=null,fo=null;function mo(){fo=Mr=pi=null}function po(e){var t=mi.current;J(mi),e._currentValue=t}function fl(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function qr(e,t){pi=e,fo=Mr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Te=!0),e.firstContext=null)}function We(e){var t=e._currentValue;if(fo!==e)if(e={context:e,memoizedValue:t,next:null},Mr===null){if(pi===null)throw Error(P(308));Mr=e,pi.dependencies={lanes:0,firstContext:e}}else Mr=Mr.next=e;return t}var cr=null;function go(e){cr===null?cr=[e]:cr.push(e)}function Kd(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,go(t)):(r.next=i.next,i.next=r),t.interleaved=r,_t(e,n)}function _t(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Rt=!1;function xo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ht(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,W&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,_t(e,r)}return i=n.interleaved,i===null?(t.next=t,go(n)):(t.next=i.next,i.next=t),n.interleaved=t,_t(e,r)}function qs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,to(e,r)}}function Tc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=l:a=a.next=l,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function gi(e,t,r,n){var i=e.updateQueue;Rt=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?a=u:l.next=u,l=c;var h=e.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(a!==null){var m=i.baseState;l=0,h=u=c=null,o=a;do{var p=o.lane,x=o.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,w=o;switch(p=t,x=r,w.tag){case 1:if(y=w.payload,typeof y=="function"){m=y.call(x,m,p);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,p=typeof y=="function"?y.call(x,m,p):y,p==null)break e;m=te({},m,p);break e;case 2:Rt=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else x={eventTime:x,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=x,c=m):h=h.next=x,l|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(c=m),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);gr|=l,e.lanes=l,e.memoizedState=m}}function Pc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(P(191,i));i.call(n)}}}var hs={},ht=Zt(hs),Zn=Zt(hs),es=Zt(hs);function ur(e){if(e===hs)throw Error(P(174));return e}function yo(e,t){switch(Y(es,t),Y(Zn,e),Y(ht,hs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Va(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Va(t,e)}J(ht),Y(ht,t)}function en(){J(ht),J(Zn),J(es)}function Vd(e){ur(es.current);var t=ur(ht.current),r=Va(t,e.type);t!==r&&(Y(Zn,e),Y(ht,r))}function vo(e){Zn.current===e&&(J(ht),J(Zn))}var Z=Zt(0);function xi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var va=[];function wo(){for(var e=0;e<va.length;e++)va[e]._workInProgressVersionPrimary=null;va.length=0}var Ys=St.ReactCurrentDispatcher,wa=St.ReactCurrentBatchConfig,pr=0,ee=null,le=null,de=null,yi=!1,Un=!1,ts=0,fp=0;function ye(){throw Error(P(321))}function bo(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!it(e[r],t[r]))return!1;return!0}function jo(e,t,r,n,i,a){if(pr=a,ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ys.current=e===null||e.memoizedState===null?xp:yp,e=r(n,i),Un){a=0;do{if(Un=!1,ts=0,25<=a)throw Error(P(301));a+=1,de=le=null,t.updateQueue=null,Ys.current=vp,e=r(n,i)}while(Un)}if(Ys.current=vi,t=le!==null&&le.next!==null,pr=0,de=le=ee=null,yi=!1,t)throw Error(P(300));return e}function ko(){var e=ts!==0;return ts=0,e}function lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?ee.memoizedState=de=e:de=de.next=e,de}function Ve(){if(le===null){var e=ee.alternate;e=e!==null?e.memoizedState:null}else e=le.next;var t=de===null?ee.memoizedState:de.next;if(t!==null)de=t,le=e;else{if(e===null)throw Error(P(310));le=e,e={memoizedState:le.memoizedState,baseState:le.baseState,baseQueue:le.baseQueue,queue:le.queue,next:null},de===null?ee.memoizedState=de=e:de=de.next=e}return de}function rs(e,t){return typeof t=="function"?t(e):t}function ba(e){var t=Ve(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=le,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=l=null,c=null,u=a;do{var h=u.lane;if((pr&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var m={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=m,l=n):c=c.next=m,ee.lanes|=h,gr|=h}u=u.next}while(u!==null&&u!==a);c===null?l=n:c.next=o,it(n,t.memoizedState)||(Te=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,ee.lanes|=a,gr|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ja(e){var t=Ve(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var l=i=i.next;do a=e(a,l.action),l=l.next;while(l!==i);it(a,t.memoizedState)||(Te=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function qd(){}function Yd(e,t){var r=ee,n=Ve(),i=t(),a=!it(n.memoizedState,i);if(a&&(n.memoizedState=i,Te=!0),n=n.queue,_o(Xd.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||de!==null&&de.memoizedState.tag&1){if(r.flags|=2048,ns(9,Jd.bind(null,r,n,i,t),void 0,null),he===null)throw Error(P(349));pr&30||Qd(r,t,i)}return i}function Qd(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ee.updateQueue,t===null?(t={lastEffect:null,stores:null},ee.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Jd(e,t,r,n){t.value=r,t.getSnapshot=n,Zd(t)&&eh(e)}function Xd(e,t,r){return r(function(){Zd(t)&&eh(e)})}function Zd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!it(e,r)}catch{return!0}}function eh(e){var t=_t(e,1);t!==null&&nt(t,e,1,-1)}function Lc(e){var t=lt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e},t.queue=e,e=e.dispatch=gp.bind(null,ee,e),[t.memoizedState,e]}function ns(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ee.updateQueue,t===null?(t={lastEffect:null,stores:null},ee.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function th(){return Ve().memoizedState}function Qs(e,t,r,n){var i=lt();ee.flags|=e,i.memoizedState=ns(1|t,r,void 0,n===void 0?null:n)}function Bi(e,t,r,n){var i=Ve();n=n===void 0?null:n;var a=void 0;if(le!==null){var l=le.memoizedState;if(a=l.destroy,n!==null&&bo(n,l.deps)){i.memoizedState=ns(t,r,a,n);return}}ee.flags|=e,i.memoizedState=ns(1|t,r,a,n)}function Ac(e,t){return Qs(8390656,8,e,t)}function _o(e,t){return Bi(2048,8,e,t)}function rh(e,t){return Bi(4,2,e,t)}function nh(e,t){return Bi(4,4,e,t)}function sh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ih(e,t,r){return r=r!=null?r.concat([e]):null,Bi(4,4,sh.bind(null,t,e),r)}function No(){}function ah(e,t){var r=Ve();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&bo(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function lh(e,t){var r=Ve();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&bo(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function oh(e,t,r){return pr&21?(it(r,t)||(r=fd(),ee.lanes|=r,gr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Te=!0),e.memoizedState=r)}function mp(e,t){var r=V;V=r!==0&&4>r?r:4,e(!0);var n=wa.transition;wa.transition={};try{e(!1),t()}finally{V=r,wa.transition=n}}function ch(){return Ve().memoizedState}function pp(e,t,r){var n=Wt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},uh(e))dh(t,r);else if(r=Kd(e,t,r,n),r!==null){var i=_e();nt(r,e,n,i),hh(r,t,n)}}function gp(e,t,r){var n=Wt(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(uh(e))dh(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,o=a(l,r);if(i.hasEagerState=!0,i.eagerState=o,it(o,l)){var c=t.interleaved;c===null?(i.next=i,go(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=Kd(e,t,i,n),r!==null&&(i=_e(),nt(r,e,n,i),hh(r,t,n))}}function uh(e){var t=e.alternate;return e===ee||t!==null&&t===ee}function dh(e,t){Un=yi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function hh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,to(e,r)}}var vi={readContext:We,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useInsertionEffect:ye,useLayoutEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useMutableSource:ye,useSyncExternalStore:ye,useId:ye,unstable_isNewReconciler:!1},xp={readContext:We,useCallback:function(e,t){return lt().memoizedState=[e,t===void 0?null:t],e},useContext:We,useEffect:Ac,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Qs(4194308,4,sh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Qs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qs(4,2,e,t)},useMemo:function(e,t){var r=lt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=lt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=pp.bind(null,ee,e),[n.memoizedState,e]},useRef:function(e){var t=lt();return e={current:e},t.memoizedState=e},useState:Lc,useDebugValue:No,useDeferredValue:function(e){return lt().memoizedState=e},useTransition:function(){var e=Lc(!1),t=e[0];return e=mp.bind(null,e[1]),lt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ee,i=lt();if(X){if(r===void 0)throw Error(P(407));r=r()}else{if(r=t(),he===null)throw Error(P(349));pr&30||Qd(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,Ac(Xd.bind(null,n,a,e),[e]),n.flags|=2048,ns(9,Jd.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=lt(),t=he.identifierPrefix;if(X){var r=wt,n=vt;r=(n&~(1<<32-rt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ts++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=fp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yp={readContext:We,useCallback:ah,useContext:We,useEffect:_o,useImperativeHandle:ih,useInsertionEffect:rh,useLayoutEffect:nh,useMemo:lh,useReducer:ba,useRef:th,useState:function(){return ba(rs)},useDebugValue:No,useDeferredValue:function(e){var t=Ve();return oh(t,le.memoizedState,e)},useTransition:function(){var e=ba(rs)[0],t=Ve().memoizedState;return[e,t]},useMutableSource:qd,useSyncExternalStore:Yd,useId:ch,unstable_isNewReconciler:!1},vp={readContext:We,useCallback:ah,useContext:We,useEffect:_o,useImperativeHandle:ih,useInsertionEffect:rh,useLayoutEffect:nh,useMemo:lh,useReducer:ja,useRef:th,useState:function(){return ja(rs)},useDebugValue:No,useDeferredValue:function(e){var t=Ve();return le===null?t.memoizedState=e:oh(t,le.memoizedState,e)},useTransition:function(){var e=ja(rs)[0],t=Ve().memoizedState;return[e,t]},useMutableSource:qd,useSyncExternalStore:Yd,useId:ch,unstable_isNewReconciler:!1};function Je(e,t){if(e&&e.defaultProps){t=te({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ml(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:te({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var $i={isMounted:function(e){return(e=e._reactInternals)?wr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=_e(),i=Wt(e),a=bt(n,i);a.payload=t,r!=null&&(a.callback=r),t=Ht(e,a,i),t!==null&&(nt(t,e,i,n),qs(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=_e(),i=Wt(e),a=bt(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Ht(e,a,i),t!==null&&(nt(t,e,i,n),qs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=_e(),n=Wt(e),i=bt(r,n);i.tag=2,t!=null&&(i.callback=t),t=Ht(e,i,n),t!==null&&(nt(t,e,n,r),qs(t,e,n))}};function Rc(e,t,r,n,i,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,l):t.prototype&&t.prototype.isPureReactComponent?!Yn(r,n)||!Yn(i,a):!0}function fh(e,t,r){var n=!1,i=Yt,a=t.contextType;return typeof a=="object"&&a!==null?a=We(a):(i=Le(t)?fr:be.current,n=t.contextTypes,a=(n=n!=null)?Jr(e,i):Yt),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$i,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Oc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&$i.enqueueReplaceState(t,t.state,null)}function pl(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},xo(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=We(a):(a=Le(t)?fr:be.current,i.context=Jr(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ml(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&$i.enqueueReplaceState(i,i.state,null),gi(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function tn(e,t){try{var r="",n=t;do r+=Vf(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function ka(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function gl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var wp=typeof WeakMap=="function"?WeakMap:Map;function mh(e,t,r){r=bt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){bi||(bi=!0,Sl=n),gl(e,t)},r}function ph(e,t,r){r=bt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){gl(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){gl(e,t),typeof n!="function"&&(Kt===null?Kt=new Set([this]):Kt.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function Uc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new wp;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Op.bind(null,e,t,r),t.then(e,e))}function Dc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ic(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=bt(-1,1),t.tag=2,Ht(r,t,1))),r.lanes|=1),e)}var bp=St.ReactCurrentOwner,Te=!1;function ke(e,t,r,n){t.child=e===null?Hd(t,null,r,n):Zr(t,e.child,r,n)}function Bc(e,t,r,n,i){r=r.render;var a=t.ref;return qr(t,i),n=jo(e,t,r,n,a,i),r=ko(),e!==null&&!Te?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Nt(e,t,i)):(X&&r&&co(t),t.flags|=1,ke(e,t,n,i),t.child)}function $c(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!Ro(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,gh(e,t,a,n,i)):(e=ei(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var l=a.memoizedProps;if(r=r.compare,r=r!==null?r:Yn,r(l,n)&&e.ref===t.ref)return Nt(e,t,i)}return t.flags|=1,e=Vt(a,n),e.ref=t.ref,e.return=t,t.child=e}function gh(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(Yn(a,n)&&e.ref===t.ref)if(Te=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(Te=!0);else return t.lanes=e.lanes,Nt(e,t,i)}return xl(e,t,r,n,i)}function xh(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(Gr,Oe),Oe|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Y(Gr,Oe),Oe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Y(Gr,Oe),Oe|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Y(Gr,Oe),Oe|=n;return ke(e,t,i,r),t.child}function yh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function xl(e,t,r,n,i){var a=Le(r)?fr:be.current;return a=Jr(t,a),qr(t,i),r=jo(e,t,r,n,a,i),n=ko(),e!==null&&!Te?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Nt(e,t,i)):(X&&n&&co(t),t.flags|=1,ke(e,t,r,i),t.child)}function zc(e,t,r,n,i){if(Le(r)){var a=!0;di(t)}else a=!1;if(qr(t,i),t.stateNode===null)Js(e,t),fh(t,r,n),pl(t,r,n,i),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=We(u):(u=Le(r)?fr:be.current,u=Jr(t,u));var h=r.getDerivedStateFromProps,m=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==u)&&Oc(t,l,n,u),Rt=!1;var p=t.memoizedState;l.state=p,gi(t,n,l,i),c=t.memoizedState,o!==n||p!==c||Pe.current||Rt?(typeof h=="function"&&(ml(t,r,h,n),c=t.memoizedState),(o=Rt||Rc(t,r,o,n,p,c,u))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=u,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,Wd(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Je(t.type,o),l.props=u,m=t.pendingProps,p=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=We(c):(c=Le(r)?fr:be.current,c=Jr(t,c));var x=r.getDerivedStateFromProps;(h=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||p!==c)&&Oc(t,l,n,c),Rt=!1,p=t.memoizedState,l.state=p,gi(t,n,l,i);var y=t.memoizedState;o!==m||p!==y||Pe.current||Rt?(typeof x=="function"&&(ml(t,r,x,n),y=t.memoizedState),(u=Rt||Rc(t,r,u,n,p,y,c)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,y,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,y,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),l.props=n,l.state=y,l.context=c,n=u):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return yl(e,t,r,n,a,i)}function yl(e,t,r,n,i,a){yh(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return i&&Nc(t,r,!1),Nt(e,t,a);n=t.stateNode,bp.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=Zr(t,e.child,null,a),t.child=Zr(t,null,o,a)):ke(e,t,o,a),t.memoizedState=n.state,i&&Nc(t,r,!0),t.child}function vh(e){var t=e.stateNode;t.pendingContext?_c(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_c(e,t.context,!1),yo(e,t.containerInfo)}function Mc(e,t,r,n,i){return Xr(),ho(i),t.flags|=256,ke(e,t,r,n),t.child}var vl={dehydrated:null,treeContext:null,retryLane:0};function wl(e){return{baseLanes:e,cachePool:null,transitions:null}}function wh(e,t,r){var n=t.pendingProps,i=Z.current,a=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Y(Z,i&1),e===null)return hl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,a?(n=t.mode,a=t.child,l={mode:"hidden",children:l},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Fi(l,n,0,null),e=hr(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=wl(r),t.memoizedState=vl,e):So(t,l));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return jp(e,t,l,n,o,i,r);if(a){a=n.fallback,l=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Vt(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Vt(o,a):(a=hr(a,l,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,l=e.child.memoizedState,l=l===null?wl(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=vl,n}return a=e.child,e=a.sibling,n=Vt(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function So(e,t){return t=Fi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function As(e,t,r,n){return n!==null&&ho(n),Zr(t,e.child,null,r),e=So(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jp(e,t,r,n,i,a,l){if(r)return t.flags&256?(t.flags&=-257,n=ka(Error(P(422))),As(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Fi({mode:"visible",children:n.children},i,0,null),a=hr(a,i,l,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Zr(t,e.child,null,l),t.child.memoizedState=wl(l),t.memoizedState=vl,a);if(!(t.mode&1))return As(e,t,l,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(P(419)),n=ka(a,n,void 0),As(e,t,l,n)}if(o=(l&e.childLanes)!==0,Te||o){if(n=he,n!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,_t(e,i),nt(n,e,i,-1))}return Ao(),n=ka(Error(P(421))),As(e,t,l,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Up.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Ue=Gt(i.nextSibling),De=t,X=!0,et=null,e!==null&&(Me[Fe++]=vt,Me[Fe++]=wt,Me[Fe++]=mr,vt=e.id,wt=e.overflow,mr=t),t=So(t,n.children),t.flags|=4096,t)}function Fc(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),fl(e.return,t,r)}function _a(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function bh(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(ke(e,t,n.children,r),n=Z.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fc(e,r,t);else if(e.tag===19)Fc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Y(Z,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&xi(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),_a(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&xi(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}_a(t,!0,r,null,a);break;case"together":_a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Js(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),gr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,r=Vt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Vt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function kp(e,t,r){switch(t.tag){case 3:vh(t),Xr();break;case 5:Vd(t);break;case 1:Le(t.type)&&di(t);break;case 4:yo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Y(mi,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Y(Z,Z.current&1),t.flags|=128,null):r&t.child.childLanes?wh(e,t,r):(Y(Z,Z.current&1),e=Nt(e,t,r),e!==null?e.sibling:null);Y(Z,Z.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return bh(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Y(Z,Z.current),n)break;return null;case 22:case 23:return t.lanes=0,xh(e,t,r)}return Nt(e,t,r)}var jh,bl,kh,_h;jh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};bl=function(){};kh=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ur(ht.current);var a=null;switch(r){case"input":i=Ga(e,i),n=Ga(e,n),a=[];break;case"select":i=te({},i,{value:void 0}),n=te({},n,{value:void 0}),a=[];break;case"textarea":i=Wa(e,i),n=Wa(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ci)}qa(r,n);var l;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Fn.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Fn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Q("scroll",e),a||o===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};_h=function(e,t,r,n){r!==n&&(t.flags|=4)};function wn(e,t){if(!X)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ve(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function _p(e,t,r){var n=t.pendingProps;switch(uo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ve(t),null;case 1:return Le(t.type)&&ui(),ve(t),null;case 3:return n=t.stateNode,en(),J(Pe),J(be),wo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ps(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,et!==null&&(Tl(et),et=null))),bl(e,t),ve(t),null;case 5:vo(t);var i=ur(es.current);if(r=t.type,e!==null&&t.stateNode!=null)kh(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(P(166));return ve(t),null}if(e=ur(ht.current),Ps(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[ct]=t,n[Xn]=a,e=(t.mode&1)!==0,r){case"dialog":Q("cancel",n),Q("close",n);break;case"iframe":case"object":case"embed":Q("load",n);break;case"video":case"audio":for(i=0;i<Cn.length;i++)Q(Cn[i],n);break;case"source":Q("error",n);break;case"img":case"image":case"link":Q("error",n),Q("load",n);break;case"details":Q("toggle",n);break;case"input":Jo(n,a),Q("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Q("invalid",n);break;case"textarea":Zo(n,a),Q("invalid",n)}qa(r,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&Ts(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Ts(n.textContent,o,e),i=["children",""+o]):Fn.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Q("scroll",n)}switch(r){case"input":bs(n),Xo(n,a,!0);break;case"textarea":bs(n),ec(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=ci)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xu(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[ct]=t,e[Xn]=n,jh(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ya(r,n),r){case"dialog":Q("cancel",e),Q("close",e),i=n;break;case"iframe":case"object":case"embed":Q("load",e),i=n;break;case"video":case"audio":for(i=0;i<Cn.length;i++)Q(Cn[i],e);i=n;break;case"source":Q("error",e),i=n;break;case"img":case"image":case"link":Q("error",e),Q("load",e),i=n;break;case"details":Q("toggle",e),i=n;break;case"input":Jo(e,n),i=Ga(e,n),Q("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=te({},n,{value:void 0}),Q("invalid",e);break;case"textarea":Zo(e,n),i=Wa(e,n),Q("invalid",e);break;default:i=n}qa(r,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?td(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Zu(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Gn(e,c):typeof c=="number"&&Gn(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Fn.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Q("scroll",e):c!=null&&Yl(e,a,c,l))}switch(r){case"input":bs(e),Xo(e,n,!1);break;case"textarea":bs(e),ec(e);break;case"option":n.value!=null&&e.setAttribute("value",""+qt(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Hr(e,!!n.multiple,a,!1):n.defaultValue!=null&&Hr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ci)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ve(t),null;case 6:if(e&&t.stateNode!=null)_h(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(P(166));if(r=ur(es.current),ur(ht.current),Ps(t)){if(n=t.stateNode,r=t.memoizedProps,n[ct]=t,(a=n.nodeValue!==r)&&(e=De,e!==null))switch(e.tag){case 3:Ts(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ts(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ct]=t,t.stateNode=n}return ve(t),null;case 13:if(J(Z),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(X&&Ue!==null&&t.mode&1&&!(t.flags&128))Fd(),Xr(),t.flags|=98560,a=!1;else if(a=Ps(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(P(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(P(317));a[ct]=t}else Xr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ve(t),a=!1}else et!==null&&(Tl(et),et=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Z.current&1?oe===0&&(oe=3):Ao())),t.updateQueue!==null&&(t.flags|=4),ve(t),null);case 4:return en(),bl(e,t),e===null&&Qn(t.stateNode.containerInfo),ve(t),null;case 10:return po(t.type._context),ve(t),null;case 17:return Le(t.type)&&ui(),ve(t),null;case 19:if(J(Z),a=t.memoizedState,a===null)return ve(t),null;if(n=(t.flags&128)!==0,l=a.rendering,l===null)if(n)wn(a,!1);else{if(oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=xi(e),l!==null){for(t.flags|=128,wn(a,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Y(Z,Z.current&1|2),t.child}e=e.sibling}a.tail!==null&&ne()>rn&&(t.flags|=128,n=!0,wn(a,!1),t.lanes=4194304)}else{if(!n)if(e=xi(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),wn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!X)return ve(t),null}else 2*ne()-a.renderingStartTime>rn&&r!==1073741824&&(t.flags|=128,n=!0,wn(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(r=a.last,r!==null?r.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ne(),t.sibling=null,r=Z.current,Y(Z,n?r&1|2:r&1),t):(ve(t),null);case 22:case 23:return Lo(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Oe&1073741824&&(ve(t),t.subtreeFlags&6&&(t.flags|=8192)):ve(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function Np(e,t){switch(uo(t),t.tag){case 1:return Le(t.type)&&ui(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return en(),J(Pe),J(be),wo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return vo(t),null;case 13:if(J(Z),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));Xr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return J(Z),null;case 4:return en(),null;case 10:return po(t.type._context),null;case 22:case 23:return Lo(),null;case 24:return null;default:return null}}var Rs=!1,we=!1,Sp=typeof WeakSet=="function"?WeakSet:Set,D=null;function Fr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){re(e,t,n)}else r.current=null}function jl(e,t,r){try{r()}catch(n){re(e,t,n)}}var Gc=!1;function Ep(e,t){if(il=ai,e=Td(),oo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,u=0,h=0,m=e,p=null;t:for(;;){for(var x;m!==r||i!==0&&m.nodeType!==3||(o=l+i),m!==a||n!==0&&m.nodeType!==3||(c=l+n),m.nodeType===3&&(l+=m.nodeValue.length),(x=m.firstChild)!==null;)p=m,m=x;for(;;){if(m===e)break t;if(p===r&&++u===i&&(o=l),p===a&&++h===n&&(c=l),(x=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=x}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(al={focusedElem:e,selectionRange:r},ai=!1,D=t;D!==null;)if(t=D,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,D=e;else for(;D!==null;){t=D;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,b=y.memoizedState,d=t.stateNode,f=d.getSnapshotBeforeUpdate(t.elementType===t.type?w:Je(t.type,w),b);d.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(j){re(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,D=e;break}D=t.return}return y=Gc,Gc=!1,y}function Dn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&jl(t,r,a)}i=i.next}while(i!==n)}}function zi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function kl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Nh(e){var t=e.alternate;t!==null&&(e.alternate=null,Nh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ct],delete t[Xn],delete t[cl],delete t[cp],delete t[up])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sh(e){return e.tag===5||e.tag===3||e.tag===4}function Hc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _l(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ci));else if(n!==4&&(e=e.child,e!==null))for(_l(e,t,r),e=e.sibling;e!==null;)_l(e,t,r),e=e.sibling}function Nl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Nl(e,t,r),e=e.sibling;e!==null;)Nl(e,t,r),e=e.sibling}var me=null,Xe=!1;function Tt(e,t,r){for(r=r.child;r!==null;)Eh(e,t,r),r=r.sibling}function Eh(e,t,r){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(Ai,r)}catch{}switch(r.tag){case 5:we||Fr(r,t);case 6:var n=me,i=Xe;me=null,Tt(e,t,r),me=n,Xe=i,me!==null&&(Xe?(e=me,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):me.removeChild(r.stateNode));break;case 18:me!==null&&(Xe?(e=me,r=r.stateNode,e.nodeType===8?xa(e.parentNode,r):e.nodeType===1&&xa(e,r),Vn(e)):xa(me,r.stateNode));break;case 4:n=me,i=Xe,me=r.stateNode.containerInfo,Xe=!0,Tt(e,t,r),me=n,Xe=i;break;case 0:case 11:case 14:case 15:if(!we&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&jl(r,t,l),i=i.next}while(i!==n)}Tt(e,t,r);break;case 1:if(!we&&(Fr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){re(r,t,o)}Tt(e,t,r);break;case 21:Tt(e,t,r);break;case 22:r.mode&1?(we=(n=we)||r.memoizedState!==null,Tt(e,t,r),we=n):Tt(e,t,r);break;default:Tt(e,t,r)}}function Kc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Sp),t.forEach(function(n){var i=Dp.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Ye(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:me=o.stateNode,Xe=!1;break e;case 3:me=o.stateNode.containerInfo,Xe=!0;break e;case 4:me=o.stateNode.containerInfo,Xe=!0;break e}o=o.return}if(me===null)throw Error(P(160));Eh(a,l,i),me=null,Xe=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){re(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ch(t,e),t=t.sibling}function Ch(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ye(t,e),at(e),n&4){try{Dn(3,e,e.return),zi(3,e)}catch(w){re(e,e.return,w)}try{Dn(5,e,e.return)}catch(w){re(e,e.return,w)}}break;case 1:Ye(t,e),at(e),n&512&&r!==null&&Fr(r,r.return);break;case 5:if(Ye(t,e),at(e),n&512&&r!==null&&Fr(r,r.return),e.flags&32){var i=e.stateNode;try{Gn(i,"")}catch(w){re(e,e.return,w)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,l=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Qu(i,a),Ya(o,l);var u=Ya(o,a);for(l=0;l<c.length;l+=2){var h=c[l],m=c[l+1];h==="style"?td(i,m):h==="dangerouslySetInnerHTML"?Zu(i,m):h==="children"?Gn(i,m):Yl(i,h,m,u)}switch(o){case"input":Ha(i,a);break;case"textarea":Ju(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?Hr(i,!!a.multiple,x,!1):p!==!!a.multiple&&(a.defaultValue!=null?Hr(i,!!a.multiple,a.defaultValue,!0):Hr(i,!!a.multiple,a.multiple?[]:"",!1))}i[Xn]=a}catch(w){re(e,e.return,w)}}break;case 6:if(Ye(t,e),at(e),n&4){if(e.stateNode===null)throw Error(P(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(w){re(e,e.return,w)}}break;case 3:if(Ye(t,e),at(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Vn(t.containerInfo)}catch(w){re(e,e.return,w)}break;case 4:Ye(t,e),at(e);break;case 13:Ye(t,e),at(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(To=ne())),n&4&&Kc(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(we=(u=we)||h,Ye(t,e),we=u):Ye(t,e),at(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(D=e,h=e.child;h!==null;){for(m=D=h;D!==null;){switch(p=D,x=p.child,p.tag){case 0:case 11:case 14:case 15:Dn(4,p,p.return);break;case 1:Fr(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(w){re(n,r,w)}}break;case 5:Fr(p,p.return);break;case 22:if(p.memoizedState!==null){Vc(m);continue}}x!==null?(x.return=p,D=x):Vc(m)}h=h.sibling}e:for(h=null,m=e;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=ed("display",l))}catch(w){re(e,e.return,w)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(w){re(e,e.return,w)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ye(t,e),at(e),n&4&&Kc(e);break;case 21:break;default:Ye(t,e),at(e)}}function at(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Sh(r)){var n=r;break e}r=r.return}throw Error(P(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Gn(i,""),n.flags&=-33);var a=Hc(e);Nl(e,a,i);break;case 3:case 4:var l=n.stateNode.containerInfo,o=Hc(e);_l(e,o,l);break;default:throw Error(P(161))}}catch(c){re(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cp(e,t,r){D=e,Th(e)}function Th(e,t,r){for(var n=(e.mode&1)!==0;D!==null;){var i=D,a=i.child;if(i.tag===22&&n){var l=i.memoizedState!==null||Rs;if(!l){var o=i.alternate,c=o!==null&&o.memoizedState!==null||we;o=Rs;var u=we;if(Rs=l,(we=c)&&!u)for(D=i;D!==null;)l=D,c=l.child,l.tag===22&&l.memoizedState!==null?qc(i):c!==null?(c.return=l,D=c):qc(i);for(;a!==null;)D=a,Th(a),a=a.sibling;D=i,Rs=o,we=u}Wc(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,D=a):Wc(e)}}function Wc(e){for(;D!==null;){var t=D;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:we||zi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!we)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Je(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Pc(t,a,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Pc(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Vn(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}we||t.flags&512&&kl(t)}catch(p){re(t,t.return,p)}}if(t===e){D=null;break}if(r=t.sibling,r!==null){r.return=t.return,D=r;break}D=t.return}}function Vc(e){for(;D!==null;){var t=D;if(t===e){D=null;break}var r=t.sibling;if(r!==null){r.return=t.return,D=r;break}D=t.return}}function qc(e){for(;D!==null;){var t=D;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{zi(4,t)}catch(c){re(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){re(t,i,c)}}var a=t.return;try{kl(t)}catch(c){re(t,a,c)}break;case 5:var l=t.return;try{kl(t)}catch(c){re(t,l,c)}}}catch(c){re(t,t.return,c)}if(t===e){D=null;break}var o=t.sibling;if(o!==null){o.return=t.return,D=o;break}D=t.return}}var Tp=Math.ceil,wi=St.ReactCurrentDispatcher,Eo=St.ReactCurrentOwner,He=St.ReactCurrentBatchConfig,W=0,he=null,se=null,pe=0,Oe=0,Gr=Zt(0),oe=0,ss=null,gr=0,Mi=0,Co=0,In=null,Ee=null,To=0,rn=1/0,gt=null,bi=!1,Sl=null,Kt=null,Os=!1,$t=null,ji=0,Bn=0,El=null,Xs=-1,Zs=0;function _e(){return W&6?ne():Xs!==-1?Xs:Xs=ne()}function Wt(e){return e.mode&1?W&2&&pe!==0?pe&-pe:hp.transition!==null?(Zs===0&&(Zs=fd()),Zs):(e=V,e!==0||(e=window.event,e=e===void 0?16:wd(e.type)),e):1}function nt(e,t,r,n){if(50<Bn)throw Bn=0,El=null,Error(P(185));cs(e,r,n),(!(W&2)||e!==he)&&(e===he&&(!(W&2)&&(Mi|=r),oe===4&&Ut(e,pe)),Ae(e,n),r===1&&W===0&&!(t.mode&1)&&(rn=ne()+500,Ii&&er()))}function Ae(e,t){var r=e.callbackNode;hm(e,t);var n=ii(e,e===he?pe:0);if(n===0)r!==null&&nc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&nc(r),t===1)e.tag===0?dp(Yc.bind(null,e)):$d(Yc.bind(null,e)),lp(function(){!(W&6)&&er()}),r=null;else{switch(md(n)){case 1:r=eo;break;case 4:r=dd;break;case 16:r=si;break;case 536870912:r=hd;break;default:r=si}r=Ih(r,Ph.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ph(e,t){if(Xs=-1,Zs=0,W&6)throw Error(P(327));var r=e.callbackNode;if(Yr()&&e.callbackNode!==r)return null;var n=ii(e,e===he?pe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ki(e,n);else{t=n;var i=W;W|=2;var a=Ah();(he!==e||pe!==t)&&(gt=null,rn=ne()+500,dr(e,t));do try{Ap();break}catch(o){Lh(e,o)}while(!0);mo(),wi.current=a,W=i,se!==null?t=0:(he=null,pe=0,t=oe)}if(t!==0){if(t===2&&(i=el(e),i!==0&&(n=i,t=Cl(e,i))),t===1)throw r=ss,dr(e,0),Ut(e,n),Ae(e,ne()),r;if(t===6)Ut(e,n);else{if(i=e.current.alternate,!(n&30)&&!Pp(i)&&(t=ki(e,n),t===2&&(a=el(e),a!==0&&(n=a,t=Cl(e,a))),t===1))throw r=ss,dr(e,0),Ut(e,n),Ae(e,ne()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(P(345));case 2:ir(e,Ee,gt);break;case 3:if(Ut(e,n),(n&130023424)===n&&(t=To+500-ne(),10<t)){if(ii(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){_e(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ol(ir.bind(null,e,Ee,gt),t);break}ir(e,Ee,gt);break;case 4:if(Ut(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var l=31-rt(n);a=1<<l,l=t[l],l>i&&(i=l),n&=~a}if(n=i,n=ne()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Tp(n/1960))-n,10<n){e.timeoutHandle=ol(ir.bind(null,e,Ee,gt),n);break}ir(e,Ee,gt);break;case 5:ir(e,Ee,gt);break;default:throw Error(P(329))}}}return Ae(e,ne()),e.callbackNode===r?Ph.bind(null,e):null}function Cl(e,t){var r=In;return e.current.memoizedState.isDehydrated&&(dr(e,t).flags|=256),e=ki(e,t),e!==2&&(t=Ee,Ee=r,t!==null&&Tl(t)),e}function Tl(e){Ee===null?Ee=e:Ee.push.apply(Ee,e)}function Pp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!it(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ut(e,t){for(t&=~Co,t&=~Mi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-rt(t),n=1<<r;e[r]=-1,t&=~n}}function Yc(e){if(W&6)throw Error(P(327));Yr();var t=ii(e,0);if(!(t&1))return Ae(e,ne()),null;var r=ki(e,t);if(e.tag!==0&&r===2){var n=el(e);n!==0&&(t=n,r=Cl(e,n))}if(r===1)throw r=ss,dr(e,0),Ut(e,t),Ae(e,ne()),r;if(r===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ir(e,Ee,gt),Ae(e,ne()),null}function Po(e,t){var r=W;W|=1;try{return e(t)}finally{W=r,W===0&&(rn=ne()+500,Ii&&er())}}function xr(e){$t!==null&&$t.tag===0&&!(W&6)&&Yr();var t=W;W|=1;var r=He.transition,n=V;try{if(He.transition=null,V=1,e)return e()}finally{V=n,He.transition=r,W=t,!(W&6)&&er()}}function Lo(){Oe=Gr.current,J(Gr)}function dr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ap(r)),se!==null)for(r=se.return;r!==null;){var n=r;switch(uo(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ui();break;case 3:en(),J(Pe),J(be),wo();break;case 5:vo(n);break;case 4:en();break;case 13:J(Z);break;case 19:J(Z);break;case 10:po(n.type._context);break;case 22:case 23:Lo()}r=r.return}if(he=e,se=e=Vt(e.current,null),pe=Oe=t,oe=0,ss=null,Co=Mi=gr=0,Ee=In=null,cr!==null){for(t=0;t<cr.length;t++)if(r=cr[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var l=a.next;a.next=i,n.next=l}r.pending=n}cr=null}return e}function Lh(e,t){do{var r=se;try{if(mo(),Ys.current=vi,yi){for(var n=ee.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}yi=!1}if(pr=0,de=le=ee=null,Un=!1,ts=0,Eo.current=null,r===null||r.return===null){oe=1,ss=t,se=null;break}e:{var a=e,l=r.return,o=r,c=t;if(t=pe,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=o,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=Dc(l);if(x!==null){x.flags&=-257,Ic(x,l,o,a,t),x.mode&1&&Uc(a,u,t),t=x,c=u;var y=t.updateQueue;if(y===null){var w=new Set;w.add(c),t.updateQueue=w}else y.add(c);break e}else{if(!(t&1)){Uc(a,u,t),Ao();break e}c=Error(P(426))}}else if(X&&o.mode&1){var b=Dc(l);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Ic(b,l,o,a,t),ho(tn(c,o));break e}}a=c=tn(c,o),oe!==4&&(oe=2),In===null?In=[a]:In.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var d=mh(a,c,t);Tc(a,d);break e;case 1:o=c;var f=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Kt===null||!Kt.has(g)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=ph(a,o,t);Tc(a,j);break e}}a=a.return}while(a!==null)}Oh(r)}catch(C){t=C,se===r&&r!==null&&(se=r=r.return);continue}break}while(!0)}function Ah(){var e=wi.current;return wi.current=vi,e===null?vi:e}function Ao(){(oe===0||oe===3||oe===2)&&(oe=4),he===null||!(gr&268435455)&&!(Mi&268435455)||Ut(he,pe)}function ki(e,t){var r=W;W|=2;var n=Ah();(he!==e||pe!==t)&&(gt=null,dr(e,t));do try{Lp();break}catch(i){Lh(e,i)}while(!0);if(mo(),W=r,wi.current=n,se!==null)throw Error(P(261));return he=null,pe=0,oe}function Lp(){for(;se!==null;)Rh(se)}function Ap(){for(;se!==null&&!nm();)Rh(se)}function Rh(e){var t=Dh(e.alternate,e,Oe);e.memoizedProps=e.pendingProps,t===null?Oh(e):se=t,Eo.current=null}function Oh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Np(r,t),r!==null){r.flags&=32767,se=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{oe=6,se=null;return}}else if(r=_p(r,t,Oe),r!==null){se=r;return}if(t=t.sibling,t!==null){se=t;return}se=t=e}while(t!==null);oe===0&&(oe=5)}function ir(e,t,r){var n=V,i=He.transition;try{He.transition=null,V=1,Rp(e,t,r,n)}finally{He.transition=i,V=n}return null}function Rp(e,t,r,n){do Yr();while($t!==null);if(W&6)throw Error(P(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(fm(e,a),e===he&&(se=he=null,pe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Os||(Os=!0,Ih(si,function(){return Yr(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=He.transition,He.transition=null;var l=V;V=1;var o=W;W|=4,Eo.current=null,Ep(e,r),Ch(r,e),Zm(al),ai=!!il,al=il=null,e.current=r,Cp(r),sm(),W=o,V=l,He.transition=a}else e.current=r;if(Os&&(Os=!1,$t=e,ji=i),a=e.pendingLanes,a===0&&(Kt=null),lm(r.stateNode),Ae(e,ne()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(bi)throw bi=!1,e=Sl,Sl=null,e;return ji&1&&e.tag!==0&&Yr(),a=e.pendingLanes,a&1?e===El?Bn++:(Bn=0,El=e):Bn=0,er(),null}function Yr(){if($t!==null){var e=md(ji),t=He.transition,r=V;try{if(He.transition=null,V=16>e?16:e,$t===null)var n=!1;else{if(e=$t,$t=null,ji=0,W&6)throw Error(P(331));var i=W;for(W|=4,D=e.current;D!==null;){var a=D,l=a.child;if(D.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(D=u;D!==null;){var h=D;switch(h.tag){case 0:case 11:case 15:Dn(8,h,a)}var m=h.child;if(m!==null)m.return=h,D=m;else for(;D!==null;){h=D;var p=h.sibling,x=h.return;if(Nh(h),h===u){D=null;break}if(p!==null){p.return=x,D=p;break}D=x}}}var y=a.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}D=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,D=l;else e:for(;D!==null;){if(a=D,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Dn(9,a,a.return)}var d=a.sibling;if(d!==null){d.return=a.return,D=d;break e}D=a.return}}var f=e.current;for(D=f;D!==null;){l=D;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,D=g;else e:for(l=f;D!==null;){if(o=D,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:zi(9,o)}}catch(C){re(o,o.return,C)}if(o===l){D=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,D=j;break e}D=o.return}}if(W=i,er(),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(Ai,e)}catch{}n=!0}return n}finally{V=r,He.transition=t}}return!1}function Qc(e,t,r){t=tn(r,t),t=mh(e,t,1),e=Ht(e,t,1),t=_e(),e!==null&&(cs(e,1,t),Ae(e,t))}function re(e,t,r){if(e.tag===3)Qc(e,e,r);else for(;t!==null;){if(t.tag===3){Qc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Kt===null||!Kt.has(n))){e=tn(r,e),e=ph(t,e,1),t=Ht(t,e,1),e=_e(),t!==null&&(cs(t,1,e),Ae(t,e));break}}t=t.return}}function Op(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=_e(),e.pingedLanes|=e.suspendedLanes&r,he===e&&(pe&r)===r&&(oe===4||oe===3&&(pe&130023424)===pe&&500>ne()-To?dr(e,0):Co|=r),Ae(e,t)}function Uh(e,t){t===0&&(e.mode&1?(t=_s,_s<<=1,!(_s&130023424)&&(_s=4194304)):t=1);var r=_e();e=_t(e,t),e!==null&&(cs(e,t,r),Ae(e,r))}function Up(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Uh(e,r)}function Dp(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(P(314))}n!==null&&n.delete(t),Uh(e,r)}var Dh;Dh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pe.current)Te=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Te=!1,kp(e,t,r);Te=!!(e.flags&131072)}else Te=!1,X&&t.flags&1048576&&zd(t,fi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Js(e,t),e=t.pendingProps;var i=Jr(t,be.current);qr(t,r),i=jo(null,t,n,e,i,r);var a=ko();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Le(n)?(a=!0,di(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xo(t),i.updater=$i,t.stateNode=i,i._reactInternals=t,pl(t,n,e,r),t=yl(null,t,n,!0,a,r)):(t.tag=0,X&&a&&co(t),ke(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Js(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Bp(n),e=Je(n,e),i){case 0:t=xl(null,t,n,e,r);break e;case 1:t=zc(null,t,n,e,r);break e;case 11:t=Bc(null,t,n,e,r);break e;case 14:t=$c(null,t,n,Je(n.type,e),r);break e}throw Error(P(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Je(n,i),xl(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Je(n,i),zc(e,t,n,i,r);case 3:e:{if(vh(t),e===null)throw Error(P(387));n=t.pendingProps,a=t.memoizedState,i=a.element,Wd(e,t),gi(t,n,null,r);var l=t.memoizedState;if(n=l.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=tn(Error(P(423)),t),t=Mc(e,t,n,r,i);break e}else if(n!==i){i=tn(Error(P(424)),t),t=Mc(e,t,n,r,i);break e}else for(Ue=Gt(t.stateNode.containerInfo.firstChild),De=t,X=!0,et=null,r=Hd(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xr(),n===i){t=Nt(e,t,r);break e}ke(e,t,n,r)}t=t.child}return t;case 5:return Vd(t),e===null&&hl(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,l=i.children,ll(n,i)?l=null:a!==null&&ll(n,a)&&(t.flags|=32),yh(e,t),ke(e,t,l,r),t.child;case 6:return e===null&&hl(t),null;case 13:return wh(e,t,r);case 4:return yo(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Zr(t,null,n,r):ke(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Je(n,i),Bc(e,t,n,i,r);case 7:return ke(e,t,t.pendingProps,r),t.child;case 8:return ke(e,t,t.pendingProps.children,r),t.child;case 12:return ke(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value,Y(mi,n._currentValue),n._currentValue=l,a!==null)if(it(a.value,l)){if(a.children===i.children&&!Pe.current){t=Nt(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=bt(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),fl(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(P(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),fl(l,r,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}ke(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,qr(t,r),i=We(i),n=n(i),t.flags|=1,ke(e,t,n,r),t.child;case 14:return n=t.type,i=Je(n,t.pendingProps),i=Je(n.type,i),$c(e,t,n,i,r);case 15:return gh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Je(n,i),Js(e,t),t.tag=1,Le(n)?(e=!0,di(t)):e=!1,qr(t,r),fh(t,n,i),pl(t,n,i,r),yl(null,t,n,!0,e,r);case 19:return bh(e,t,r);case 22:return xh(e,t,r)}throw Error(P(156,t.tag))};function Ih(e,t){return ud(e,t)}function Ip(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ge(e,t,r,n){return new Ip(e,t,r,n)}function Ro(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bp(e){if(typeof e=="function")return Ro(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Jl)return 11;if(e===Xl)return 14}return 2}function Vt(e,t){var r=e.alternate;return r===null?(r=Ge(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ei(e,t,r,n,i,a){var l=2;if(n=e,typeof e=="function")Ro(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Rr:return hr(r.children,i,a,t);case Ql:l=8,i|=8;break;case $a:return e=Ge(12,r,t,i|2),e.elementType=$a,e.lanes=a,e;case za:return e=Ge(13,r,t,i),e.elementType=za,e.lanes=a,e;case Ma:return e=Ge(19,r,t,i),e.elementType=Ma,e.lanes=a,e;case Vu:return Fi(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ku:l=10;break e;case Wu:l=9;break e;case Jl:l=11;break e;case Xl:l=14;break e;case At:l=16,n=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=Ge(l,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function hr(e,t,r,n){return e=Ge(7,e,n,t),e.lanes=r,e}function Fi(e,t,r,n){return e=Ge(22,e,n,t),e.elementType=Vu,e.lanes=r,e.stateNode={isHidden:!1},e}function Na(e,t,r){return e=Ge(6,e,null,t),e.lanes=r,e}function Sa(e,t,r){return t=Ge(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $p(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aa(0),this.expirationTimes=aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aa(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Oo(e,t,r,n,i,a,l,o,c){return e=new $p(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ge(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},xo(a),e}function zp(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ar,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Bh(e){if(!e)return Yt;e=e._reactInternals;e:{if(wr(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Le(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var r=e.type;if(Le(r))return Bd(e,r,t)}return t}function $h(e,t,r,n,i,a,l,o,c){return e=Oo(r,n,!0,e,i,a,l,o,c),e.context=Bh(null),r=e.current,n=_e(),i=Wt(r),a=bt(n,i),a.callback=t??null,Ht(r,a,i),e.current.lanes=i,cs(e,i,n),Ae(e,n),e}function Gi(e,t,r,n){var i=t.current,a=_e(),l=Wt(i);return r=Bh(r),t.context===null?t.context=r:t.pendingContext=r,t=bt(a,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ht(i,t,l),e!==null&&(nt(e,i,l,a),qs(e,i,l)),l}function _i(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Uo(e,t){Jc(e,t),(e=e.alternate)&&Jc(e,t)}function Mp(){return null}var zh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Do(e){this._internalRoot=e}Hi.prototype.render=Do.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));Gi(e,t,null,null)};Hi.prototype.unmount=Do.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xr(function(){Gi(null,e,null,null)}),t[kt]=null}};function Hi(e){this._internalRoot=e}Hi.prototype.unstable_scheduleHydration=function(e){if(e){var t=xd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ot.length&&t!==0&&t<Ot[r].priority;r++);Ot.splice(r,0,e),r===0&&vd(e)}};function Io(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ki(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xc(){}function Fp(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=_i(l);a.call(u)}}var l=$h(t,n,e,0,null,!1,!1,"",Xc);return e._reactRootContainer=l,e[kt]=l.current,Qn(e.nodeType===8?e.parentNode:e),xr(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=_i(c);o.call(u)}}var c=Oo(e,0,!1,null,null,!1,!1,"",Xc);return e._reactRootContainer=c,e[kt]=c.current,Qn(e.nodeType===8?e.parentNode:e),xr(function(){Gi(t,c,r,n)}),c}function Wi(e,t,r,n,i){var a=r._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var o=i;i=function(){var c=_i(l);o.call(c)}}Gi(t,l,e,i)}else l=Fp(r,t,e,i,n);return _i(l)}pd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=En(t.pendingLanes);r!==0&&(to(t,r|1),Ae(t,ne()),!(W&6)&&(rn=ne()+500,er()))}break;case 13:xr(function(){var n=_t(e,1);if(n!==null){var i=_e();nt(n,e,1,i)}}),Uo(e,1)}};ro=function(e){if(e.tag===13){var t=_t(e,134217728);if(t!==null){var r=_e();nt(t,e,134217728,r)}Uo(e,134217728)}};gd=function(e){if(e.tag===13){var t=Wt(e),r=_t(e,t);if(r!==null){var n=_e();nt(r,e,t,n)}Uo(e,t)}};xd=function(){return V};yd=function(e,t){var r=V;try{return V=e,t()}finally{V=r}};Ja=function(e,t,r){switch(t){case"input":if(Ha(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Di(n);if(!i)throw Error(P(90));Yu(n),Ha(n,i)}}}break;case"textarea":Ju(e,r);break;case"select":t=r.value,t!=null&&Hr(e,!!r.multiple,t,!1)}};sd=Po;id=xr;var Gp={usingClientEntryPoint:!1,Events:[ds,Ir,Di,rd,nd,Po]},bn={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hp={bundleType:bn.bundleType,version:bn.version,rendererPackageName:bn.rendererPackageName,rendererConfig:bn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:St.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=od(e),e===null?null:e.stateNode},findFiberByHostInstance:bn.findFiberByHostInstance||Mp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Us=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Us.isDisabled&&Us.supportsFiber)try{Ai=Us.inject(Hp),dt=Us}catch{}}$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gp;$e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Io(t))throw Error(P(200));return zp(e,t,null,r)};$e.createRoot=function(e,t){if(!Io(e))throw Error(P(299));var r=!1,n="",i=zh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Oo(e,1,!1,null,null,r,!1,n,i),e[kt]=t.current,Qn(e.nodeType===8?e.parentNode:e),new Do(t)};$e.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=od(t),e=e===null?null:e.stateNode,e};$e.flushSync=function(e){return xr(e)};$e.hydrate=function(e,t,r){if(!Ki(t))throw Error(P(200));return Wi(null,e,t,!0,r)};$e.hydrateRoot=function(e,t,r){if(!Io(e))throw Error(P(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",l=zh;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=$h(t,null,e,1,r??null,i,!1,a,l),e[kt]=t.current,Qn(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Hi(t)};$e.render=function(e,t,r){if(!Ki(t))throw Error(P(200));return Wi(null,e,t,!1,r)};$e.unmountComponentAtNode=function(e){if(!Ki(e))throw Error(P(40));return e._reactRootContainer?(xr(function(){Wi(null,null,e,!1,function(){e._reactRootContainer=null,e[kt]=null})}),!0):!1};$e.unstable_batchedUpdates=Po;$e.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ki(r))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return Wi(e,t,r,!1,n)};$e.version="18.3.1-next-f1338f8080-20240426";function Mh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mh)}catch(e){console.error(e)}}Mh(),Mu.exports=$e;var Kp=Mu.exports,Fh,Zc=Kp;Fh=Zc.createRoot,Zc.hydrateRoot;const Wp="modulepreload",Vp=function(e){return"/"+e},eu={},tt=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(r.map(c=>{if(c=Vp(c),c in eu)return;eu[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Wp,u||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),u)return new Promise((p,x)=>{m.addEventListener("load",p),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return i.then(l=>{for(const o of l||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$=(e,t)=>{const r=N.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:c,...u},h)=>N.createElement("svg",{ref:h,...qp,width:i,height:i,stroke:n,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${Yp(e)}`,o].join(" "),...u},[...t.map(([m,p])=>N.createElement(m,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=$("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=$("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=$("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=$("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=$("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=$("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=$("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=$("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=$("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=$("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=$("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=$("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=$("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=$("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=$("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=$("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=$("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=$("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=$("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=$("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=$("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=$("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=$("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=$("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=$("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=$("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=$("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=$("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=$("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=$("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=$("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=$("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=$("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=$("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=$("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=$("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=$("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=$("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=$("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=$("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=$("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=$("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=$("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ug=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>tt(async()=>{const{default:n}=await Promise.resolve().then(()=>hn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class $o extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class dg extends $o{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class lu extends $o{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ou extends $o{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Al;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Al||(Al={}));var hg=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(h){try{u(n.next(h))}catch(m){l(m)}}function c(h){try{u(n.throw(h))}catch(m){l(m)}}function u(h){h.done?a(h.value):i(h.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class fg{constructor(t,{headers:r={},customFetch:n,region:i=Al.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=ug(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return hg(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:l}=r;let o={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(o["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let h;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(o["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(o["Content-Type"]="application/json",h=JSON.stringify(l)));const m=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:h}).catch(w=>{throw new dg(w)}),p=m.headers.get("x-relay-error");if(p&&p==="true")throw new lu(m);if(!m.ok)throw new ou(m);let x=((n=m.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return x==="application/json"?y=yield m.json():x==="application/octet-stream"?y=yield m.blob():x==="text/event-stream"?y=m:x==="multipart/form-data"?y=yield m.formData():y=yield m.text(),{data:y,error:null,response:m}}catch(i){return{data:null,error:i,response:i instanceof ou||i instanceof lu?i.context:void 0}}})}}var Ce={},zo={},Yi={},ms={},Qi={},Ji={},mg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},sn=mg();const pg=sn.fetch,Kh=sn.fetch.bind(sn),Wh=sn.Headers,gg=sn.Request,xg=sn.Response,hn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Wh,Request:gg,Response:xg,default:Kh,fetch:pg},Symbol.toStringTag,{value:"Module"})),yg=yf(hn);var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});let vg=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Xi.default=vg;var Vh=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ji,"__esModule",{value:!0});const wg=Vh(yg),bg=Vh(Xi);let jg=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=wg.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,o,c,u;let h=null,m=null,p=null,x=a.status,y=a.statusText;if(a.ok){if(this.method!=="HEAD"){const f=await a.text();f===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?m=f:m=JSON.parse(f))}const b=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),d=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&d&&d.length>1&&(p=parseInt(d[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(h={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,p=null,x=406,y="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const b=await a.text();try{h=JSON.parse(b),Array.isArray(h)&&a.status===404&&(m=[],h=null,x=200,y="OK")}catch{a.status===404&&b===""?(x=204,y="No Content"):h={message:b}}if(h&&this.isMaybeSingle&&(!((u=h==null?void 0:h.details)===null||u===void 0)&&u.includes("0 rows"))&&(h=null,x=200,y="OK"),h&&this.shouldThrowOnError)throw new bg.default(h)}return{error:h,data:m,count:p,status:x,statusText:y}});return this.shouldThrowOnError||(i=i.catch(a=>{var l,o,c;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,r)}returns(){return this}overrideTypes(){return this}};Ji.default=jg;var kg=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qi,"__esModule",{value:!0});const _g=kg(Ji);let Ng=class extends _g.default{select(t){let r=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:l="text"}={}){var o;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${u}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Qi.default=Ng;var Sg=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ms,"__esModule",{value:!0});const Eg=Sg(Qi);let Cg=class extends Eg.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};ms.default=Cg;var Tg=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yi,"__esModule",{value:!0});const jn=Tg(ms);let Pg=class{constructor(t,{headers:r={},schema:n,fetch:i}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=i}select(t,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let a=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",l),n&&this.headers.append("Prefer",`count=${n}`),new jn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var i;const a="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new jn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new jn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:r}={}){var n;const i="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new jn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new jn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Yi.default=Pg;var qh=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zo,"__esModule",{value:!0});const Lg=qh(Yi),Ag=qh(ms);let Rg=class Yh{constructor(t,{headers:r={},schema:n,fetch:i}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(t){const r=new URL(`${this.url}/${t}`);return new Lg.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Yh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:i=!1,count:a}={}){var l;let o;const c=new URL(`${this.url}/rpc/${t}`);let u;n||i?(o=n?"HEAD":"GET",Object.entries(r).filter(([m,p])=>p!==void 0).map(([m,p])=>[m,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([m,p])=>{c.searchParams.append(m,p)})):(o="POST",u=r);const h=new Headers(this.headers);return a&&h.set("Prefer",`count=${a}`),new Ag.default({method:o,url:c,headers:h,schema:this.schemaName,body:u,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};zo.default=Rg;var fn=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.PostgrestError=Ce.PostgrestBuilder=Ce.PostgrestTransformBuilder=Ce.PostgrestFilterBuilder=Ce.PostgrestQueryBuilder=Ce.PostgrestClient=void 0;const Qh=fn(zo);Ce.PostgrestClient=Qh.default;const Jh=fn(Yi);Ce.PostgrestQueryBuilder=Jh.default;const Xh=fn(ms);Ce.PostgrestFilterBuilder=Xh.default;const Zh=fn(Qi);Ce.PostgrestTransformBuilder=Zh.default;const ef=fn(Ji);Ce.PostgrestBuilder=ef.default;const tf=fn(Xi);Ce.PostgrestError=tf.default;var Og=Ce.default={PostgrestClient:Qh.default,PostgrestQueryBuilder:Jh.default,PostgrestFilterBuilder:Xh.default,PostgrestTransformBuilder:Zh.default,PostgrestBuilder:ef.default,PostgrestError:tf.default};const{PostgrestClient:Ug,PostgrestQueryBuilder:iy,PostgrestFilterBuilder:ay,PostgrestTransformBuilder:ly,PostgrestBuilder:oy,PostgrestError:cy}=Og;class Dg{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Ig="2.15.5",Bg=`realtime-js/${Ig}`,$g="1.0.0",Rl=1e4,zg=1e3,Mg=100;var $n;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})($n||($n={}));var ie;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ie||(ie={}));var Ze;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ze||(Ze={}));var Ol;(function(e){e.websocket="websocket"})(Ol||(Ol={}));var lr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(lr||(lr={}));class Fg{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(t.slice(l,l+i));l=l+i;const c=n.decode(t.slice(l,l+a));l=l+a;const u=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class rf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var q;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(q||(q={}));const cu=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,l)=>(a[l]=Gg(l,e,t,i),a),{})},Gg=(e,t,r,n)=>{const i=t.find(o=>o.name===e),a=i==null?void 0:i.type,l=r[e];return a&&!n.includes(a)?nf(a,l):Ul(l)},nf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Vg(t,r)}switch(e){case q.bool:return Hg(t);case q.float4:case q.float8:case q.int2:case q.int4:case q.int8:case q.numeric:case q.oid:return Kg(t);case q.json:case q.jsonb:return Wg(t);case q.timestamp:return qg(t);case q.abstime:case q.date:case q.daterange:case q.int4range:case q.int8range:case q.money:case q.reltime:case q.text:case q.time:case q.timestamptz:case q.timetz:case q.tsrange:case q.tstzrange:return Ul(t);default:return Ul(t)}},Ul=e=>e,Hg=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Kg=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Wg=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Vg=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const l=e.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(o=>nf(t,o))}return e},qg=e=>typeof e=="string"?e.replace(" ","T"):e,sf=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Ea{constructor(t,r,n={},i=Rl){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var uu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(uu||(uu={}));class zn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zn.syncState(this.state,i,a,l),this.pendingDiffs.forEach(c=>{this.state=zn.syncDiff(this.state,c,a,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=zn.syncDiff(this.state,i,a,l),o())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),l=this.transformState(r),o={},c={};return this.map(a,(u,h)=>{l[u]||(c[u]=h)}),this.map(l,(u,h)=>{const m=a[u];if(m){const p=h.map(b=>b.presence_ref),x=m.map(b=>b.presence_ref),y=h.filter(b=>x.indexOf(b.presence_ref)<0),w=m.filter(b=>p.indexOf(b.presence_ref)<0);y.length>0&&(o[u]=y),w.length>0&&(c[u]=w)}else o[u]=h}),this.syncDiff(a,{joins:o,leaves:c},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(o,c)=>{var u;const h=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),h.length>0){const m=t[o].map(x=>x.presence_ref),p=h.filter(x=>m.indexOf(x.presence_ref)<0);t[o].unshift(...p)}n(o,h,c)}),this.map(l,(o,c)=>{let u=t[o];if(!u)return;const h=c.map(m=>m.presence_ref);u=u.filter(m=>h.indexOf(m.presence_ref)<0),t[o]=u,i(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var du;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(du||(du={}));var Mn;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Mn||(Mn={}));var xt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(xt||(xt={}));class Mo{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ea(this,Ze.join,this.params,this.timeout),this.rejoinTimer=new rf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ie.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ze.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new zn(this),this.broadcastEndpointURL=sf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ie.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Mn.PRESENCE]&&this.bindings[Mn.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},p={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(xt.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(xt.CLOSED)),this.updateJoinPayload(Object.assign({config:p},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var y;if(this.socket.setAuth(),x===void 0){t==null||t(xt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,b=(y=w==null?void 0:w.length)!==null&&y!==void 0?y:0,d=[];for(let f=0;f<b;f++){const g=w[f],{filter:{event:j,schema:C,table:T,filter:E}}=g,A=x&&x[f];if(A&&A.event===j&&A.schema===C&&A.table===T&&A.filter===E)d.push(Object.assign(Object.assign({},g),{id:A.id}));else{this.unsubscribe(),this.state=ie.errored,t==null||t(xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=d,t&&t(xt.SUBSCRIBED);return}}).receive("error",x=>{this.state=ie.errored,t==null||t(xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ie.joined&&t===Mn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ie.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ze.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Ea(this,Ze.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ie.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ea(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Mg){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:h}=Ze;if(n&&[o,c,u,h].indexOf(l)>=0&&n!==this._joinRef())return;let p=this._onMessage(l,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var y,w,b;return((y=x.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(w=x.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===l}).map(x=>x.callback(p,n)):(a=this.bindings[l])===null||a===void 0||a.filter(x=>{var y,w,b,d,f,g;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const j=x.id,C=(y=x.filter)===null||y===void 0?void 0:y.event;return j&&((w=r.ids)===null||w===void 0?void 0:w.includes(j))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(f=(d=x==null?void 0:x.filter)===null||d===void 0?void 0:d.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return j==="*"||j===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:w,table:b,commit_timestamp:d,type:f,errors:g}=y;p=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:d,eventType:f,new:{},old:{},errors:g}),this._getPayloadRecords(y))}x.callback(p,n)})}_isClosed(){return this.state===ie.closed}_isJoined(){return this.state===ie.joined}_isJoining(){return this.state===ie.joining}_isLeaving(){return this.state===ie.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Mo.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ze.close,{},t)}_onError(t){this._on(Ze.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ie.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=cu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=cu(t.columns,t.old_record)),r}}const Ca=()=>{},Is={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Yg=[1e3,2e3,5e3,1e4],Qg=1e4,Jg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Xg{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Rl,this.transport=null,this.heartbeatIntervalMs=Is.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ca,this.ref=0,this.reconnectTimer=null,this.logger=Ca,this.conn=null,this.sendBuffer=[],this.serializer=new Fg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>tt(async()=>{const{default:o}=await Promise.resolve().then(()=>hn);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Ol.websocket}`,this.httpEndpoint=sf(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Dg.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$g}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case $n.connecting:return lr.Connecting;case $n.open:return lr.Open;case $n.closing:return lr.Closing;default:return lr.Closed}}isConnected(){return this.connectionState()===lr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Mo(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(zg,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Is.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:l}=r,o=l?`(${l})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${i} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,a,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ze.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Jg],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:Bg};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Ze.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new rf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Is.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,a,l,o,c,u,h;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Rl,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Is.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:Ca,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:m=>Yg[m-1]||Qg,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(m,p)=>p(JSON.stringify(m)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Fo extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ae(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Zg extends Fo{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Dl extends Fo{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var e0=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(h){try{u(n.next(h))}catch(m){l(m)}}function c(h){try{u(n.throw(h))}catch(m){l(m)}}function u(h){h.done?a(h.value):i(h.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const af=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>tt(async()=>{const{default:n}=await Promise.resolve().then(()=>hn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},t0=()=>e0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield tt(()=>Promise.resolve().then(()=>hn),void 0)).Response:Response}),Il=e=>{if(Array.isArray(e))return e.map(r=>Il(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=Il(n)}),t},r0=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var br=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(h){try{u(n.next(h))}catch(m){l(m)}}function c(h){try{u(n.throw(h))}catch(m){l(m)}}function u(h){h.done?a(h.value):i(h.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const Ta=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),n0=(e,t,r)=>br(void 0,void 0,void 0,function*(){const n=yield t0();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(i=>{const a=e.status||500,l=(i==null?void 0:i.statusCode)||a+"";t(new Zg(Ta(i),a,l))}).catch(i=>{t(new Dl(Ta(i),i))}):t(new Dl(Ta(e),e))}),s0=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?i:(r0(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function ps(e,t,r,n,i,a){return br(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,s0(t,n,i,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>n0(c,o,n))})})}function Ci(e,t,r,n){return br(this,void 0,void 0,function*(){return ps(e,"GET",t,r,n)})}function ot(e,t,r,n,i){return br(this,void 0,void 0,function*(){return ps(e,"POST",t,n,i,r)})}function Bl(e,t,r,n,i){return br(this,void 0,void 0,function*(){return ps(e,"PUT",t,n,i,r)})}function i0(e,t,r,n){return br(this,void 0,void 0,function*(){return ps(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function lf(e,t,r,n,i){return br(this,void 0,void 0,function*(){return ps(e,"DELETE",t,n,i,r)})}var je=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(h){try{u(n.next(h))}catch(m){l(m)}}function c(h){try{u(n.throw(h))}catch(m){l(m)}}function u(h){h.done?a(h.value):i(h.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const a0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class l0{constructor(t,r={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=af(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,i){return je(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},hu),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),m=yield(t=="PUT"?Bl:ot)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:u,id:m.Id,fullPath:m.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ae(a))return{data:null,error:a};throw a}})}upload(t,r,n){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return je(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),l=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:hu.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const m=yield Bl(this.fetch,o.toString(),c,{headers:h});return{data:{path:a,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ae(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return je(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield ot(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),l=new URL(this.url+a.url),o=l.searchParams.get("token");if(!o)throw new Fo("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}})}update(t,r,n){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return je(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ae(i))return{data:null,error:i};throw i}})}copy(t,r,n){return je(this,void 0,void 0,function*(){try{return{data:{path:(yield ot(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ae(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return je(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield ot(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ae(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return je(this,void 0,void 0,function*(){try{const i=yield ot(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ae(i))return{data:null,error:i};throw i}})}download(t,r){return je(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield Ci(this.fetch,`${this.url}/${i}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ae(o))return{data:null,error:o};throw o}})}info(t){return je(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Ci(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Il(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}})}exists(t){return je(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield i0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ae(n)&&n instanceof Dl){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(t){return je(this,void 0,void 0,function*(){try{return{data:yield lf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}})}list(t,r,n){return je(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},a0),r),{prefix:t||""});return{data:yield ot(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ae(i))return{data:null,error:i};throw i}})}listV2(t,r){return je(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ot(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const o0="2.12.1",c0={"X-Client-Info":`storage-js/${o0}`};var _r=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(h){try{u(n.next(h))}catch(m){l(m)}}function c(h){try{u(n.throw(h))}catch(m){l(m)}}function u(h){h.done?a(h.value):i(h.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class u0{constructor(t,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},c0),r),this.fetch=af(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return _r(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ae(t))return{data:null,error:t};throw t}})}getBucket(t){return _r(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return _r(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return _r(this,void 0,void 0,function*(){try{return{data:yield Bl(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}})}emptyBucket(t){return _r(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}})}deleteBucket(t){return _r(this,void 0,void 0,function*(){try{return{data:yield lf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}})}}class d0 extends u0{constructor(t,r={},n,i){super(t,r,n,i)}from(t){return new l0(this.url,this.headers,t,this.fetch)}}const h0="2.57.4";let Tn="";typeof Deno<"u"?Tn="deno":typeof document<"u"?Tn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Tn="react-native":Tn="node";const f0={"X-Client-Info":`supabase-js-${Tn}/${h0}`},m0={headers:f0},p0={schema:"public"},g0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},x0={};var y0=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(h){try{u(n.next(h))}catch(m){l(m)}}function c(h){try{u(n.throw(h))}catch(m){l(m)}}function u(h){h.done?a(h.value):i(h.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const v0=e=>{let t;return e?t=e:typeof fetch>"u"?t=Kh:t=fetch,(...r)=>t(...r)},w0=()=>typeof Headers>"u"?Wh:Headers,b0=(e,t,r)=>{const n=v0(r),i=w0();return(a,l)=>y0(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let u=new i(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},l),{headers:u}))})};var j0=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(h){try{u(n.next(h))}catch(m){l(m)}}function c(h){try{u(n.throw(h))}catch(m){l(m)}}function u(h){h.done?a(h.value):i(h.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};function k0(e){return e.endsWith("/")?e:e+"/"}function _0(e,t){var r,n;const{db:i,auth:a,realtime:l,global:o}=e,{db:c,auth:u,realtime:h,global:m}=t,p={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},h),l),storage:{},global:Object.assign(Object.assign(Object.assign({},m),o),{headers:Object.assign(Object.assign({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>j0(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function N0(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(k0(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const of="2.71.1",Tr=30*1e3,$l=3,Pa=$l*Tr,S0="http://localhost:9999",E0="supabase.auth.token",C0={"X-Client-Info":`gotrue-js/${of}`},zl="X-Supabase-Api-Version",cf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},T0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,P0=10*60*1e3;class Go extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function z(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class L0 extends Go{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function A0(e){return z(e)&&e.name==="AuthApiError"}class uf extends Go{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class tr extends Go{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class Lt extends tr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function R0(e){return z(e)&&e.name==="AuthSessionMissingError"}class Bs extends tr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $s extends tr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class zs extends tr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function O0(e){return z(e)&&e.name==="AuthImplicitGrantRedirectError"}class fu extends tr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ml extends tr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function La(e){return z(e)&&e.name==="AuthRetryableFetchError"}class mu extends tr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Fl extends tr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ti="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pu=` 	
\r=`.split(""),U0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<pu.length;t+=1)e[pu[t].charCodeAt(0)]=-2;for(let t=0;t<Ti.length;t+=1)e[Ti[t].charCodeAt(0)]=t;return e})();function gu(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ti[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ti[n]),t.queuedBits-=6}}function df(e,t,r){const n=U0[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function xu(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{B0(l,n,r)};for(let l=0;l<e.length;l+=1)df(e.charCodeAt(l),i,a);return t.join("")}function D0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function I0(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}D0(n,t)}}function B0(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function $0(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)df(e.charCodeAt(i),r,n);return new Uint8Array(t)}function z0(e){const t=[];return I0(e,r=>t.push(r)),new Uint8Array(t)}function M0(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>gu(i,r,n)),gu(null,r,n),t.join("")}function F0(e){return Math.round(Date.now()/1e3)+e}function G0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Qe=()=>typeof window<"u"&&typeof document<"u",rr={tested:!1,writable:!1},hf=()=>{if(!Qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rr.tested)return rr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),rr.tested=!0,rr.writable=!0}catch{rr.tested=!0,rr.writable=!1}return rr.writable};function H0(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const ff=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>tt(async()=>{const{default:n}=await Promise.resolve().then(()=>hn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},K0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Pr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},nr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Pt=async(e,t)=>{await e.removeItem(t)};class Zi{constructor(){this.promise=new Zi.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Zi.promiseConstructor=Promise;function Aa(e){const t=e.split(".");if(t.length!==3)throw new Fl("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!T0.test(t[n]))throw new Fl("JWT not in base64url format");return{header:JSON.parse(xu(t[0])),payload:JSON.parse(xu(t[1])),signature:$0(t[2]),raw:{header:t[0],payload:t[1]}}}async function W0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function V0(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){n(l);return}}catch(l){if(!t(a,l)){i(l);return}}})()})}function q0(e){return("0"+e.toString(16)).substr(-2)}function Y0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,q0).join("")}async function Q0(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function J0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Q0(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nr(e,t,r=!1){const n=Y0();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Pr(e,`${t}-code-verifier`,i);const a=await J0(n);return[a,n===a?"plain":"s256"]}const X0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Z0(e){const t=e.headers.get(zl);if(!t||!t.match(X0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ex(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function tx(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const rx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sr(e){if(!rx.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ra(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yu(e){return JSON.parse(JSON.stringify(e))}var nx=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const ar=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),sx=[502,503,504];async function vu(e){var t;if(!K0(e))throw new Ml(ar(e),0);if(sx.includes(e.status))throw new Ml(ar(e),e.status);let r;try{r=await e.json()}catch(a){throw new uf(ar(a),a)}let n;const i=Z0(e);if(i&&i.getTime()>=cf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new mu(ar(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Lt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new mu(ar(r),e.status,r.weak_password.reasons);throw new L0(ar(r),e.status||500,n)}const ix=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function G(e,t,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[zl]||(a[zl]=cf["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await ax(e,t,r+o,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function ax(e,t,r,n,i,a){const l=ix(t,n,i,a);let o;try{o=await e(r,Object.assign({},l))}catch(c){throw console.error(c),new Ml(ar(c),0)}if(o.ok||await vu(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await vu(c)}}function pt(e){var t;let r=null;ux(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=F0(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function wu(e){const t=pt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Dt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function lx(e){return{data:e,error:null}}function ox(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,l=nx(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function cx(e){return e}function ux(e){return e.access_token&&e.refresh_token&&e.expires_in}const Oa=["global","local","others"];var dx=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};class hx{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=ff(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Oa[0]){if(Oa.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Oa.join(", ")}`);try{return await G(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await G(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Dt})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=dx(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await G(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ox,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(z(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await G(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Dt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},h=await G(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:cx});if(h.error)throw h.error;const m=await h.json(),p=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(c=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=w}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(z(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Sr(t);try{return await G(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Dt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Sr(t);try{return await G(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Dt})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Sr(t);try{return await G(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Dt})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Sr(t.userId);try{const{data:r,error:n}=await G(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(z(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Sr(t.userId),Sr(t.id);try{return{data:await G(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}}function bu(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function fx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Er={debug:!!(globalThis&&hf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class mx extends mf{}async function px(e,t,r){Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Er.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new mx(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Er.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}fx();const gx={url:S0,storageKey:E0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:C0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ju(e,t,r){return await r()}const Cr={};class ls{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ls.nextInstanceID,ls.nextInstanceID+=1,this.instanceID>0&&Qe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},gx),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new hx({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ff(i.fetch),this.lock=i.lock||ju,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Qe()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=px:this.lock=ju,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:hf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=bu(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=bu(this.memoryStorage)),Qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Cr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Cr[this.storageKey]=Object.assign(Object.assign({},Cr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Cr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Cr[this.storageKey]=Object.assign(Object.assign({},Cr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${of}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=H0(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Qe()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),O0(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return z(r)?{error:r}:{error:new uf("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:pt}),{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(z(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:h,password:m,options:p}=t;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await Nr(this.storage,this.storageKey)),a=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:m,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:x,code_challenge_method:y},xform:pt})}else if("phone"in t){const{phone:h,password:m,options:p}=t;a=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:m,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:pt})}else throw new $s("You must provide either an email or phone number and a password");const{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(z(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:l,options:o}=t;r=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:wu})}else if("phone"in t){const{phone:a,password:l,options:o}=t;r=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:wu})}else throw new $s("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Bs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,i,a,l,o,c,u,h,m,p,x;let y,w;if("message"in t)y=t.message,w=t.signature;else{const{chain:b,wallet:d,statement:f,options:g}=t;let j;if(Qe())if(typeof d=="object")j=d;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))j=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof d!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=d}const C=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const T=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),f?{statement:f}:null));let E;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")E=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)E=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)y=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),w=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${C.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(i=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((m=(h=g==null?void 0:g.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||m===void 0)&&m.length?["Resources",...g.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const T=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=T}}try{const{data:b,error:d}=await G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:M0(w)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:pt});if(d)throw d;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Bs}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:d})}catch(b){if(z(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await nr(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:l}=await G(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:pt});if(await Pt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Bs}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(z(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:l}=t,o=await G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:pt}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Bs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,i,a,l;try{if("email"in t){const{email:o,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Nr(this.storage,this.storageKey));const{error:m}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:h}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new $s("You must provide either an email or phone number.")}catch(o){if(z(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await G(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:pt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,u=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var r,n,i;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Nr(this.storage,this.storageKey)),await G(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:lx})}catch(a){if(z(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Lt;const{error:i}=await G(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(z(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:l}=await G(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:l,error:o}=await G(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new $s("You must provide either an email or phone number and a type")}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await nr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Pa:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await nr(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Ra()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,h)=>(!l&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,h))})}return{data:{session:t},error:null}}const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Dt}):await this._useSession(async r=>{var n,i,a;const{data:l,error:o}=r;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lt}:await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Dt})})}catch(r){if(z(r))return R0(r)&&(await this._removeSession(),await Pt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Lt;const l=i.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Nr(this.storage,this.storageKey));const{data:u,error:h}=await G(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Dt});if(h)throw h;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Lt;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:l}=Aa(t.access_token);if(l.exp&&(n=l.exp,i=n<=r),i){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(z(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Lt;const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Qe())throw new zs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new zs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new fu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new fu("No code detected.");const{data:f,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:o,expires_at:c,token_type:u}=t;if(!a||!o||!l||!u)throw new zs("No session defined in URL");const h=Math.round(Date.now()/1e3),m=parseInt(o);let p=h+m;c&&(p=parseInt(c));const x=p-h;x*1e3<=Tr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${m}s`);const y=p-m;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,h);const{data:w,error:b}=await this._getUser(a);if(b)throw b;const d={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:p,refresh_token:l,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:d,redirectType:t.type},error:null}}catch(n){if(z(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await nr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const l=(n=i.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(A0(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await Pt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=G0(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Nr(this.storage,this.storageKey,!0));try{return await G(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(z(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var l,o,c,u,h;const{data:m,error:p}=a;if(p)throw p;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await G(this.fetch,"GET",x,{headers:this.headers,jwt:(h=(u=m.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Qe()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(z(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:l}=r;if(l)throw l;return await G(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await V0(async i=>(i>0&&await W0(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await G(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:pt})),(i,a)=>{const l=200*Math.pow(2,i);return a&&La(a)&&Date.now()+l-n<Tr})}catch(n){if(this._debug(r,"error",n),z(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Qe()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await nr(this.storage,this.storageKey);if(i&&this.userStorage){let l=await nr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Pr(this.userStorage,this.storageKey+"-user",l)),i.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Ra()}else if(i&&!i.user&&!i.user){const l=await nr(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await Pt(this.storage,this.storageKey+"-user"),await Pr(this.storage,this.storageKey,i)):i.user=Ra()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Pa;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Pa}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),La(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(i.access_token);!o&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Lt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Zi;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new Lt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),z(a)){const l={session:null,error:a};return La(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(l),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Pr(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=yu(i);await Pr(this.storage,this.storageKey,a)}else{const i=yu(r);await Pr(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Pt(this.storage,this.storageKey),await Pt(this.storage,this.storageKey+"-code-verifier"),await Pt(this.storage,this.storageKey+"-user"),this.userStorage&&await Pt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Qe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Tr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/Tr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Tr}ms, refresh threshold is ${$l} ticks`),i<=$l&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof mf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await Nr(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await G(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await G(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const{data:l,error:o}=await G(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(z(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await G(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(z(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],i=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Aa(i.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const h=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+P0>i)return n;const{data:a,error:l}=await G(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:y}=await this.getSession();if(y||!x.session)return{data:null,error:y};n=x.session.access_token}const{header:i,payload:a,signature:l,raw:{header:o,payload:c}}=Aa(n);r!=null&&r.allowExpired||ex(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:a,header:i,signature:l},error:null}}const h=tx(i.alg),m=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,m,l,z0(`${o}.${c}`)))throw new Fl("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}}ls.nextInstanceID=0;const xx=ls;class yx extends xx{constructor(t){super(t)}}var vx=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(h){try{u(n.next(h))}catch(m){l(m)}}function c(h){try{u(n.throw(h))}catch(m){l(m)}}function u(h){h.done?a(h.value):i(h.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class wx{constructor(t,r,n){var i,a,l;this.supabaseUrl=t,this.supabaseKey=r;const o=N0(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:p0,realtime:x0,auth:Object.assign(Object.assign({},g0),{storageKey:c}),global:m0},h=_0(n??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=b0(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Ug(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new d0(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new fg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return vx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:l,flowType:o,lock:c,debug:u},h,m){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yx({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),h),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:o,lock:c,debug:u,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Xg(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const bx=(e,t,r)=>new wx(e,t,r);function jx(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}jx()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const an="https://qoqvsrmlnwwvsxbaupfj.supabase.co",Ho="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFvcXZzcm1sbnd3dnN4YmF1cGZqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwODkwNzMsImV4cCI6MjA3MDY2NTA3M30.hgXwg3ZlGdcODphgIm9fVxfbM-BwdcR5bd4wphftxw0";console.log("Supabase config:",{url:"Set",key:"Set",urlValue:an.substring(0,20)+"..."});const Pi=e=>["YOUR_SUPABASE_URL","YOUR_SUPABASE_ANON_KEY","your-project-url","your-anon-key"].includes(e),kx=e=>{try{return new URL(e),e.includes("supabase.co")||e.includes("localhost")}catch{return!1}};if(Pi(an)||Pi(Ho))throw console.error("Missing Supabase environment variables:",{VITE_SUPABASE_URL:an,VITE_SUPABASE_ANON_KEY:"Present"}),new Error("Supabase yapılandırması eksik veya geçersiz. Lütfen .env dosyasında gerçek Supabase URL ve anahtarınızı girin.");const U=bx(an,Ho,{auth:{persistSession:!0,autoRefreshToken:!0}}),_x=()=>!Pi(an)&&!Pi(Ho)&&kx(an),pf=N.createContext(void 0),ea=()=>{const e=N.useContext(pf);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},Nx=({children:e})=>{const[t,r]=N.useState(null),[n,i]=N.useState(null),[a,l]=N.useState(!0),[o,c]=N.useState(null);N.useEffect(()=>{(async()=>{try{const y=()=>{var d,f;localStorage.removeItem("sb-"+((d="https://qoqvsrmlnwwvsxbaupfj.supabase.co".split("//")[1])==null?void 0:d.split(".")[0])+"-auth-token"),sessionStorage.removeItem("sb-"+((f="https://qoqvsrmlnwwvsxbaupfj.supabase.co".split("//")[1])==null?void 0:f.split(".")[0])+"-auth-token")},{data:{session:w},error:b}=await U.auth.getSession();if(b)if(console.error("Auth session error:",b),b.message.includes("refresh_token_not_found")||b.message.includes("Invalid Refresh Token")){y();const{data:{session:d},error:f}=await U.auth.getSession();f?(console.error("Auth retry error:",f),c("Kimlik doğrulama hatası: "+f.message)):(i(d),r((d==null?void 0:d.user)??null))}else c("Kimlik doğrulama hatası: "+b.message);else i(w),r((w==null?void 0:w.user)??null)}catch(y){console.error("Auth initialization error:",y),c("Kimlik doğrulama başlatılamadı")}finally{l(!1)}})();const{data:{subscription:x}}=U.auth.onAuthStateChange((y,w)=>{i(w),r((w==null?void 0:w.user)??null),l(!1),c(null)});return()=>x.unsubscribe()},[]);const u=async(p,x)=>{try{if(!_x())return{error:{message:"Supabase yapılandırması eksik. Lütfen .env dosyasını kontrol edin."}};const{error:y}=await U.auth.signInWithPassword({email:p,password:x});if(y){if(y.message.includes("fetch")||y.message.includes("Failed to fetch"))return{error:{message:"Supabase sunucusuna bağlanılamıyor. Lütfen .env dosyasındaki VITE_SUPABASE_URL ve VITE_SUPABASE_ANON_KEY değerlerini kontrol edin."}};if(y.message.includes("Invalid login credentials"))return{error:{message:"Geçersiz e-posta veya şifre."}}}return{error:y}}catch(y){return console.error("Sign in error:",y),y instanceof Error&&(y.message.includes("fetch")||y.message.includes("Failed to fetch"))?{error:{message:`Ağ bağlantısı hatası. Supabase URL ve anahtarınızı kontrol edin:

1. .env dosyasında VITE_SUPABASE_URL=https://your-project.supabase.co
2. .env dosyasında VITE_SUPABASE_ANON_KEY=your-anon-key

Bu bilgileri Supabase Dashboard > Settings > API bölümünden alabilirsiniz.`}}:{error:{message:"Giriş yapılırken bir hata oluştu: "+(y instanceof Error?y.message:"Bilinmeyen hata")}}}},h=async()=>{try{await U.auth.signOut()}catch(p){console.error("Sign out error:",p)}};if(o)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 mb-4",children:s.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Bağlantı Hatası"}),s.jsx("p",{className:"text-gray-600 mb-4",children:o}),s.jsx("button",{onClick:()=>{c(null),window.location.reload()},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Tekrar Dene"})]})})});const m={user:t,session:n,loading:a,signIn:u,signOut:h};return s.jsx(pf.Provider,{value:m,children:e})},Sx=()=>{const[e,t]=N.useState(""),[r,n]=N.useState(""),[i,a]=N.useState(!1),[l,o]=N.useState(!1),[c,u]=N.useState(null),{signIn:h}=ea(),m=async p=>{p.preventDefault(),o(!0),u(null);try{const{error:x}=await h(e,r);x&&(x.message.includes("Supabase")||x.message.includes("sunucu")?u(x.message):u("Giriş başarısız. E-posta ve şifrenizi kontrol edin."))}catch{u("Bir hata oluştu. Lütfen tekrar deneyin.")}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx(Qt,{className:"h-12 w-12 text-blue-600"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dil Kursu Öğrenci Takip"}),s.jsx("p",{className:"text-gray-600",children:"Hesabınıza giriş yapın"})]}),s.jsxs("div",{className:"bg-white shadow-xl rounded-lg p-8",children:[s.jsxs("form",{onSubmit:m,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),s.jsxs("div",{className:"relative",children:[s.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"email",required:!0,value:e,onChange:p=>t(p.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"ornek@email.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre"}),s.jsxs("div",{className:"relative",children:[s.jsx(rg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:i?"text":"password",required:!0,value:r,onChange:p=>n(p.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"••••••••",minLength:6}),s.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?s.jsx(Zp,{className:"h-5 w-5"}):s.jsx(eg,{className:"h-5 w-5"})})]})]}),c&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800 mb-1",children:"Bağlantı Hatası"}),s.jsx("div",{className:"text-red-700 text-sm whitespace-pre-line",children:c})]})]})}),s.jsx("button",{type:"submit",disabled:l,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),s.jsx("span",{children:"İşleniyor..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Be,{className:"h-5 w-5"}),s.jsx("span",{children:"Giriş Yap"})]})})]}),s.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Supabase Bağlantısı Aktif"}),s.jsx("p",{className:"text-blue-700 text-sm",children:"Uygulama gerçek Supabase veritabanına bağlı. Supabase'e kayıtlı kullanıcı bilgilerinizle giriş yapın."})]})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx("p",{className:"text-gray-500 text-sm",children:"Verileriniz Supabase veritabanında güvenle saklanır"})})]})})},Ms=e=>({id:e.id,userId:e.user_id,name:e.name,surname:e.surname,phone:e.phone,email:e.email||"",contactType:e.contact_type,registrationType:e.registration_type,status:e.status,educationLevel:e.education_level,languages:e.languages||["İngilizce"],interestedLevels:e.interested_levels||[],placementTestLevel:e.placement_test_level,placementTestTeacher:e.placement_test_teacher||"",notes:e.notes||"",followUpDate:e.follow_up_date,lastContact:e.last_contact,createdAt:e.created_at,referralCode:e.referral_code,referredByStudentId:e.referred_by_student_id,referralEarnings:e.referral_earnings||0,referredStudentBonus:e.referred_student_bonus||0,referralPayments:[],bonusPayments:[],totalReferralEarningsPaid:0,totalReferredBonusPaid:0,referrerInfo:e.referrer?{id:e.referrer.id,name:e.referrer.name,surname:e.referrer.surname,referralCode:e.referrer.referral_code}:void 0,interviews:[],priceQuotes:[],classId:e.class_id}),Ex=e=>({user_id:e.userId,name:e.name,surname:e.surname,phone:e.phone,email:e.email||"",contact_type:e.contactType,registration_type:e.registrationType,status:e.status,education_level:e.educationLevel,languages:e.languages,interested_levels:e.interestedLevels,placement_test_level:e.placementTestLevel||null,placement_test_teacher:e.placementTestTeacher||"",notes:e.notes||"",follow_up_date:e.followUpDate||null,last_contact:e.lastContact||null,referral_code:e.referralCode||null,referred_by_student_id:e.referredByStudentId||null,referral_earnings:e.referralEarnings||0,class_id:e.classId||null}),ku=(e,t,r)=>{const n=(t.charAt(0)+r.charAt(0)).toUpperCase(),i=e.substring(0,6).toUpperCase();return`${n}${i}`},_u=async e=>{console.log("DEBUG: findStudentByReferralCode - Searching for referralCode:",e);const{data:t,error:r}=await U.from("students").select("id, name, surname, referral_code").eq("referral_code",e).single();return r?(console.error("DEBUG: findStudentByReferralCode - Error:",r.message),null):(t?console.log("DEBUG: findStudentByReferralCode - Found data:",t):console.log("DEBUG: findStudentByReferralCode - No data found for code:",e),t)},ut={async getAllStudents(){const{data:e,error:t}=await U.from("students").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching students:",t),t;const{data:r,error:n}=await U.from("referral_payments").select("*").order("paid_at",{ascending:!1});if(n)throw console.error("Error fetching referral payments:",n),n;const{data:i,error:a}=await U.from("bonus_payments").select("*").order("paid_at",{ascending:!1});if(a)throw console.error("Error fetching bonus payments:",a),a;const{data:l,error:o}=await U.from("interviews").select("*").order("date",{ascending:!1});if(o)throw console.error("Error fetching interviews:",o),o;const{data:c,error:u}=await U.from("price_quotes").select("*").order("created_at",{ascending:!1});if(u)throw console.error("Error fetching price quotes:",u),u;return e.map(h=>{const m=(r==null?void 0:r.filter(d=>d.student_id===h.id).map(d=>({id:d.id,studentId:d.student_id,amount:d.amount,paidAt:d.paid_at,userId:d.user_id,notes:d.notes||"",createdAt:d.created_at})))||[],p=(i==null?void 0:i.filter(d=>d.student_id===h.id).map(d=>({id:d.id,studentId:d.student_id,amount:d.amount,paidAt:d.paid_at,userId:d.user_id,notes:d.notes||"",createdAt:d.created_at})))||[],x=(l==null?void 0:l.filter(d=>d.student_id===h.id).map(d=>({id:d.id,date:d.date,type:d.type,notes:d.notes,outcome:d.outcome,followUpDate:d.follow_up_date})))||[],y=(c==null?void 0:c.filter(d=>d.student_id===h.id).map(d=>({id:d.id,courseLevel:d.course_level,courseDuration:d.course_duration,totalPrice:d.total_price,cashPrice:d.cash_price,installmentPrice:d.installment_price,paymentType:d.payment_type,installmentCount:d.installment_count,installmentAmount:d.installment_amount,discount:d.discount,finalPrice:d.final_price,notes:d.notes,isAccepted:d.is_accepted,createdAt:d.created_at})))||[],w=m.reduce((d,f)=>d+f.amount,0),b=p.reduce((d,f)=>d+f.amount,0);return{...Ms(h),referralPayments:m,bonusPayments:p,totalReferralEarningsPaid:w,totalReferredBonusPaid:b,interviews:x,priceQuotes:y}})},async addStudent(e,t){const{data:{user:r}}=await U.auth.getUser();if(!r)throw new Error("User not authenticated");let n=null;if(console.log("DEBUG: addStudent - received referredByReferralCode from form:",t),t&&t.trim()!==""){await new Promise(c=>setTimeout(c,500));const o=await _u(t.trim().toUpperCase());if(o)n=o.id,console.log("DEBUG: addStudent - Referrer found, setting referredByStudentId to:",n);else{console.log("DEBUG: addStudent - Referrer NOT found for code:",t);const{data:c}=await U.from("students").select("name, surname, referral_code").not("referral_code","is",null);console.log("DEBUG: addStudent - All existing referral codes in DB:",c)}}else console.log("DEBUG: addStudent - referredByReferralCode is empty or undefined, skipping referrer lookup.");console.log("DEBUG: addStudent - referredByStudentId before DB insert:",n);const i=Ex(e);i.user_id=r.id,i.referred_by_student_id=n;const{data:a,error:l}=await U.from("students").insert(i).select().single();if(l)throw console.error("DEBUG: addStudent - Error during student insert:",l.message),l;if(console.log("DEBUG: addStudent - Student inserted successfully. Full data:",a),console.log("DEBUG: addStudent - data.status after insert:",a.status),console.log("DEBUG: addStudent - data.referred_by_student_id after insert:",a.referred_by_student_id),a.status==="kayitli"){if(a.referral_code)console.log("DEBUG: addStudent - Student is kayitli and already has a referral code:",a.referral_code);else{console.log("DEBUG: addStudent - Student is kayitli and has no referral code, generating one.");const o=ku(a.id,a.name,a.surname),{error:c}=await U.from("students").update({referral_code:o}).eq("id",a.id);c&&console.error("DEBUG: addStudent - Error updating referral code after insert:",c.message),a.referral_code=o,console.log("DEBUG: addStudent - Referral code created and updated:",o)}if(console.log("DEBUG: addStudent - Checking earnings condition (is kayitli and has referrer):",a.status==="kayitli"&&!!n),n){console.log("DEBUG: addStudent - Student is kayitli and has referrer, attempting to increment earnings for:",n);const{error:o}=await U.rpc("increment_referral_earnings",{student_id:n,amount:1e3});if(o){console.error("DEBUG: addStudent - Error incrementing referral earnings via RPC:",o.message);const{data:u}=await U.from("students").select("referral_earnings").eq("id",n).single();if(u){const h=(u.referral_earnings||0)+1e3;await U.from("students").update({referral_earnings:h}).eq("id",n),console.log("DEBUG: addStudent - Fallback: Referral earnings updated for student:",n,"to",h)}}else console.log("DEBUG: addStudent - RPC increment_referral_earnings succeeded for:",n);console.log("DEBUG: addStudent - Setting referred student bonus for new student:",a.id);const{error:c}=await U.from("students").update({referred_student_bonus:1e3}).eq("id",a.id);c?console.error("DEBUG: addStudent - Error updating referred student bonus:",c.message):(console.log("DEBUG: addStudent - Referred student bonus set to 1000 for:",a.id),a.referred_student_bonus=1e3)}}else console.log("DEBUG: addStudent - Student status is not kayitli, status:",a.status);return{...Ms(a),interviews:[],priceQuotes:[]}},async updateStudent(e,t){const{data:{user:r}}=await U.auth.getUser();if(!r)throw new Error("User not authenticated");const{data:n,error:i}=await U.from("students").select("status, referred_by_student_id").eq("id",e).single();if(i)throw console.error("DEBUG: updateStudent - Error fetching old student data:",i.message),i;const a=n.status,l=n.referred_by_student_id;console.log("DEBUG: updateStudent - oldStatus:",a,"oldReferredByStudentId:",l);const o={};t.name!==void 0&&(o.name=t.name),t.surname!==void 0&&(o.surname=t.surname),t.phone!==void 0&&(o.phone=t.phone),t.email!==void 0&&(o.email=t.email),t.contactType!==void 0&&(o.contact_type=t.contactType),t.registrationType!==void 0&&(o.registration_type=t.registrationType),t.status!==void 0&&(o.status=t.status),t.educationLevel!==void 0&&(o.education_level=t.educationLevel),t.languages!==void 0&&(o.languages=t.languages),t.interestedLevels!==void 0&&(o.interested_levels=t.interestedLevels),t.placementTestLevel!==void 0&&(o.placement_test_level=t.placementTestLevel),t.placementTestTeacher!==void 0&&(o.placement_test_teacher=t.placementTestTeacher),t.notes!==void 0&&(o.notes=t.notes),t.followUpDate!==void 0&&(o.follow_up_date=t.followUpDate||null),t.lastContact!==void 0&&(o.last_contact=t.lastContact||null),t.referralCode!==void 0&&(o.referral_code=t.referralCode),t.referredByStudentId!==void 0&&(o.referred_by_student_id=t.referredByStudentId),t.referralEarnings!==void 0&&(o.referral_earnings=t.referralEarnings),t.referredStudentBonus!==void 0&&(o.referred_student_bonus=t.referredStudentBonus),t.referralEarningsPaidAt!==void 0&&(o.referral_earnings_paid_at=t.referralEarningsPaidAt||null),t.referredStudentBonusPaidAt!==void 0&&(o.referred_student_bonus_paid_at=t.referredStudentBonusPaidAt||null),t.classId!==void 0&&(o.class_id=t.classId),o.user_id=r.id;const{data:c,error:u}=await U.from("students").update(o).eq("id",e).select().single();if(console.log("DEBUG: updateStudent - data after update:",c),console.log("DEBUG: updateStudent - data.referred_by_student_id after update:",c==null?void 0:c.referred_by_student_id),console.log("DEBUG: updateStudent - data.status after update:",c==null?void 0:c.status),u)throw console.error("DEBUG: updateStudent - Error during student update:",u.message),u;if(c.status==="kayitli"&&!c.referral_code){console.log("DEBUG: updateStudent - Student became kayitli, creating referral code");const b=ku(c.id,c.name,c.surname),{error:d}=await U.from("students").update({referral_code:b}).eq("id",e);d&&console.error("DEBUG: updateStudent - Error updating referral code:",d.message),c.referral_code=b,console.log("DEBUG: updateStudent - referral code created:",b)}const m=t.status==="kayitli",p=a!=="kayitli",x=l!==null;if(console.log("DEBUG: updateStudent - Earnings conditions check:"),console.log(`  isNowKayitli: ${m}`),console.log(`  wasNotKayitliBefore: ${p}`),console.log(`  hasReferrer: ${x}`),m&&p&&x){console.log("DEBUG: updateStudent - Conditions met for incrementing earnings for:",l);const{error:b}=await U.rpc("increment_referral_earnings",{student_id:l,amount:1e3});if(b){console.error("DEBUG: updateStudent - Error incrementing referral earnings via RPC:",b.message);const{data:f}=await U.from("students").select("referral_earnings").eq("id",l).single();if(f){const g=(f.referral_earnings||0)+1e3;await U.from("students").update({referral_earnings:g}).eq("id",l),console.log("DEBUG: updateStudent - Fallback: Referral earnings updated for student:",l,"to",g)}}else console.log("DEBUG: updateStudent - RPC increment_referral_earnings succeeded for:",l);console.log("DEBUG: updateStudent - Setting referred student bonus for updated student:",e);const{error:d}=await U.from("students").update({referred_student_bonus:1e3}).eq("id",e);d?console.error("DEBUG: updateStudent - Error updating referred student bonus:",d.message):console.log("DEBUG: updateStudent - Referred student bonus set to 1000 for:",e)}else console.log("DEBUG: updateStudent - Earnings not incremented - conditions not met.");const w=(await this.getAllStudents()).find(b=>b.id===e);if(!w)throw new Error("Student not found after update");return w},async deleteStudent(e){const{error:t}=await U.from("students").delete().eq("id",e);if(t)throw console.error("Error deleting student:",t),t},async addInterview(e,t){const{data:{user:r}}=await U.auth.getUser();if(!r)throw new Error("User not authenticated");const{data:n,error:i}=await U.from("interviews").insert({user_id:r.id,student_id:e,date:t.date,type:t.type,notes:t.notes,outcome:t.outcome||"",follow_up_date:t.followUpDate||null}).select().single();if(i)throw console.error("Error adding interview:",i),i;return{id:n.id,userId:n.user_id,date:n.date,type:n.type,notes:n.notes,outcome:n.outcome,followUpDate:n.follow_up_date}},async addPriceQuote(e,t){const{data:{user:r}}=await U.auth.getUser();if(!r)throw new Error("User not authenticated");const{data:n,error:i}=await U.from("price_quotes").insert({user_id:r.id,student_id:e,course_level:t.courseLevel,course_duration:t.courseDuration,total_price:t.totalPrice,payment_type:t.paymentType,installment_count:t.installmentCount||null,installment_amount:t.installmentAmount||null,discount:t.discount||0,final_price:t.finalPrice,notes:t.notes||"",is_accepted:t.isAccepted||!1,cash_price:t.cashPrice||null,installment_price:t.installmentPrice||null}).select().single();if(i)throw console.error("Error adding price quote:",i),i;return{id:n.id,userId:n.user_id,courseLevel:n.course_level,courseDuration:n.course_duration,totalPrice:n.total_price,cashPrice:n.cash_price,installmentPrice:n.installment_price,paymentType:n.payment_type,installmentCount:n.installment_count,installmentAmount:n.installment_amount,discount:n.discount,finalPrice:n.final_price,notes:n.notes,isAccepted:n.is_accepted,createdAt:n.created_at}},async getInterviewsByDateRange(e,t){const{data:r,error:n}=await U.from("interviews").select("*").gte("date",e).lte("date",t).order("date",{ascending:!1});if(n)throw console.error("Error fetching interviews by date range:",n),n;return r.map(i=>({id:i.id,userId:i.user_id,date:i.date,type:i.type,notes:i.notes,outcome:i.outcome,followUpDate:i.follow_up_date}))},async getReferredStudentsByDateRange(e,t){const{data:r,error:n}=await U.from("students").select(`
        *,
        referrer:referred_by_student_id(id, name, surname, referral_code)
      `).not("referred_by_student_id","is",null).gte("created_at",e).lte("created_at",t).order("created_at",{ascending:!1});if(n)throw console.error("Error fetching referred students by date range:",n),n;return r.map(i=>({...Ms(i),interviews:[],priceQuotes:[]}))},async getReferredStudents(e){const{data:t,error:r}=await U.from("students").select("*").eq("referred_by_student_id",e).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching referred students:",r),r;return t.map(n=>({...Ms(n),interviews:[],priceQuotes:[]}))},async addReferralPayment(e,t,r){const{data:{user:n}}=await U.auth.getUser();if(!n)throw new Error("User not authenticated");const{data:i,error:a}=await U.from("referral_payments").insert({student_id:e,amount:t,user_id:n.id,notes:r||""}).select().single();if(a)throw console.error("Error adding referral payment:",a),a;return{id:i.id,studentId:i.student_id,amount:i.amount,paidAt:i.paid_at,userId:i.user_id,notes:i.notes||"",createdAt:i.created_at}},async addBonusPayment(e,t,r){const{data:{user:n}}=await U.auth.getUser();if(!n)throw new Error("User not authenticated");const{data:i,error:a}=await U.from("bonus_payments").insert({student_id:e,amount:t,user_id:n.id,notes:r||""}).select().single();if(a)throw console.error("Error adding bonus payment:",a),a;return{id:i.id,studentId:i.student_id,amount:i.amount,paidAt:i.paid_at,userId:i.user_id,notes:i.notes||"",createdAt:i.created_at}},async getFinancialReportData(e,t){const{data:r,error:n}=await U.from("students").select("id, referred_by_student_id, status, created_at").not("referred_by_student_id","is",null).eq("status","kayitli").gte("created_at",e).lte("created_at",t);if(n)throw console.error("Error fetching referred students for financial report:",n),n;const i=((r==null?void 0:r.length)||0)*1e3,a=((r==null?void 0:r.length)||0)*1e3,{data:l,error:o}=await U.from("referral_payments").select("amount").gte("paid_at",e).lte("paid_at",t);if(o)throw console.error("Error fetching referral payments for financial report:",o),o;const{data:c,error:u}=await U.from("bonus_payments").select("amount").gte("paid_at",e).lte("paid_at",t);if(u)throw console.error("Error fetching bonus payments for financial report:",u),u;const h=(l==null?void 0:l.reduce((y,w)=>y+w.amount,0))||0,m=(c==null?void 0:c.reduce((y,w)=>y+w.amount,0))||0,p=Math.max(0,i-h),x=Math.max(0,a-m);return{totalPotentialReferralEarnings:i,totalPotentialBonusPayments:a,totalReferralPaymentsMade:h,totalBonusPaymentsMade:m,unpaidReferralEarnings:p,unpaidBonusPayments:x}},async findStudentByReferralCode(e){return _u(e)}},kn=Object.freeze(Object.defineProperty({__proto__:null,studentService:ut},Symbol.toStringTag,{value:"Module"})),Cx={yeni:{label:"Yeni",color:"bg-yellow-100 text-yellow-800",icon:"🆕"},ilgili:{label:"İlgili",color:"bg-blue-100 text-blue-800",icon:"👀"},kayitli:{label:"Kayıtlı",color:"bg-green-100 text-green-800",icon:"✅"},iptal:{label:"İptal",color:"bg-red-100 text-red-800",icon:"❌"}},Tx={ilkogretim:"İlköğretim",lise:"Lise",universite:"Üniversite",yetiskin:"Yetişkin"},Nu={telefon:{label:"Telefon",icon:dn},"yuz-yuze":{label:"Yüz Yüze",icon:Be}},Su={"yeni-kayit":{label:"Yeni Kayıt",color:"bg-green-100 text-green-800"},"kayit-yenileme":{label:"Kayıt Yenileme",color:"bg-purple-100 text-purple-800"}},Px=({customers:e,onCustomerSelect:t})=>{const r=n=>new Date(n).toLocaleDateString("tr-TR");return e.length===0?s.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[s.jsx(Be,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz öğrenci yok"}),s.jsx("p",{className:"text-gray-500",children:'İlk öğrencinizi eklemek için "Yeni Öğrenci" butonuna tıklayın.'})]}):s.jsx("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Öğrenci Bilgileri"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İletişim"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Eğitim Seviyesi"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kayıt Türü"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Son Görüşme"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(n=>{const i=Cx[n.status],a=Nu[n.contactType].icon,l=n.interviews[n.interviews.length-1];return s.jsxs("tr",{onClick:()=>t(n),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsxs("span",{className:"text-blue-600 font-medium",children:[n.name.charAt(0).toUpperCase(),n.surname.charAt(0).toUpperCase()]})})}),s.jsxs("div",{className:"ml-4",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[n.name," ",n.surname]}),s.jsx("div",{className:"text-sm text-gray-500",children:n.languages.join(", ")})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(a,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-900",children:n.phone})]}),n.email&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fs,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-500",children:n.email})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.color}`,children:[s.jsx("span",{className:"mr-1",children:i.icon}),i.label]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Tx[n.educationLevel]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Su[n.registrationType].color}`,children:Su[n.registrationType].label})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex flex-col",children:[l?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-900",children:[s.jsx(nn,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{children:r(l.date)})]}),s.jsx("span",{className:"text-xs text-gray-500",children:Nu[l.type].label})]}):s.jsx("span",{className:"text-sm text-gray-500",children:"Henüz görüşme yok"}),n.interviews.length>0&&s.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[s.jsx(Vi,{className:"h-3 w-3 text-gray-400"}),s.jsxs("span",{className:"text-xs text-gray-500",children:[n.interviews.length," görüşme"]})]})]})})]},n.id)})})]})})})},It={async getActiveTeachers(){const{data:e,error:t}=await U.from("teachers").select("*").eq("is_active",!0).order("name",{ascending:!0});if(t)throw console.error("Error fetching teachers:",t),t;return e.map(r=>({id:r.id,name:r.name,isActive:r.is_active,createdAt:r.created_at,userId:r.user_id}))},async getAllTeachers(){const{data:e,error:t}=await U.from("teachers").select("*").order("name",{ascending:!0});if(t)throw console.error("Error fetching all teachers:",t),t;return e.map(r=>({id:r.id,name:r.name,isActive:r.is_active,createdAt:r.created_at,userId:r.user_id}))},async addTeacher(e){const{data:{user:t}}=await U.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:r,error:n}=await U.from("teachers").insert({name:e.trim(),user_id:t.id}).select().single();if(n)throw console.error("Error adding teacher:",n),n;return{id:r.id,name:r.name,isActive:r.is_active,createdAt:r.created_at,userId:r.user_id}},async updateTeacher(e,t,r=!0){const{data:n,error:i}=await U.from("teachers").update({name:t.trim(),is_active:r}).eq("id",e).select().single();if(i)throw console.error("Error updating teacher:",i),i;return{id:n.id,name:n.name,isActive:n.is_active,createdAt:n.created_at,userId:n.user_id}},async deleteTeacher(e){const{error:t}=await U.from("teachers").delete().eq("id",e);if(t)throw console.error("Error deleting teacher:",t),t},async deactivateTeacher(e){return this.updateTeacher(e,"",!1)}},Lx=["İngilizce","Almanca","Fransızca","İspanyolca","İtalyanca","Rusça","Çince","Japonca","Sınav Hazırlık"],Ax=[{value:"starter2",label:"Starter 2"},{value:"starter3",label:"Starter 3"},{value:"starter4",label:"Starter 4"},{value:"level5",label:"Level 5"},{value:"level6",label:"Level 6"},{value:"level7",label:"Level 7"},{value:"level8",label:"Level 8"}],Eu=[{value:"A1.1",label:"A1.1"},{value:"A1.2",label:"A1.2"},{value:"A2.1",label:"A2.1"},{value:"A2.2",label:"A2.2"},{value:"B1.1",label:"B1.1"},{value:"B1.2",label:"B1.2"},{value:"B2.1",label:"B2.1"},{value:"B2.2",label:"B2.2"},{value:"C1.1",label:"C1.1"},{value:"C1.2",label:"C1.2"}],Rx=e=>{switch(e){case"ilkogretim":return[...Ax,...Eu];case"lise":case"universite":case"yetiskin":return Eu;default:return[]}},gf=({customer:e,onSubmit:t,onCancel:r,loading:n=!1})=>{var b;const[i,a]=N.useState([]),[l,o]=N.useState(!0),[c,u]=N.useState({name:(e==null?void 0:e.name)||"",surname:(e==null?void 0:e.surname)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||"",contactType:(e==null?void 0:e.contactType)||"telefon",registrationType:(e==null?void 0:e.registrationType)||"yeni-kayit",status:(e==null?void 0:e.status)||"yeni",educationLevel:(e==null?void 0:e.educationLevel)||"lise",languages:(e==null?void 0:e.languages)||["İngilizce"],interestedLevels:(e==null?void 0:e.interestedLevels)||[],placementTestLevel:(e==null?void 0:e.placementTestLevel)||"",placementTestTeacher:(e==null?void 0:e.placementTestTeacher)||"",notes:(e==null?void 0:e.notes)||"",followUpDate:(e==null?void 0:e.followUpDate)||"",referredByReferralCode:((b=e==null?void 0:e.referrerInfo)==null?void 0:b.referralCode)||""});N.useEffect(()=>{(async()=>{try{o(!0);const f=await It.getActiveTeachers();a(f)}catch(f){console.error("Error fetching teachers:",f)}finally{o(!1)}})()},[]);const h=d=>{d.preventDefault();const{referredByReferralCode:f,...g}=c,j={...g,lastContact:new Date().toISOString()},C=f&&f.trim()!==""?f.trim().toUpperCase():void 0;console.log("DEBUG: CustomerForm - formData.referredByReferralCode before onSubmit:",c.referredByReferralCode),console.log("DEBUG: CustomerForm - Submitting with referralCode:",C),t(j,C)},m=(d,f)=>{u(g=>({...g,languages:f?[...g.languages,d]:g.languages.filter(j=>j!==d)}))},p=(d,f)=>{u(g=>({...g,interestedLevels:f?[...g.interestedLevels,d]:g.interestedLevels.filter(j=>j!==d)}))},x=d=>{u(f=>({...f,placementTestLevel:d||void 0,placementTestTeacher:d?f.placementTestTeacher:""}))},y=d=>{u(f=>({...f,educationLevel:d,interestedLevels:[],placementTestLevel:void 0,placementTestTeacher:""}))},w=Rx(c.educationLevel);return s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"bg-white shadow-sm rounded-lg",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e?"Öğrenci Düzenle":"Yeni Öğrenci Ekle"})}),s.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Be,{className:"h-4 w-4 inline mr-1"}),"Ad *"]}),s.jsx("input",{type:"text",required:!0,value:c.name,onChange:d=>u(f=>({...f,name:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Soyad *"}),s.jsx("input",{type:"text",required:!0,value:c.surname,onChange:d=>u(f=>({...f,surname:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(dn,{className:"h-4 w-4 inline mr-1"}),"Telefon *"]}),s.jsx("input",{type:"tel",required:!0,value:c.phone,onChange:d=>u(f=>({...f,phone:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0555 123 4567"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(fs,{className:"h-4 w-4 inline mr-1"}),"E-posta"]}),s.jsx("input",{type:"email",value:c.email,onChange:d=>u(f=>({...f,email:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ornek@email.com"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İletişim Türü"}),s.jsxs("select",{value:c.contactType,onChange:d=>u(f=>({...f,contactType:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"telefon",children:"Telefon"}),s.jsx("option",{value:"yuz-yuze",children:"Yüz Yüze"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kayıt Türü"}),s.jsxs("select",{value:c.registrationType,onChange:d=>u(f=>({...f,registrationType:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"yeni-kayit",children:"Yeni Kayıt"}),s.jsx("option",{value:"kayit-yenileme",children:"Kayıt Yenileme"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(tg,{className:"h-4 w-4 inline mr-1"}),"Eğitim Seviyesi"]}),s.jsxs("select",{value:c.educationLevel,onChange:d=>y(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"ilkogretim",children:"İlköğretim"}),s.jsx("option",{value:"lise",children:"Lise"}),s.jsx("option",{value:"universite",children:"Üniversite"}),s.jsx("option",{value:"yetiskin",children:"Yetişkin"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"İlgilenilen Diller"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Lx.map(d=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:c.languages.includes(d),onChange:f=>m(d,f.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:d})]},d))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["İlgilenilen Seviyeler (",c.educationLevel==="ilkogretim"?"İlkokul":c.educationLevel==="lise"?"Lise":c.educationLevel==="universite"?"Üniversite":"Yetişkin"," Seviyeleri)"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:w.map(({value:d,label:f})=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:c.interestedLevels.includes(d),onChange:g=>p(d,g.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:f})]},d))}),w.length===0&&s.jsx("p",{className:"text-sm text-gray-500 italic",children:"Önce eğitim seviyesini seçin"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Seviye Tespit Sınavı Sonucu (",c.educationLevel==="ilkogretim"?"İlkokul":c.educationLevel==="lise"?"Lise":c.educationLevel==="universite"?"Üniversite":"Yetişkin"," Seviyeleri)"]}),s.jsxs("select",{value:c.placementTestLevel||"",onChange:d=>x(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Henüz sınav yapılmadı"}),w.map(({value:d,label:f})=>s.jsx("option",{value:d,children:f},d))]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Müşterinin seviye tespit sınavından aldığı sonuç"}),w.length===0&&s.jsx("p",{className:"text-sm text-gray-500 italic",children:"Önce eğitim seviyesini seçin"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Sınavı Yapan Öğretmen"}),s.jsxs("select",{value:c.placementTestTeacher,onChange:d=>u(f=>({...f,placementTestTeacher:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!c.placementTestLevel,children:[s.jsx("option",{value:"",children:"Öğretmen seçin"}),l?s.jsx("option",{disabled:!0,children:"Yükleniyor..."}):i.map(d=>s.jsx("option",{value:d.name,children:d.name},d.id))]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Seviye tespit sınavını yapan öğretmeni seçin"}),l&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Öğretmenler yükleniyor..."}),!c.placementTestLevel&&s.jsx("p",{className:"text-sm text-gray-500 italic",children:"Önce sınav sonucunu seçin"}),!l&&i.length===0&&s.jsx("p",{className:"text-sm text-red-500 italic mt-1",children:"Aktif öğretmen bulunamadı. Lütfen önce öğretmen ekleyin."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Takip Tarihi"}),s.jsx("input",{type:"date",value:c.followUpDate?c.followUpDate.split("T")[0]:"",onChange:d=>u(f=>({...f,followUpDate:d.target.value?new Date(d.target.value).toISOString():""})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 max-w-xs"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referans Kodu (Opsiyonel)"}),s.jsx("input",{type:"text",value:c.referredByReferralCode,onChange:d=>u(f=>({...f,referredByReferralCode:d.target.value.toUpperCase()})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 max-w-xs",placeholder:"Örn: AY123456",maxLength:8}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e?"Bu öğrencinin referans kodunu değiştirmek için yeni kodu girin veya boş bırakın":"Bu öğrenci başka bir öğrencinin referansıyla geliyorsa, referans kodunu girin"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notlar"}),s.jsx("textarea",{value:c.notes,onChange:d=>u(f=>({...f,notes:d.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Öğrenci hakkında notlar..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[s.jsxs("button",{type:"button",onClick:r,disabled:n,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[s.jsx(qe,{className:"h-4 w-4"}),s.jsx("span",{children:"İptal"})]}),s.jsx("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Kaydediliyor..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Jt,{className:"h-4 w-4"}),s.jsx("span",{children:e?"Güncelle":"Kaydet"})]})})]})]})]})})},Ox=({customerId:e,onSubmit:t,onCancel:r,loading:n=!1})=>{const[i,a]=N.useState({date:new Date().toISOString().slice(0,16),type:"telefon",notes:"",outcome:"",followUpDate:""}),l=o=>{o.preventDefault(),t({...i,followUpDate:i.followUpDate||void 0})};return s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-white shadow-sm rounded-lg",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Yeni Görüşme Ekle"})}),s.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(nn,{className:"h-4 w-4 inline mr-1"}),"Görüşme Tarihi ve Saati *"]}),s.jsx("input",{type:"datetime-local",required:!0,value:i.date,onChange:o=>a(c=>({...c,date:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Görüşme Türü *"}),s.jsxs("select",{required:!0,value:i.type,onChange:o=>a(c=>({...c,type:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"telefon",children:"Telefon"}),s.jsx("option",{value:"yuz-yuze",children:"Yüz Yüze"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(lg,{className:"h-4 w-4 inline mr-1"}),"Görüşme Sonucu"]}),s.jsxs("select",{value:i.outcome,onChange:o=>a(c=>({...c,outcome:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Sonuç seçin..."}),s.jsx("option",{value:"Kayıt oldu",children:"Kayıt oldu"}),s.jsx("option",{value:"Düşünüyor",children:"Düşünüyor"}),s.jsx("option",{value:"Şuan düşünmüyor",children:"Şuan düşünmüyor"}),s.jsx("option",{value:"Fiyat pahalı",children:"Fiyat pahalı"}),s.jsx("option",{value:"Kayıt olmayacak",children:"Kayıt olmayacak"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Vi,{className:"h-4 w-4 inline mr-1"}),"Görüşme Notları *"]}),s.jsx("textarea",{required:!0,value:i.notes,onChange:o=>a(c=>({...c,notes:o.target.value})),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Görüşmede konuşulanları, öğrencinin sorularını, verilen bilgileri detaylıca yazın..."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(nn,{className:"h-4 w-4 inline mr-1"}),"Takip Tarihi"]}),s.jsx("input",{type:"date",value:i.followUpDate?i.followUpDate.split("T")[0]:"",onChange:o=>a(c=>({...c,followUpDate:o.target.value?new Date(o.target.value).toISOString():""})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 max-w-xs"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Öğrenci ile tekrar iletişim kurulacak tarih"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[s.jsxs("button",{type:"button",onClick:r,disabled:n,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[s.jsx(qe,{className:"h-4 w-4"}),s.jsx("span",{children:"İptal"})]}),s.jsx("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Kaydediliyor..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Jt,{className:"h-4 w-4"}),s.jsx("span",{children:"Görüşmeyi Kaydet"})]})})]})]})]})})},Ux=({customerId:e,onSubmit:t,onCancel:r,loading:n=!1})=>{const[i,a]=N.useState({courseLevel:"",courseDuration:"",totalPrice:0,cashPrice:0,installmentPrice:0,paymentType:"pesin",installmentCount:2,discount:0,notes:""}),[l,o]=N.useState({installmentAmount:0,finalPrice:0});Of.useEffect(()=>{const h=(i.paymentType==="pesin"?i.cashPrice:i.installmentPrice)-(i.discount||0),m=i.paymentType==="taksit"&&i.installmentCount>0?h/i.installmentCount:0;o({installmentAmount:Math.round(m*100)/100,finalPrice:h})},[i.cashPrice,i.installmentPrice,i.discount,i.paymentType,i.installmentCount]);const c=u=>{u.preventDefault(),t({...i,totalPrice:i.paymentType==="pesin"?i.cashPrice:i.installmentPrice,installmentAmount:i.paymentType==="taksit"?l.installmentAmount:void 0,installmentCount:i.paymentType==="taksit"?i.installmentCount:void 0,finalPrice:l.finalPrice,createdAt:new Date().toISOString()})};return s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-white shadow-sm rounded-lg",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Yeni Fiyat Teklifi"})}),s.jsxs("form",{onSubmit:c,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kurs Seviyesi *"}),s.jsx("input",{type:"text",required:!0,value:i.courseLevel,onChange:u=>a(h=>({...h,courseLevel:u.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Örn: A1.1, Starter 2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kur Türü *"}),s.jsx("div",{className:"space-y-2",children:["1 Kur","1+1","2+1","2+2","Özel Ders"].map(u=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i.courseDuration.includes(u),onChange:h=>{const m=h.target.checked?[...i.courseDuration.split(", ").filter(p=>p),u]:i.courseDuration.split(", ").filter(p=>p!==u);a(p=>({...p,courseDuration:m.join(", ")}))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:u})]},u))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Ni,{className:"h-4 w-4 inline mr-1"}),"Peşin Fiyat (₺) *"]}),s.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:i.cashPrice||"",onChange:u=>a(h=>({...h,cashPrice:parseFloat(u.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Ni,{className:"h-4 w-4 inline mr-1"}),"Taksitli Fiyat (₺) *"]}),s.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:i.installmentPrice||"",onChange:u=>a(h=>({...h,installmentPrice:parseFloat(u.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]})]})}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(ig,{className:"h-4 w-4 inline mr-1"}),"İndirim (₺)"]}),s.jsx("input",{type:"number",min:"0",step:"0.01",value:i.discount||"",onChange:u=>a(h=>({...h,discount:parseFloat(u.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"}),i.cashPrice>0&&i.installmentPrice>0&&s.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Peşin Fiyat:"}),s.jsxs("span",{className:"font-medium text-green-600",children:[i.cashPrice.toLocaleString("tr-TR")," ₺"]})]}),s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-gray-600",children:"Taksitli Fiyat:"}),s.jsxs("span",{className:"font-medium text-blue-600",children:[i.installmentPrice.toLocaleString("tr-TR")," ₺"]})]}),s.jsxs("div",{className:"flex justify-between items-center border-t border-blue-200 pt-2",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Fark:"}),s.jsxs("span",{className:"font-bold text-orange-600",children:[(i.installmentPrice-i.cashPrice).toLocaleString("tr-TR")," ₺"]})]})]})})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[s.jsx(Hh,{className:"h-4 w-4 inline mr-1"}),"Ödeme Türü *"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"radio",name:"paymentType",value:"pesin",checked:i.paymentType==="pesin",onChange:u=>a(h=>({...h,paymentType:u.target.value})),className:"text-blue-600 focus:ring-blue-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Peşin Ödeme"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Tek seferde ödeme"})]})]}),s.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"radio",name:"paymentType",value:"taksit",checked:i.paymentType==="taksit",onChange:u=>a(h=>({...h,paymentType:u.target.value})),className:"text-blue-600 focus:ring-blue-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Taksitli Ödeme"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Aylık taksitler"})]})]})]})]}),i.paymentType==="taksit"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taksit Sayısı"}),s.jsxs("select",{value:i.installmentCount,onChange:u=>a(h=>({...h,installmentCount:parseInt(u.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 max-w-xs",children:[s.jsx("option",{value:2,children:"2 Taksit"}),s.jsx("option",{value:3,children:"3 Taksit"}),s.jsx("option",{value:4,children:"4 Taksit"}),s.jsx("option",{value:5,children:"5 Taksit"}),s.jsx("option",{value:6,children:"6 Taksit"}),s.jsx("option",{value:7,children:"7 Taksit"}),s.jsx("option",{value:8,children:"8 Taksit"}),s.jsx("option",{value:9,children:"9 Taksit"}),s.jsx("option",{value:10,children:"10 Taksit"}),s.jsx("option",{value:11,children:"11 Taksit"}),s.jsx("option",{value:12,children:"12 Taksit"})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Fiyat Özeti"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:i.paymentType==="pesin"?"Peşin Fiyat:":"Taksitli Fiyat:"}),s.jsxs("span",{className:"font-medium",children:[(i.paymentType==="pesin"?i.cashPrice:i.installmentPrice).toLocaleString("tr-TR")," ₺"]})]}),i.cashPrice>0&&i.installmentPrice>0&&s.jsxs("div",{className:"flex justify-between text-gray-500",children:[s.jsx("span",{children:i.paymentType==="pesin"?"Taksitli Fiyat:":"Peşin Fiyat:"}),s.jsxs("span",{children:[(i.paymentType==="pesin"?i.installmentPrice:i.cashPrice).toLocaleString("tr-TR")," ₺"]})]}),i.discount>0&&s.jsxs("div",{className:"flex justify-between text-red-600",children:[s.jsx("span",{children:"İndirim:"}),s.jsxs("span",{children:["-",i.discount.toLocaleString("tr-TR")," ₺"]})]}),s.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Net Fiyat:"}),s.jsxs("span",{className:"font-bold text-lg text-blue-600",children:[l.finalPrice.toLocaleString("tr-TR")," ₺"]})]}),i.paymentType==="taksit"&&l.installmentAmount>0&&s.jsxs("div",{className:"flex justify-between text-green-600",children:[s.jsx("span",{children:"Aylık Taksit:"}),s.jsxs("span",{className:"font-medium",children:[l.installmentAmount.toLocaleString("tr-TR")," ₺ x ",i.installmentCount]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teklif Notları"}),s.jsx("textarea",{value:i.notes,onChange:u=>a(h=>({...h,notes:u.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Teklif ile ilgili özel notlar, koşullar vb..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[s.jsxs("button",{type:"button",onClick:r,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:[s.jsx(qe,{className:"h-4 w-4"}),s.jsx("span",{children:"İptal"})]}),s.jsx("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Kaydediliyor..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Jt,{className:"h-4 w-4"}),s.jsx("span",{children:"Teklifi Kaydet"})]})})]})]})]})})},Ua={yeni:{label:"Yeni",color:"bg-yellow-100 text-yellow-800",icon:"🆕"},ilgili:{label:"İlgili",color:"bg-blue-100 text-blue-800",icon:"👀"},kayitli:{label:"Kayıtlı",color:"bg-green-100 text-green-800",icon:"✅"},iptal:{label:"İptal",color:"bg-red-100 text-red-800",icon:"❌"}},Dx={ilkogretim:"İlköğretim",lise:"Lise",universite:"Üniversite",yetiskin:"Yetişkin"},Cu={starter2:"Starter 2",starter3:"Starter 3",starter4:"Starter 4",level5:"Level 5",level6:"Level 6",level7:"Level 7",level8:"Level 8","A1.1":"A1.1","A1.2":"A1.2","A2.1":"A2.1","A2.2":"A2.2","B1.1":"B1.1","B1.2":"B1.2","B2.1":"B2.1","B2.2":"B2.2","C1.1":"C1.1","C1.2":"C1.2"},Da={telefon:{label:"Telefon",icon:dn},"yuz-yuze":{label:"Yüz Yüze",icon:Be}},Tu={"yeni-kayit":{label:"Yeni Kayıt",color:"bg-green-100 text-green-800"},"kayit-yenileme":{label:"Kayıt Yenileme",color:"bg-purple-100 text-purple-800"}},Ix=({customer:e,onBack:t,onUpdate:r,onRefresh:n,onDelete:i,loading:a=!1})=>{var fe;const[l,o]=N.useState(!1),[c,u]=N.useState(!1),[h,m]=N.useState(!1),[p,x]=N.useState(!1),[y,w]=N.useState(!1),[b,d]=N.useState([]),[f,g]=N.useState(!1),[j,C]=N.useState(!1),[T,E]=N.useState(!1),[A,S]=N.useState(""),[_,I]=N.useState("");N.useEffect(()=>{e.referralCode&&M()},[e.id,e.referralCode]);const M=async()=>{try{g(!0);const{studentService:v}=await tt(async()=>{const{studentService:K}=await Promise.resolve().then(()=>kn);return{studentService:K}},void 0),R=await v.getReferredStudents(e.id);d(R)}catch(v){console.error("Error loading referred students:",v)}finally{g(!1)}},ce=async v=>{const R={...e,...v};await r(R),o(!1)},Re=async v=>{try{w(!0);const{studentService:R}=await tt(async()=>{const{studentService:Ct}=await Promise.resolve().then(()=>kn);return{studentService:Ct}},void 0);await R.addInterview(e.id,v);let K=e.status;v.outcome&&(v.outcome.toLowerCase().includes("kayıt oldu")||v.outcome.toLowerCase().includes("kayıt edildi")||v.outcome.toLowerCase().includes("kaydoldu"))&&(K="kayitli");let xe=v.followUpDate;K==="kayitli"&&(xe=void 0);const Et={...e,lastContact:v.date,status:K,followUpDate:xe};await r(Et),u(!1)}catch(R){console.error("Error adding interview:",R)}finally{w(!1)}},ft=async v=>{try{w(!0);const{studentService:R}=await tt(async()=>{const{studentService:K}=await Promise.resolve().then(()=>kn);return{studentService:K}},void 0);await R.addPriceQuote(e.id,v),await n(),m(!1)}catch(R){console.error("Error adding price quote:",R)}finally{w(!1)}},mt=async()=>{try{w(!0),await i(e.id)}catch(v){console.error("Error deleting student:",v)}finally{w(!1),x(!1)}},ue=async()=>{if(!(!A||parseFloat(A)<=0))try{w(!0);const{studentService:v}=await tt(async()=>{const{studentService:R}=await Promise.resolve().then(()=>kn);return{studentService:R}},void 0);await v.addReferralPayment(e.id,parseFloat(A),_),await n(),C(!1),S(""),I("")}catch(v){console.error("Error adding referral payment:",v)}finally{w(!1)}},k=async()=>{if(!(!A||parseFloat(A)<=0))try{w(!0);const{studentService:v}=await tt(async()=>{const{studentService:R}=await Promise.resolve().then(()=>kn);return{studentService:R}},void 0);await v.addBonusPayment(e.id,parseFloat(A),_),await n(),E(!1),S(""),I("")}catch(v){console.error("Error adding bonus payment:",v)}finally{w(!1)}},L=v=>new Date(v).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),O=v=>new Date(v).toLocaleDateString("tr-TR"),B=()=>{e.referralCode&&navigator.clipboard.writeText(e.referralCode)};if(console.log("DEBUG CustomerDetail - customer data:",{id:e.id,name:e.name,referralCode:e.referralCode,referredByStudentId:e.referredByStudentId,referredStudentBonus:e.referredStudentBonus,referralEarnings:e.referralEarnings,totalReferralEarningsPaid:e.totalReferralEarningsPaid,totalReferredBonusPaid:e.totalReferredBonusPaid}),l)return s.jsx(gf,{customer:e,onSubmit:ce,onCancel:()=>o(!1)});if(c)return s.jsx(Ox,{customerId:e.id,onSubmit:Re,onCancel:()=>u(!1),loading:y});if(h)return s.jsx(Ux,{customerId:e.id,onSubmit:ft,onCancel:()=>m(!1),loading:y});const F=Ua[e.status];return s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"bg-white shadow-sm rounded-lg mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(un,{className:"h-5 w-5"}),s.jsx("span",{children:"Öğrenci Listesi"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:()=>u(!0),disabled:a||y,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[s.jsx(yr,{className:"h-4 w-4"}),s.jsx("span",{children:"Görüşme Ekle"})]}),s.jsxs("button",{onClick:()=>m(!0),disabled:a||y,className:"flex items-center space-x-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:[s.jsx(Ni,{className:"h-4 w-4"}),s.jsx("span",{children:"Fiyat Teklifi"})]}),s.jsxs("button",{onClick:()=>o(!0),disabled:a||y,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Bo,{className:"h-4 w-4"}),s.jsx("span",{children:"Düzenle"})]}),s.jsxs("button",{onClick:()=>x(!0),disabled:a||y,className:"flex items-center space-x-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[s.jsx(qi,{className:"h-4 w-4"}),s.jsx("span",{children:"Sil"})]})]})]})}),s.jsx("div",{className:"px-6 py-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsxs("span",{className:"text-blue-600 text-xl font-semibold",children:[e.name.charAt(0).toUpperCase(),e.surname.charAt(0).toUpperCase()]})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[e.name," ",e.surname]}),s.jsx("p",{className:"text-gray-600",children:e.languages.join(", ")}),e.referralCode&&s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx(Ds,{className:"h-4 w-4 text-green-600"}),s.jsxs("span",{className:"text-sm text-green-600 font-medium",children:["Referans Kodu: ",e.referralCode]}),s.jsx("button",{onClick:B,className:"text-xs text-blue-600 hover:text-blue-700 underline",children:"Kopyala"})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${F.color}`,children:[s.jsx("span",{className:"mr-1",children:F.icon}),F.label]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Kayıt: ",O(e.createdAt)]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"İletişim Bilgileri"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(dn,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Telefon"}),s.jsx("p",{className:"font-medium",children:e.phone})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(fs,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"E-posta"}),s.jsx("p",{className:"font-medium",children:e.email||"Belirtilmemiş"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Be,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"İletişim Türü"}),s.jsx("p",{className:"font-medium",children:Da[e.contactType].label})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Be,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Kayıt Türü"}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Tu[e.registrationType].color}`,children:Tu[e.registrationType].label})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(nn,{className:"h-5 w-5 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Eğitim Seviyesi"}),s.jsx("p",{className:"font-medium",children:Dx[e.educationLevel]})]})]})]})]}),s.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Kurs Bilgileri"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"İlgilenilen Diller"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.languages.map(v=>s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:v},v))})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"İlgilenilen Seviyeler"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.interestedLevels.map(v=>s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800",children:Cu[v]},v))})]}),e.placementTestLevel&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Seviye Tespit Sınavı Sonucu"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-800 font-medium",children:Cu[e.placementTestLevel]}),e.placementTestTeacher&&s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Sınavı yapan:"})," ",e.placementTestTeacher]})]})]})]})]}),(e.referralCode||e.referralEarnings>0||b.length>0||e.referredStudentBonus>0)&&s.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Ds,{className:"h-5 w-5 text-green-600 mr-2"}),"Referans Bilgileri"]}),s.jsxs("div",{className:"space-y-4",children:[e.referralCode&&s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-900",children:"Referans Kodu"}),s.jsx("p",{className:"text-lg font-bold text-green-700",children:e.referralCode})]}),s.jsx("button",{onClick:B,className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors",children:"Kopyala"})]}),s.jsx("p",{className:"text-xs text-green-600 mt-2",children:"Bu kodu paylaşarak yeni öğrenciler getirin ve her kayıt için 1000 TL kazanın!"})]}),(e.referralCode||e.referralEarnings>0||b.length>0)&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"flex items-center justify-center mb-1",children:s.jsx(st,{className:"h-5 w-5 text-blue-600"})}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:b.length}),s.jsx("p",{className:"text-sm text-blue-600",children:"Getirdiği Öğrenci"})]}),s.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"flex items-center justify-center mb-1",children:s.jsx(Ds,{className:"h-5 w-5 text-green-600"})}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[((e.referralEarnings||0)+(e.referredStudentBonus||0)).toLocaleString("tr-TR")," ₺"]}),s.jsx("p",{className:"text-sm text-green-600",children:"Toplam Kazanç"}),(e.referralEarnings||0)>0&&(e.referredStudentBonus||0)>0&&s.jsxs("div",{className:"text-xs text-green-500 mt-1",children:[s.jsxs("div",{children:["Referans: ",(e.referralEarnings||0).toLocaleString("tr-TR")," ₺"]}),s.jsxs("div",{children:["Bonus: ",(e.referredStudentBonus||0).toLocaleString("tr-TR")," ₺"]})]})]})]}),e.referralEarnings>0&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Referans Kazancı Ödemesi"}),s.jsxs("p",{className:"text-lg font-bold text-blue-700",children:[(e.referralEarnings||0).toLocaleString("tr-TR")," ₺"]}),s.jsxs("div",{className:"text-sm text-blue-600 mt-1",children:[s.jsxs("p",{children:["Ödenen: ",e.totalReferralEarningsPaid.toLocaleString("tr-TR")," ₺"]}),s.jsxs("p",{className:"font-medium",children:["Kalan: ",((e.referralEarnings||0)-e.totalReferralEarningsPaid).toLocaleString("tr-TR")," ₺"]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:(e.referralEarnings||0)-e.totalReferralEarningsPaid>0?s.jsxs("button",{onClick:()=>C(!0),disabled:a||y,className:"flex items-center space-x-1 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors disabled:opacity-50",children:[s.jsx(Ei,{className:"h-3 w-3"}),s.jsx("span",{children:"Ödeme Yap"})]}):s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[s.jsx(is,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Tamamen Ödendi"})]})})})]}),s.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Referans vererek kazandığınız tutar"}),e.referralPayments.length>0&&s.jsxs("div",{className:"mt-3 border-t border-blue-200 pt-3",children:[s.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[s.jsx(nu,{className:"h-3 w-3 text-blue-600"}),s.jsx("span",{className:"text-xs font-medium text-blue-900",children:"Ödeme Geçmişi"})]}),s.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:e.referralPayments.map(v=>s.jsxs("div",{className:"flex justify-between items-center text-xs",children:[s.jsx("span",{className:"text-blue-700",children:O(v.paidAt)}),s.jsxs("span",{className:"font-medium text-blue-800",children:[v.amount.toLocaleString("tr-TR")," ₺"]})]},v.id))})]})]})]}),e.referredStudentBonus>0&&s.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Referans Bonusu"}),s.jsxs("p",{className:"text-lg font-bold text-purple-700",children:[(e.referredStudentBonus||0).toLocaleString("tr-TR")," ₺"]}),s.jsxs("div",{className:"text-sm text-purple-600 mt-1",children:[s.jsxs("p",{children:["Ödenen: ",e.totalReferredBonusPaid.toLocaleString("tr-TR")," ₺"]}),s.jsxs("p",{className:"font-medium",children:["Kalan: ",((e.referredStudentBonus||0)-e.totalReferredBonusPaid).toLocaleString("tr-TR")," ₺"]})]}),e.referrerInfo&&s.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:[s.jsxs("p",{children:["Referans veren: ",s.jsxs("span",{className:"font-medium",children:[e.referrerInfo.name," ",e.referrerInfo.surname]})]}),s.jsxs("p",{children:["Referans kodu: ",s.jsx("span",{className:"font-medium",children:e.referrerInfo.referralCode})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[(e.referredStudentBonus||0)-e.totalReferredBonusPaid>0?s.jsxs("button",{onClick:()=>E(!0),disabled:a||y,className:"flex items-center space-x-1 bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700 transition-colors disabled:opacity-50",children:[s.jsx(Ei,{className:"h-3 w-3"}),s.jsx("span",{children:"Ödeme Yap"})]}):s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[s.jsx(is,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Tamamen Ödendi"})]})}),s.jsx(Ds,{className:"h-5 w-5 text-purple-600"})]})]}),s.jsx("p",{className:"text-xs text-purple-600 mt-2",children:"Referans ile kayıt olduğunuz için aldığınız bonus"}),e.bonusPayments.length>0&&s.jsxs("div",{className:"mt-3 border-t border-purple-200 pt-3",children:[s.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[s.jsx(nu,{className:"h-3 w-3 text-purple-600"}),s.jsx("span",{className:"text-xs font-medium text-purple-900",children:"Ödeme Geçmişi"})]}),s.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:e.bonusPayments.map(v=>s.jsxs("div",{className:"flex justify-between items-center text-xs",children:[s.jsx("span",{className:"text-purple-700",children:O(v.paidAt)}),s.jsxs("span",{className:"font-medium text-purple-800",children:[v.amount.toLocaleString("tr-TR")," ₺"]})]},v.id))})]})]}),b.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Referansıyla Gelen Öğrenciler:"}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:f?s.jsx("div",{className:"text-center py-4",children:s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mx-auto"})}):b.map(v=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("span",{className:"text-sm font-medium",children:[v.name," ",v.surname]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Ua[v.status].color}`,children:Ua[v.status].label}),v.status==="kayitli"&&s.jsx("span",{className:"text-xs text-green-600 font-medium",children:"+1000 ₺"})]})]},v.id))})]})]})]}),e.notes&&s.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notlar"}),s.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.notes})]})]}),s.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Görüşme Geçmişi"}),s.jsxs("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-sm",children:[e.interviews.length," görüşme"]})]}),s.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:e.interviews.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Vi,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500",children:"Henüz görüşme kaydı yok"})]}):e.interviews.map(v=>{const R=Da[v.type].icon;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(R,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm font-medium",children:Da[v.type].label})]}),s.jsx("span",{className:"text-sm text-gray-500",children:L(v.date)})]}),v.outcome&&s.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-2",children:["Sonuç: ",v.outcome]}),v.notes&&s.jsx("p",{className:"text-sm text-gray-700 mb-2",children:v.notes}),v.followUpDate&&s.jsxs("div",{className:"flex items-center space-x-1 text-sm text-orange-600",children:[s.jsx(Pl,{className:"h-4 w-4"}),s.jsxs("span",{children:["Takip: ",O(v.followUpDate)]})]})]},v.id)})})]}),s.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Fiyat Teklifleri"}),s.jsxs("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-sm",children:[((fe=e.priceQuotes)==null?void 0:fe.length)||0," teklif"]})]}),s.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:!e.priceQuotes||e.priceQuotes.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ni,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500",children:"Henüz fiyat teklifi yok"})]}):e.priceQuotes.map(v=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:v.courseLevel}),s.jsx("div",{className:"text-sm text-gray-600",children:v.courseDuration}),s.jsx("div",{className:"text-sm text-gray-500",children:L(v.createdAt)})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-lg text-blue-600",children:[v.finalPrice.toLocaleString("tr-TR")," ₺"]}),v.cashPrice&&v.installmentPrice&&s.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[s.jsxs("div",{children:["Peşin: ",v.cashPrice.toLocaleString("tr-TR")," ₺"]}),s.jsxs("div",{children:["Taksitli: ",v.installmentPrice.toLocaleString("tr-TR")," ₺"]})]}),v.discount&&v.discount>0&&s.jsxs("div",{className:"text-xs text-red-600",children:[v.discount.toLocaleString("tr-TR")," ₺ indirim"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Hh,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600",children:v.paymentType==="pesin"?"Peşin":`${v.installmentCount} Taksit`})]}),v.paymentType==="taksit"&&v.installmentAmount&&s.jsxs("span",{className:"text-sm text-green-600",children:[v.installmentAmount.toLocaleString("tr-TR")," ₺/ay"]})]}),v.notes&&s.jsx("p",{className:"text-sm text-gray-700 mt-2",children:v.notes}),v.isAccepted&&s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✓ Kabul Edildi"})})]},v.id))})]})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx("div",{className:"bg-white shadow-sm rounded-lg p-6",children:e.followUpDate&&s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 max-w-md",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pl,{className:"h-5 w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-orange-900",children:"Takip Tarihi"}),s.jsx("p",{className:"text-sm text-orange-700",children:O(e.followUpDate)})]})]})})})}),p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Öğrenciyi Sil"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:[e.name," ",e.surname," isimli öğrenciyi silmek istediğinizden emin misiniz? Bu işlem geri alınamaz."]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"İptal"}),s.jsx("button",{onClick:mt,disabled:y,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:y?"Siliniyor...":"Sil"})]})]})}),T&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Referans Bonusu Ödemesi"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Toplam Bonus: ",s.jsxs("span",{className:"font-medium",children:[(e.referredStudentBonus||0).toLocaleString("tr-TR")," ₺"]})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Ödenen: ",s.jsxs("span",{className:"font-medium",children:[e.totalReferredBonusPaid.toLocaleString("tr-TR")," ₺"]})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Kalan: ",s.jsxs("span",{className:"font-medium text-purple-600",children:[((e.referredStudentBonus||0)-e.totalReferredBonusPaid).toLocaleString("tr-TR")," ₺"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ödeme Tutarı (₺)"}),s.jsx("input",{type:"number",value:A,onChange:v=>S(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"0.00",min:"0",max:(e.referredStudentBonus||0)-e.totalReferredBonusPaid,step:"0.01"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notlar (Opsiyonel)"}),s.jsx("textarea",{value:_,onChange:v=>I(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-purple-500",rows:3,placeholder:"Ödeme ile ilgili notlar..."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>{E(!1),S(""),I("")},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"İptal"}),s.jsx("button",{onClick:k,disabled:!A||parseFloat(A)<=0||y,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50",children:y?"Kaydediliyor...":"Ödeme Yap"})]})]})}),j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Referans Kazancı Ödemesi"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Toplam Kazanç: ",s.jsxs("span",{className:"font-medium",children:[(e.referralEarnings||0).toLocaleString("tr-TR")," ₺"]})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Ödenen: ",s.jsxs("span",{className:"font-medium",children:[e.totalReferralEarningsPaid.toLocaleString("tr-TR")," ₺"]})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Kalan: ",s.jsxs("span",{className:"font-medium text-blue-600",children:[((e.referralEarnings||0)-e.totalReferralEarningsPaid).toLocaleString("tr-TR")," ₺"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ödeme Tutarı (₺)"}),s.jsx("input",{type:"number",value:A,onChange:v=>S(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",min:"0",max:(e.referralEarnings||0)-e.totalReferralEarningsPaid,step:"0.01"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notlar (Opsiyonel)"}),s.jsx("textarea",{value:_,onChange:v=>I(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Ödeme ile ilgili notlar..."})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>{C(!1),S(""),I("")},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"İptal"}),s.jsx("button",{onClick:ue,disabled:!A||parseFloat(A)<=0||y,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:y?"Kaydediliyor...":"Ödeme Yap"})]})]})})]})},Bx=({filters:e,onFiltersChange:t,onClose:r})=>{const n=(l,o)=>{t({...e,[l]:o})},i=()=>{t({status:"",educationLevel:"",contactType:"",registrationType:"",languageLevel:"",placementTestLevel:"",followUpStatus:""})},a=e.status||e.educationLevel||e.contactType||e.registrationType||e.languageLevel||e.placementTestLevel||e.followUpStatus;return s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Si,{className:"h-5 w-5 text-gray-600"}),s.jsx("h3",{className:"font-medium text-gray-900",children:"Filtreler"})]}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(qe,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durum"}),s.jsxs("select",{value:e.status,onChange:l=>n("status",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tümü"}),s.jsx("option",{value:"yeni",children:"Yeni"}),s.jsx("option",{value:"ilgili",children:"İlgili"}),s.jsx("option",{value:"kayitli",children:"Kayıtlı"}),s.jsx("option",{value:"iptal",children:"İptal"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kayıt Türü"}),s.jsxs("select",{value:e.registrationType,onChange:l=>n("registrationType",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tümü"}),s.jsx("option",{value:"yeni-kayit",children:"Yeni Kayıt"}),s.jsx("option",{value:"kayit-yenileme",children:"Kayıt Yenileme"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Eğitim Seviyesi"}),s.jsxs("select",{value:e.educationLevel,onChange:l=>n("educationLevel",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tümü"}),s.jsx("option",{value:"ilkogretim",children:"İlköğretim"}),s.jsx("option",{value:"lise",children:"Lise"}),s.jsx("option",{value:"universite",children:"Üniversite"}),s.jsx("option",{value:"yetiskin",children:"Yetişkin"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İletişim Türü"}),s.jsxs("select",{value:e.contactType,onChange:l=>n("contactType",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tümü"}),s.jsx("option",{value:"telefon",children:"Telefon"}),s.jsx("option",{value:"yuz-yuze",children:"Yüz Yüze"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İlgilenilen Seviye"}),s.jsxs("select",{value:e.languageLevel,onChange:l=>n("languageLevel",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tümü"}),s.jsxs("optgroup",{label:"İlköğretim Seviyeleri",children:[s.jsx("option",{value:"starter2",children:"Starter 2"}),s.jsx("option",{value:"starter3",children:"Starter 3"}),s.jsx("option",{value:"starter4",children:"Starter 4"}),s.jsx("option",{value:"level5",children:"Level 5"}),s.jsx("option",{value:"level6",children:"Level 6"}),s.jsx("option",{value:"level7",children:"Level 7"}),s.jsx("option",{value:"level8",children:"Level 8"})]}),s.jsxs("optgroup",{label:"Lise/Üniversite/Yetişkin Seviyeleri",children:[s.jsx("option",{value:"A1.1",children:"A1.1"}),s.jsx("option",{value:"A1.2",children:"A1.2"}),s.jsx("option",{value:"A2.1",children:"A2.1"}),s.jsx("option",{value:"A2.2",children:"A2.2"}),s.jsx("option",{value:"B1.1",children:"B1.1"}),s.jsx("option",{value:"B1.2",children:"B1.2"}),s.jsx("option",{value:"B2.1",children:"B2.1"}),s.jsx("option",{value:"B2.2",children:"B2.2"}),s.jsx("option",{value:"C1.1",children:"C1.1"}),s.jsx("option",{value:"C1.2",children:"C1.2"})]})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4 mb-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seviye Tespit Sınavı Sonucu"}),s.jsxs("select",{value:e.placementTestLevel,onChange:l=>n("placementTestLevel",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tümü"}),s.jsxs("optgroup",{label:"İlköğretim Seviyeleri",children:[s.jsx("option",{value:"starter2",children:"Starter 2"}),s.jsx("option",{value:"starter3",children:"Starter 3"}),s.jsx("option",{value:"starter4",children:"Starter 4"}),s.jsx("option",{value:"level5",children:"Level 5"}),s.jsx("option",{value:"level6",children:"Level 6"}),s.jsx("option",{value:"level7",children:"Level 7"}),s.jsx("option",{value:"level8",children:"Level 8"})]}),s.jsxs("optgroup",{label:"Lise/Üniversite/Yetişkin Seviyeleri",children:[s.jsx("option",{value:"A1.1",children:"A1.1"}),s.jsx("option",{value:"A1.2",children:"A1.2"}),s.jsx("option",{value:"A2.1",children:"A2.1"}),s.jsx("option",{value:"A2.2",children:"A2.2"}),s.jsx("option",{value:"B1.1",children:"B1.1"}),s.jsx("option",{value:"B1.2",children:"B1.2"}),s.jsx("option",{value:"B2.1",children:"B2.1"}),s.jsx("option",{value:"B2.2",children:"B2.2"}),s.jsx("option",{value:"C1.1",children:"C1.1"}),s.jsx("option",{value:"C1.2",children:"C1.2"})]})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4 mb-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Takip Durumu"}),s.jsxs("select",{value:e.followUpStatus,onChange:l=>n("followUpStatus",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tümü"}),s.jsx("option",{value:"geciken",children:"🔴 Geciken Takipler"}),s.jsx("option",{value:"bu-hafta",children:"🟠 Bu Haftaki Takipler"}),s.jsx("option",{value:"gelecek-hafta",children:"🟡 Gelecek Haftaki Takipler"})]})]})}),a&&s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:i,className:"text-sm text-blue-600 hover:text-blue-700 transition-colors",children:"Filtreleri Temizle"})})]})},$x=({onBack:e,currentUserId:t,currentUserEmail:r})=>{const[n,i]=N.useState(""),[a,l]=N.useState(""),[o,c]=N.useState(null),[u,h]=N.useState(!1),[m,p]=N.useState(null),x=async()=>{if(!n||!a){p("Lütfen başlangıç ve bitiş tarihlerini seçin.");return}if(new Date(n)>new Date(a)){p("Başlangıç tarihi bitiş tarihinden sonra olamaz.");return}try{h(!0),p(null);const w=n+"T00:00:00",b=a+"T23:59:59",d=await ut.getInterviewsByDateRange(w,b),f=await ut.getReferredStudentsByDateRange(w,b),g=await ut.getFinancialReportData(w,b),j=d.length,C=d.filter(M=>M.type==="telefon").length,T=d.filter(M=>M.type==="yuz-yuze").length,E=["kayıt oldu","kaydoldu","kayıt edildi","kayıt","enrolled"],A=d.filter(M=>M.outcome&&E.some(ce=>M.outcome.toLowerCase().includes(ce.toLowerCase()))).length,S={},_={},I={};d.forEach(M=>{const ce=new Date(M.date).toLocaleDateString("tr-TR");S[ce]=(S[ce]||0)+1;const Re=M.userId||"unknown";_[Re]=(_[Re]||0)+1,M.outcome&&E.some(ft=>M.outcome.toLowerCase().includes(ft.toLowerCase()))&&(I[Re]=(I[Re]||0)+1)}),c({totalInterviews:j,phoneInterviews:C,faceToFaceInterviews:T,enrolledStudents:A,referredStudentsCount:f.length,...g,referredStudentsCount:f.length,interviewsByDate:S,interviewsByUser:_,enrolledStudentsByUser:I})}catch(w){console.error("Error generating report:",w),p("Rapor oluşturulurken hata oluştu.")}finally{h(!1)}},y=w=>new Date(w).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"});return s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"bg-white shadow-sm rounded-lg mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(un,{className:"h-5 w-5"}),s.jsx("span",{children:"Ana Sayfa"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Gh,{className:"h-6 w-6 text-blue-600"}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Görüşme Raporları"})]})]})}),s.jsxs("div",{className:"px-6 py-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(nn,{className:"h-4 w-4 inline mr-1"}),"Başlangıç Tarihi"]}),s.jsx("input",{type:"date",value:n,onChange:w=>i(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(nn,{className:"h-4 w-4 inline mr-1"}),"Bitiş Tarihi"]}),s.jsx("input",{type:"date",value:a,onChange:w=>l(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsx("div",{children:s.jsx("button",{onClick:x,disabled:u,className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:"Oluşturuluyor..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(ru,{className:"h-4 w-4"}),s.jsx("span",{children:"Rapor Oluştur"})]})})})]}),m&&s.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-3",children:s.jsx("p",{className:"text-red-600 text-sm",children:m})})]})]}),o&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(og,{className:"h-8 w-8 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Toplam Görüşme"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalInterviews})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(dn,{className:"h-8 w-8 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Telefon Görüşmesi"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.phoneInterviews}),s.jsx("p",{className:"text-xs text-gray-500",children:o.totalInterviews>0?`%${Math.round(o.phoneInterviews/o.totalInterviews*100)}`:"0%"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Be,{className:"h-8 w-8 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Yüz Yüze Görüşme"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.faceToFaceInterviews}),s.jsx("p",{className:"text-xs text-gray-500",children:o.totalInterviews>0?`%${Math.round(o.faceToFaceInterviews/o.totalInterviews*100)}`:"0%"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(is,{className:"h-8 w-8 text-emerald-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Kayıt Olan"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.enrolledStudents}),s.jsx("p",{className:"text-xs text-gray-500",children:o.totalInterviews>0?`%${Math.round(o.enrolledStudents/o.totalInterviews*100)} dönüşüm`:"0% dönüşüm"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(st,{className:"h-8 w-8 text-orange-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Referansla Kayıt"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.referredStudentsCount}),s.jsx("p",{className:"text-xs text-gray-500",children:o.enrolledStudents>0?`%${Math.round(o.referredStudentsCount/o.enrolledStudents*100)} referans oranı`:"0% referans oranı"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Xp,{className:"h-8 w-8 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Potansiyel Kazanç"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(o.totalPotentialReferralEarnings+o.totalPotentialBonusPayments).toLocaleString("tr-TR")," ₺"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Referans + Bonus"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Ei,{className:"h-8 w-8 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Referans Ödemesi"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o.totalReferralPaymentsMade.toLocaleString("tr-TR")," ₺"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ödenen tutar"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Ei,{className:"h-8 w-8 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Bonus Ödemesi"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o.totalBonusPaymentsMade.toLocaleString("tr-TR")," ₺"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ödenen tutar"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(tu,{className:"h-8 w-8 text-red-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ödenmemiş Referans"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o.unpaidReferralEarnings.toLocaleString("tr-TR")," ₺"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Bekleyen ödeme"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(tu,{className:"h-8 w-8 text-orange-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ödenmemiş Bonus"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o.unpaidBonusPayments.toLocaleString("tr-TR")," ₺"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Bekleyen ödeme"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rapor Detayları"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Rapor Tarihi Aralığı"}),s.jsxs("p",{className:"font-medium text-gray-900",children:[y(n)," - ",y(a)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Dönüşüm Oranı"}),s.jsxs("p",{className:"font-medium text-gray-900",children:[o.totalInterviews>0?`%${Math.round(o.enrolledStudents/o.totalInterviews*100)}`:"0%"," (Kayıt olan / Toplam görüşme)"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Referans Oranı"}),s.jsxs("p",{className:"font-medium text-gray-900",children:[o.enrolledStudents>0?`%${Math.round(o.referredStudentsCount/o.enrolledStudents*100)}`:"0%"," (Referansla kayıt / Toplam kayıt)"]})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Finansal Özet"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-green-600 mb-1",children:"Toplam Potansiyel Kazanç"}),s.jsxs("p",{className:"text-lg font-bold text-green-800",children:[(o.totalPotentialReferralEarnings+o.totalPotentialBonusPayments).toLocaleString("tr-TR")," ₺"]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Toplam Ödenen"}),s.jsxs("p",{className:"text-lg font-bold text-blue-800",children:[(o.totalReferralPaymentsMade+o.totalBonusPaymentsMade).toLocaleString("tr-TR")," ₺"]})]}),s.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-red-600 mb-1",children:"Toplam Ödenmemiş"}),s.jsxs("p",{className:"text-lg font-bold text-red-800",children:[(o.unpaidReferralEarnings+o.unpaidBonusPayments).toLocaleString("tr-TR")," ₺"]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Ödeme Oranı"}),s.jsx("p",{className:"text-lg font-bold text-gray-800",children:o.totalPotentialReferralEarnings+o.totalPotentialBonusPayments>0?`%${Math.round((o.totalReferralPaymentsMade+o.totalBonusPaymentsMade)/(o.totalPotentialReferralEarnings+o.totalPotentialBonusPayments)*100)}`:"0%"})]})]})]})]}),Object.keys(o.interviewsByDate).length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Günlük Görüşme Dağılımı"}),s.jsx("div",{className:"space-y-3",children:Object.entries(o.interviewsByDate).sort(([w],[b])=>new Date(w.split(".").reverse().join("-")).getTime()-new Date(b.split(".").reverse().join("-")).getTime()).map(([w,b])=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[s.jsx("span",{className:"text-gray-700",children:w}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.max(b/Math.max(...Object.values(o.interviewsByDate))*100,5)}%`}})}),s.jsx("span",{className:"font-medium text-gray-900 w-8 text-right",children:b})]})]},w))})]}),Object.keys(o.interviewsByUser).length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Kullanıcı Bazlı Görüşme Dağılımı"}),s.jsx("div",{className:"space-y-3",children:Object.entries(o.interviewsByUser).sort(([,w],[,b])=>b-w).map(([w,b])=>{const d=w===t,f=d?`Siz (${r})`:`Kullanıcı: ${w.substring(0,8)}...`;return s.jsxs("div",{className:`flex items-center justify-between py-3 px-4 rounded-lg border ${d?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${d?"bg-blue-500":"bg-gray-400"}`}),s.jsx("span",{className:`font-medium ${d?"text-blue-900":"text-gray-700"}`,children:f})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${d?"bg-blue-600":"bg-gray-500"}`,style:{width:`${Math.max(b/Math.max(...Object.values(o.interviewsByUser))*100,5)}%`}})}),s.jsx("span",{className:`font-bold w-8 text-right ${d?"text-blue-900":"text-gray-900"}`,children:b}),s.jsx("span",{className:"text-xs text-gray-500 w-12 text-right",children:o.totalInterviews>0?`%${Math.round(b/o.totalInterviews*100)}`:"0%"})]}),s.jsxs("div",{className:"mt-2 flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Kayıt ettirdiği:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:`font-medium ${d?"text-green-700":"text-green-600"}`,children:[o.enrolledStudentsByUser[w]||0," öğrenci"]}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",b>0?`%${Math.round((o.enrolledStudentsByUser[w]||0)/b*100)} dönüşüm`:"0% dönüşüm",")"]})]})]})]},w)})}),s.jsx("div",{className:"mt-4 bg-amber-50 border border-amber-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-amber-800 text-sm",children:[s.jsx("strong",{children:"Not:"})," Güvenlik nedeniyle diğer kullanıcıların tam isimleri gösterilmemektedir. Sadece kullanıcı ID'lerinin ilk 8 karakteri görüntülenmektedir."]})})]}),o.totalInterviews===0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[s.jsx(ru,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Veri Bulunamadı"}),s.jsx("p",{className:"text-gray-500",children:"Seçilen tarih aralığında görüşme veya referans kaydı bulunmuyor."})]})]})]})},Ia={async getMessages(){const{data:e,error:t}=await U.from("messages").select(`
        id,
        user_id,
        content,
        created_at
      `).order("created_at",{ascending:!0});if(t)throw console.error("Error fetching messages:",t),t;return e.map(r=>({id:r.id,userId:r.user_id,content:r.content,createdAt:r.created_at}))},async sendMessage(e){const{data:{user:t}}=await U.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:r,error:n}=await U.from("messages").insert({content:e.trim(),user_id:t.id}).select().single();if(n)throw console.error("Error sending message:",n),n;return{id:r.id,userId:r.user_id,content:r.content,createdAt:r.created_at}},subscribeToMessages(e){const t=U.channel("messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},r=>{const n={id:r.new.id,userId:r.new.user_id,content:r.new.content,createdAt:r.new.created_at};e(n)}).subscribe();return()=>{t.unsubscribe()}}},_n={async getStickyNotes(){const{data:e,error:t}=await U.from("sticky_notes").select(`
        id,
        user_id,
        content,
        created_at
      `).order("created_at",{ascending:!1});if(t)throw console.error("Error fetching sticky notes:",t),t;return e.map(r=>({id:r.id,userId:r.user_id,content:r.content,createdAt:r.created_at}))},async addStickyNote(e){const{data:{user:t}}=await U.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:r,error:n}=await U.from("sticky_notes").insert({content:e.trim(),user_id:t.id}).select().single();if(n)throw console.error("Error adding sticky note:",n),n;return{id:r.id,userId:r.user_id,content:r.content,createdAt:r.created_at}},async updateStickyNote(e,t){const{data:r,error:n}=await U.from("sticky_notes").update({content:t.trim()}).eq("id",e).select().single();if(n)throw console.error("Error updating sticky note:",n),n;return{id:r.id,userId:r.user_id,content:r.content,createdAt:r.created_at}},async deleteStickyNote(e){const{error:t}=await U.from("sticky_notes").delete().eq("id",e);if(t)throw console.error("Error deleting sticky note:",t),t},subscribeToStickyNotes(e,t,r){const n=U.channel("sticky_notes").on("postgres_changes",{event:"INSERT",schema:"public",table:"sticky_notes"},i=>{const a={id:i.new.id,userId:i.new.user_id,content:i.new.content,createdAt:i.new.created_at};e(a)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"sticky_notes"},i=>{const a={id:i.new.id,userId:i.new.user_id,content:i.new.content,createdAt:i.new.created_at};t(a)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"sticky_notes"},i=>{r(i.old.id)}).subscribe();return()=>{n.unsubscribe()}}},zx=()=>{const{user:e}=ea(),[t,r]=N.useState([]),[n,i]=N.useState(!0),[a,l]=N.useState(null),[o,c]=N.useState(!1),[u,h]=N.useState(""),[m,p]=N.useState(null),[x,y]=N.useState(""),[w,b]=N.useState(null);N.useEffect(()=>{d()},[]),N.useEffect(()=>_n.subscribeToStickyNotes(_=>{r(I=>[_,...I])},_=>{r(I=>I.map(M=>M.id===_.id?_:M))},_=>{r(I=>I.filter(M=>M.id!==_))}),[]);const d=async()=>{try{i(!0),l(null);const S=await _n.getStickyNotes();r(S)}catch(S){console.error("Error loading sticky notes:",S),l("Notlar yüklenirken hata oluştu.")}finally{i(!1)}},f=async S=>{if(S.preventDefault(),!!u.trim())try{b("add"),l(null);const _=await _n.addStickyNote(u);h(""),c(!1),r(I=>[_,...I])}catch(_){console.error("Error adding sticky note:",_),l("Not eklenirken hata oluştu.")}finally{b(null)}},g=async S=>{if(x.trim())try{b(S),l(null);const _=await _n.updateStickyNote(S,x);p(null),y(""),r(I=>I.map(M=>M.id===S?_:M))}catch(_){console.error("Error updating sticky note:",_),l("Not güncellenirken hata oluştu.")}finally{b(null)}},j=async S=>{if(confirm("Bu notu silmek istediğinizden emin misiniz?"))try{b(S),l(null),await _n.deleteStickyNote(S),r(_=>_.filter(I=>I.id!==S))}catch(_){console.error("Error deleting sticky note:",_),l("Not silinirken hata oluştu.")}finally{b(null)}},C=S=>{p(S.id),y(S.content)},T=()=>{p(null),y("")},E=S=>S.userId===(e==null?void 0:e.id)?"Siz":`Kullanıcı: ${S.userId.substring(0,8)}...`,A=S=>new Date(S).toLocaleString("tr-TR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"});return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(iu,{className:"h-5 w-5 text-yellow-600"}),s.jsx("h3",{className:"font-medium text-gray-900",children:"Yapışkan Notlar"})]}),s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-1 text-sm bg-yellow-500 text-white px-3 py-1 rounded-md hover:bg-yellow-600 transition-colors",children:[s.jsx(yr,{className:"h-4 w-4"}),s.jsx("span",{children:"Ekle"})]})]}),a&&s.jsx("div",{className:"mx-4 mt-2 bg-red-50 border border-red-200 rounded-lg p-2",children:s.jsx("p",{className:"text-red-600 text-sm",children:a})}),o&&s.jsx("div",{className:"p-4 border-b border-gray-200 bg-yellow-50",children:s.jsxs("form",{onSubmit:f,className:"space-y-3",children:[s.jsx("textarea",{value:u,onChange:S=>h(S.target.value),placeholder:"Yeni not yazın...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 resize-none text-sm",rows:3,maxLength:500,required:!0}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:[u.length,"/500 karakter"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{type:"button",onClick:()=>{c(!1),h("")},className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-800",children:[s.jsx(qe,{className:"h-3 w-3"}),s.jsx("span",{children:"İptal"})]}),s.jsxs("button",{type:"submit",disabled:!u.trim()||w==="add",className:"flex items-center space-x-1 text-sm bg-yellow-500 text-white px-3 py-1 rounded-md hover:bg-yellow-600 transition-colors disabled:opacity-50",children:[w==="add"?s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{children:"Kaydet"})]})]})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:n?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-600"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Yükleniyor..."})]})}):t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(iu,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Henüz yapışkan not yok"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'İlk notu eklemek için "Ekle" butonuna tıklayın'})]}):t.map(S=>{const _=S.userId===(e==null?void 0:e.id),I=m===S.id;return s.jsx("div",{className:`p-3 rounded-lg border-l-4 shadow-sm ${_?"bg-yellow-50 border-l-yellow-400":"bg-gray-50 border-l-gray-400"}`,children:I?s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:x,onChange:M=>y(M.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm resize-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500",rows:3,maxLength:500}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:[x.length,"/500 karakter"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:T,className:"flex items-center space-x-1 text-xs text-gray-600 hover:text-gray-800",children:[s.jsx(qe,{className:"h-3 w-3"}),s.jsx("span",{children:"İptal"})]}),s.jsxs("button",{onClick:()=>g(S.id),disabled:!x.trim()||w===S.id,className:"flex items-center space-x-1 text-xs bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600 transition-colors disabled:opacity-50",children:[w===S.id?s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{children:"Kaydet"})]})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:`text-xs font-medium ${_?"text-yellow-800":"text-gray-600"}`,children:E(S)}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:A(S.createdAt)}),_&&s.jsxs("div",{className:"flex space-x-1 ml-2",children:[s.jsx("button",{onClick:()=>C(S),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(sg,{className:"h-3 w-3"})}),s.jsx("button",{onClick:()=>j(S.id),disabled:w===S.id,className:"text-gray-400 hover:text-red-600 transition-colors disabled:opacity-50",children:w===S.id?s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-400"}):s.jsx(qi,{className:"h-3 w-3"})})]})]})]}),s.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap break-words",children:S.content})]})},S.id)})})]})},Mx=({onBack:e})=>{const{user:t}=ea(),[r,n]=N.useState([]),[i,a]=N.useState(""),[l,o]=N.useState(!0),[c,u]=N.useState(!1),[h,m]=N.useState(null),p=N.useRef(null),x=()=>{var f;(f=p.current)==null||f.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{y()},[]),N.useEffect(()=>{x()},[r]),N.useEffect(()=>Ia.subscribeToMessages(g=>{n(j=>[...j,g])}),[]);const y=async()=>{try{o(!0),m(null);const f=await Ia.getMessages();n(f)}catch(f){console.error("Error loading messages:",f),m("Notlar yüklenirken hata oluştu.")}finally{o(!1)}},w=async f=>{if(f.preventDefault(),!(!i.trim()||c))try{u(!0),m(null);const g=await Ia.sendMessage(i);a(""),n(j=>[...j,g])}catch(g){console.error("Error sending message:",g),m("Not gönderilirken hata oluştu.")}finally{u(!1)}},b=f=>new Date(f).toLocaleString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),d=f=>f.userId===(t==null?void 0:t.id)?"Siz":`Kullanıcı: ${f.userId.substring(0,8)}...`;return s.jsxs("div",{className:"max-w-7xl mx-auto h-[calc(100vh-200px)] flex",children:[s.jsx("div",{className:"w-80 bg-white shadow-sm rounded-l-lg border-r border-gray-200",children:s.jsx(zx,{})}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"bg-white shadow-sm rounded-tr-lg border-b border-gray-200",children:s.jsx("div",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(un,{className:"h-5 w-5"}),s.jsx("span",{children:"Ana Sayfa"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(su,{className:"h-6 w-6 text-blue-600"}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Ortak Pano"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[s.jsx(st,{className:"h-4 w-4"}),s.jsx("span",{children:"Tüm kullanıcılar görebilir"})]})]})})}),s.jsxs("div",{className:"flex-1 bg-white overflow-hidden flex flex-col",children:[h&&s.jsxs("div",{className:"mx-6 mt-4 bg-red-50 border border-red-200 rounded-lg p-3",children:[s.jsx("p",{className:"text-red-600 text-sm",children:h}),s.jsx("button",{onClick:()=>{m(null),y()},className:"mt-2 text-sm text-red-600 hover:text-red-700 underline",children:"Tekrar dene"})]}),l?s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("span",{className:"text-gray-600",children:"Mesajlar yükleniyor..."})]})}):s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[r.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(su,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz mesaj yok"}),s.jsx("p",{className:"text-gray-500",children:"İlk mesajı göndererek sohbeti başlatın!"})]}):r.map(f=>{const g=f.userId===(t==null?void 0:t.id);return s.jsx("div",{className:`flex ${g?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${g?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:`text-xs font-medium ${g?"text-blue-100":"text-gray-600"}`,children:d(f)}),s.jsx("span",{className:`text-xs ${g?"text-blue-100":"text-gray-500"}`,children:b(f.createdAt)})]}),s.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:f.content})]})},f.id)}),s.jsx("div",{ref:p})]})]}),s.jsx("div",{className:"bg-white border-t border-gray-200 rounded-br-lg",children:s.jsx("form",{onSubmit:w,className:"p-4",children:s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("textarea",{value:i,onChange:f=>a(f.target.value),placeholder:"Mesajınızı yazın... (Enter ile gönder, Shift+Enter ile yeni satır)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:2,maxLength:1e3,onKeyDown:f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),w(f))}}),s.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:[i.length,"/1000 karakter"]}),s.jsx("span",{className:"text-xs text-gray-500",children:"Shift+Enter: Yeni satır, Enter: Gönder"})]})]}),s.jsx("button",{type:"submit",disabled:!i.trim()||c,className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed self-start",children:c?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsx(ag,{className:"h-5 w-5"})})]})})})]})]})},Fs=e=>{var t;return{id:e.id,userId:e.user_id,name:e.name,level:e.level,studentIds:[],createdAt:e.created_at,startDate:e.start_date,endDate:e.end_date,days:e.days||[],timeRange:e.time_range||"",tags:e.tags||[],teacherId:e.teacher_id,teacherName:((t=e.teachers)==null?void 0:t.name)||void 0}},Lr={async getAllClasses(){const{data:e,error:t}=await U.from("classes").select(`
        *,
        teachers!classes_teacher_id_fkey(name)
      `).order("created_at",{ascending:!1});if(t)throw console.error("Error fetching classes:",t),t;return e.map(r=>Fs(r))},async addClass(e,t,r,n,i,a,l,o){const{data:{user:c}}=await U.auth.getUser();if(!c)throw new Error("User not authenticated");const{data:u,error:h}=await U.from("classes").insert({name:e.trim(),level:t,start_date:r||null,end_date:n||null,days:i||[],time_range:a||"",tags:l||[],teacher_id:o||null}).select(`
        *,
        teachers!classes_teacher_id_fkey(name)
      `).single();if(h)throw console.error("Error adding class:",h),h;return Fs(u)},async updateClass(e,t,r,n,i,a,l,o,c){console.log("DEBUG: updateClass called with id:",e),console.log("DEBUG: updateClass parameters:",{name:t,level:r,startDate:n,endDate:i,days:a,timeRange:l,tags:o,teacherId:c});const{data:{user:u}}=await U.auth.getUser();if(!u)throw new Error("User not authenticated");const{data:h,error:m}=await U.from("classes").update({name:t.trim(),level:r,start_date:n||null,end_date:i||null,days:a||[],time_range:l||"",tags:o||[],teacher_id:c||null}).eq("id",e).select(`
        *,
        teachers!classes_teacher_id_fkey(name)
      `);if(console.log("DEBUG: updateClass - Supabase response data:",h),console.log("DEBUG: updateClass - Supabase response error:",m),m)throw console.error("Error updating class:",m),m;if(!h||h.length===0)throw console.log("DEBUG: updateClass - No data returned, throwing CLASS_NOT_FOUND"),new Error("CLASS_NOT_FOUND");return console.log("DEBUG: updateClass - Returning transformed class data:",Fs(h[0])),Fs(h[0])},async deleteClass(e){console.log("DEBUG: classService.deleteClass called with id:",e);const{data:t,error:r}=await U.from("classes").select("id, name").eq("id",e).maybeSingle();if(r)throw console.error("DEBUG: Error checking if class exists:",r),r;if(!t)throw console.log("DEBUG: Class not found during check"),new Error("CLASS_NOT_FOUND");console.log("DEBUG: Class exists, proceeding with deletion:",t);const{error:n}=await U.from("classes").delete().eq("id",e);if(n)throw console.error("DEBUG: Error during class deletion:",n),console.error("DEBUG: Error code:",n.code),console.error("DEBUG: Error message:",n.message),console.error("Error deleting class:",n),n;console.log("DEBUG: Class deletion completed successfully")},async assignStudentToClass(e,t){const{error:r}=await U.from("students").update({class_id:t}).eq("id",e);if(r)throw console.error("Error assigning student to class:",r),r},async getStudentsInClass(e){const{data:t,error:r}=await U.from("students").select("id").eq("class_id",e);if(r)throw console.error("Error fetching students in class:",r),r;return t.map(n=>n.id)}},Fx=Object.freeze(Object.defineProperty({__proto__:null,classService:Lr},Symbol.toStringTag,{value:"Module"})),Gx=[{value:"starter2",label:"Starter 2",category:"İlkokul"},{value:"starter3",label:"Starter 3",category:"İlkokul"},{value:"starter4",label:"Starter 4",category:"İlkokul"},{value:"level5",label:"Level 5",category:"İlkokul"},{value:"level6",label:"Level 6",category:"İlkokul"},{value:"level7",label:"Level 7",category:"İlkokul"},{value:"level8",label:"Level 8",category:"İlkokul"},{value:"A1.1",label:"A1.1",category:"Lise/Üniversite/Yetişkin"},{value:"A1.2",label:"A1.2",category:"Lise/Üniversite/Yetişkin"},{value:"A2.1",label:"A2.1",category:"Lise/Üniversite/Yetişkin"},{value:"A2.2",label:"A2.2",category:"Lise/Üniversite/Yetişkin"},{value:"B1.1",label:"B1.1",category:"Lise/Üniversite/Yetişkin"},{value:"B1.2",label:"B1.2",category:"Lise/Üniversite/Yetişkin"},{value:"B2.1",label:"B2.1",category:"Lise/Üniversite/Yetişkin"},{value:"B2.2",label:"B2.2",category:"Lise/Üniversite/Yetişkin"},{value:"C1.1",label:"C1.1",category:"Lise/Üniversite/Yetişkin"},{value:"C1.2",label:"C1.2",category:"Lise/Üniversite/Yetişkin"}],Hx=["İlköğretim","Lise","Üniversite","Yetişkin","Sınav Grubu"],Kx=({class:e,onSubmit:t,onCancel:r,loading:n=!1})=>{const[i,a]=N.useState({name:(e==null?void 0:e.name)||"",level:(e==null?void 0:e.level)||"A1.1",startDate:e!=null&&e.startDate?e.startDate.split("T")[0]:"",endDate:e!=null&&e.endDate?e.endDate.split("T")[0]:"",days:(e==null?void 0:e.days)||[],timeRange:(e==null?void 0:e.timeRange)||"",tags:(e==null?void 0:e.tags)||[]}),[l,o]=N.useState([]),[c,u]=N.useState(!0),[h,m]=N.useState((e==null?void 0:e.teacherId)||null);N.useEffect(()=>{(async()=>{try{u(!0);const d=await It.getAllTeachers();o(d)}catch(d){console.error("Error fetching teachers:",d)}finally{u(!1)}})()},[]);const p=(b,d)=>{a(f=>({...f,days:d?[...f.days,b]:f.days.filter(g=>g!==b)}))},x=(b,d)=>{a(f=>({...f,tags:d?[...f.tags,b]:f.tags.filter(g=>g!==b)}))},y=async b=>{b.preventDefault(),await t(i.name,i.level,i.startDate,i.endDate,i.days,i.timeRange,i.tags,h)},w=Gx.reduce((b,d)=>(b[d.category]||(b[d.category]=[]),b[d.category].push(d),b),{});return s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-white shadow-sm rounded-lg",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[s.jsx(Qt,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{children:e?"Sınıfı Düzenle":"Yeni Sınıf Oluştur"})]})}),s.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sınıf Adı *"}),s.jsx("input",{type:"text",required:!0,value:i.name,onChange:b=>a(d=>({...d,name:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Örn: İngilizce A1.1 Grubu, Starter 2 Sınıfı"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seviye *"}),s.jsx("select",{required:!0,value:i.level,onChange:b=>a(d=>({...d,level:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Object.entries(w).map(([b,d])=>s.jsx("optgroup",{label:b,children:d.map(f=>s.jsx("option",{value:f.value,children:f.label},f.value))},b))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Başlama Tarihi"}),s.jsx("input",{type:"date",value:i.startDate,onChange:b=>a(d=>({...d,startDate:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bitiş Tarihi"}),s.jsx("input",{type:"date",value:i.endDate,onChange:b=>a(d=>({...d,endDate:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ders Günleri"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"].map(b=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i.days.includes(b),onChange:d=>p(b,d.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:b})]},b))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ders Saati Aralığı (Örn: 10:00 - 12:00)"}),s.jsx("input",{type:"text",value:i.timeRange,onChange:b=>a(d=>({...d,timeRange:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Örn: 09:00 - 12:00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiketler"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-2",children:Hx.map(b=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i.tags.includes(b),onChange:d=>x(b,d.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:b})]},b))}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sınıfın ait olduğu kategorileri veya özelliklerini seçin."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Be,{className:"h-4 w-4 inline mr-1"}),"Öğretmen"]}),s.jsxs("select",{value:h||"",onChange:b=>m(b.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:c,children:[s.jsx("option",{value:"",children:"Öğretmen Seçin (Opsiyonel)"}),c?s.jsx("option",{disabled:!0,children:"Yükleniyor..."}):l.map(b=>s.jsx("option",{value:b.id,children:b.name},b.id))]}),c&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Öğretmenler yükleniyor..."}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Bu sınıfa atanacak öğretmeni seçin."})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Sınıf Hakkında"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsx("li",{children:"• Sınıf oluşturduktan sonra öğrencileri bu sınıfa ekleyebilirsiniz"}),s.jsx("li",{children:"• Sınıf adını ve seviyesini istediğiniz zaman değiştirebilirsiniz"}),s.jsx("li",{children:"• Öğrenciler birden fazla sınıfa ait olamaz"}),s.jsx("li",{children:"• Etiketler sınıfları kategorize etmenize yardımcı olur"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[s.jsxs("button",{type:"button",onClick:r,disabled:n,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[s.jsx(qe,{className:"h-4 w-4"}),s.jsx("span",{children:"İptal"})]}),s.jsxs("button",{type:"submit",disabled:n||!i.name.trim(),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:[n?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):s.jsx(Jt,{className:"h-4 w-4"}),s.jsx("span",{children:e?"Güncelle":"Oluştur"})]})]})]})]})})},Wx=({class:e,availableStudents:t,onSubmit:r,onCancel:n,loading:i=!1})=>{var m,p;const[a,l]=N.useState(""),[o,c]=N.useState(""),u=t.filter(x=>x.name.toLowerCase().includes(o.toLowerCase())||x.surname.toLowerCase().includes(o.toLowerCase())||x.phone.includes(o)),h=x=>{x.preventDefault(),a&&r(a)};return s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-white shadow-sm rounded-lg",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[s.jsx(Ll,{className:"h-5 w-5 text-green-600"}),s.jsx("span",{children:"Sınıfa Öğrenci Ekle"})]}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[s.jsx("strong",{children:e.name})," (",e.level,") sınıfına öğrenci ekleyin"]})]}),s.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(st,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Eklenebilecek öğrenci yok"}),s.jsx("p",{className:"text-gray-500",children:"Tüm öğrenciler zaten bir sınıfa atanmış durumda veya henüz öğrenci kaydı bulunmuyor."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Öğrenci Ara"}),s.jsxs("div",{className:"relative",children:[s.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",value:o,onChange:x=>c(x.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Ad, soyad veya telefon ara..."})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Öğrenci Seçin *"}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto border border-gray-200 rounded-md p-3",children:u.length===0?s.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Arama kriterlerine uygun öğrenci bulunamadı."}):u.map(x=>s.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[s.jsx("input",{type:"radio",name:"selectedStudent",value:x.id,checked:a===x.id,onChange:y=>l(y.target.value),className:"text-green-600 focus:ring-green-500"}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900",children:[x.name," ",x.surname]}),s.jsx("p",{className:"text-sm text-gray-500",children:x.phone})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:x.educationLevel==="ilkogretim"?"İlköğretim":x.educationLevel==="lise"?"Lise":x.educationLevel==="universite"?"Üniversite":"Yetişkin"}),x.interestedLevels.length>0&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["İlgilendiği: ",x.interestedLevels.join(", ")]})]})]})})]},x.id))})]}),a&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-green-800",children:[s.jsx("strong",{children:"Seçilen öğrenci:"})," ",(m=u.find(x=>x.id===a))==null?void 0:m.name," ",(p=u.find(x=>x.id===a))==null?void 0:p.surname]})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[s.jsxs("button",{type:"button",onClick:n,disabled:i,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[s.jsx(qe,{className:"h-4 w-4"}),s.jsx("span",{children:"İptal"})]}),s.jsxs("button",{type:"submit",disabled:i||!a||t.length===0,className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50",children:[i?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):s.jsx(Ll,{className:"h-4 w-4"}),s.jsx("span",{children:"Sınıfa Ekle"})]})]})]})]})})},Vx=({onBack:e,onViewClassDetails:t,onStudentsUpdated:r})=>{const[n,i]=N.useState([]),[a,l]=N.useState([]),[o,c]=N.useState([]),[u,h]=N.useState([]),[m,p]=N.useState(!0),[x,y]=N.useState(null),[w,b]=N.useState("list"),[d,f]=N.useState(null),[g,j]=N.useState(!1),[C,T]=N.useState(""),[E,A]=N.useState(!1),[S,_]=N.useState({level:"",day:"",timeRange:"",tag:"",teacherId:""});N.useEffect(()=>{I()},[]),N.useEffect(()=>{let v=n.filter(R=>R.name.toLowerCase().includes(C.toLowerCase())||R.level.toLowerCase().includes(C.toLowerCase()));S.level&&(v=v.filter(R=>R.level===S.level)),S.day&&(v=v.filter(R=>R.days&&R.days.includes(S.day))),S.timeRange&&(v=v.filter(R=>R.timeRange&&R.timeRange.toLowerCase().includes(S.timeRange.toLowerCase()))),S.tag&&(v=v.filter(R=>R.tags&&R.tags.includes(S.tag))),S.teacherId&&(v=v.filter(R=>S.teacherId==="unassigned"?!R.teacherId:R.teacherId===S.teacherId)),l(v)},[n,C,S]);const I=async()=>{try{p(!0),y(null);const v=await Lr.getAllClasses();console.log("DEBUG: loadData - Fetched classesData from Supabase:",v),console.log("DEBUG: loadData - Number of classes fetched:",v.length),console.log("DEBUG: loadData - Class IDs in fetched data:",v.map(xe=>xe.id));const R=await ut.getAllStudents(),K=await It.getAllTeachers();i(v),l(v),console.log("DEBUG: loadData - Classes state updated, new length:",v.length),c(R),h(K)}catch(v){console.error("Error loading data:",v),y("Veriler yüklenirken hata oluştu.")}finally{p(!1)}},M=async(v,R,K,xe,Et,Ct,jr,gs)=>{try{j(!0),await Lr.addClass(v,R,K,xe,Et,Ct,jr,gs),await I(),b("list")}catch(xs){console.error("Error adding class:",xs),y("Sınıf eklenirken hata oluştu.")}finally{j(!1)}},ce=async(v,R,K,xe,Et,Ct,jr,gs,xs)=>{console.log("DEBUG: handleUpdateClass called with id:",v),console.log("DEBUG: handleUpdateClass parameters:",{name:R,level:K,startDate:xe,endDate:Et,days:Ct,timeRange:jr,tags:gs,teacherId:xs});try{j(!0),console.log("DEBUG: handleUpdateClass - About to call classService.updateClass"),await Lr.updateClass(v,R,K,xe,Et,Ct,jr,gs,xs),console.log("DEBUG: handleUpdateClass - classService.updateClass completed successfully"),console.log("DEBUG: handleUpdateClass - About to reload data"),await I(),console.log("DEBUG: handleUpdateClass - Data reloaded successfully"),b("list"),f(null)}catch(ys){console.log("DEBUG: handleUpdateClass - Error caught:",ys),ys instanceof Error&&ys.message==="CLASS_NOT_FOUND"?(console.log("DEBUG: handleUpdateClass - CLASS_NOT_FOUND error detected"),y("Sınıf bulunamadı. Başka bir kullanıcı tarafından silinmiş olabilir."),await I(),b("list"),f(null)):(console.error("Error updating class:",ys),y("Sınıf güncellenirken hata oluştu."))}finally{console.log("DEBUG: handleUpdateClass - Setting actionLoading to false"),j(!1)}},Re=async v=>{if(console.log("DEBUG: handleDeleteClass called with classId:",v),!confirm("Bu sınıfı silmek istediğinizden emin misiniz? Sınıftaki öğrenciler sınıfsız kalacaktır.")){console.log("DEBUG: User cancelled deletion");return}try{console.log("DEBUG: Starting class deletion process for classId:",v),j(!0),console.log("DEBUG: Calling classService.deleteClass..."),await Lr.deleteClass(v),console.log("DEBUG: Class deletion successful, reloading data..."),await I(),console.log("DEBUG: Data reloaded successfully")}catch(R){console.error("Error deleting class:",R),console.error("DEBUG: Full error object:",JSON.stringify(R,null,2)),y("Sınıf silinirken hata oluştu.")}finally{console.log("DEBUG: Setting actionLoading to false"),j(!1)}},ft=async(v,R)=>{try{j(!0),await Lr.assignStudentToClass(v,R),await I(),r(),b("list"),f(null)}catch(K){console.error("Error assigning student to class:",K),y("Öğrenci sınıfa eklenirken hata oluştu.")}finally{j(!1)}},mt=v=>o.filter(R=>R.classId===v),ue=()=>o.filter(v=>!v.classId),k=()=>{_({level:"",day:"",timeRange:"",tag:"",teacherId:""}),T("")},L=S.level||S.day||S.timeRange||S.tag||S.teacherId||C,O=[...new Set(n.map(v=>v.level))];[...new Set(n.flatMap(v=>v.days||[]))];const B=[...new Set(n.map(v=>v.timeRange).filter(Boolean))],F=[...new Set(n.flatMap(v=>v.tags||[]))],fe=u.filter(v=>v.isActive);return w==="form"?s.jsx(Kx,{class:d,onSubmit:d?(v,R,K,xe,Et,Ct,jr)=>ce(d.id,v,R,K,xe,Et,Ct,jr):M,onCancel:()=>{b("list"),f(null)},loading:g}):w==="addStudent"&&d?s.jsx(Wx,{class:d,availableStudents:ue(),onSubmit:v=>ft(v,d.id),onCancel:()=>{b("list"),f(null)},loading:g}):s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsx("div",{className:"bg-white shadow-sm rounded-lg mb-6",children:s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(un,{className:"h-5 w-5"}),s.jsx("span",{children:"Ana Sayfa"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Qt,{className:"h-6 w-6 text-blue-600"}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Sınıflar"})]}),s.jsxs("button",{onClick:()=>b("form"),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(yr,{className:"h-4 w-4"}),s.jsx("span",{children:"Yeni Sınıf"})]})]})})}),s.jsx("div",{className:"bg-white shadow-sm rounded-lg mb-6",children:s.jsxs("div",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1 max-w-lg",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Sınıf adı veya seviye ara...",value:C,onChange:v=>T(v.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("button",{onClick:()=>A(!E),className:`flex items-center space-x-2 px-4 py-2 rounded-lg border transition-colors ${E?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[s.jsx(Si,{className:"h-4 w-4"}),s.jsx("span",{children:"Filtrele"}),L&&s.jsx("span",{className:"bg-blue-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:[S.level,S.day,S.timeRange,C].filter(Boolean).length})]})]}),L&&s.jsxs("button",{onClick:k,className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:[s.jsx(qe,{className:"h-3 w-3"}),s.jsx("span",{children:"Filtreleri Temizle"})]})]}),E&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seviye"}),s.jsxs("select",{value:S.level,onChange:v=>_(R=>({...R,level:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tüm Seviyeler"}),s.jsx("optgroup",{label:"İlkokul Seviyeleri",children:O.filter(v=>["starter2","starter3","starter4","level5","level6","level7","level8"].includes(v)).map(v=>s.jsx("option",{value:v,children:v},v))}),s.jsx("optgroup",{label:"Lise/Üniversite/Yetişkin Seviyeleri",children:O.filter(v=>["A1.1","A1.2","A2.1","A2.2","B1.1","B1.2","B2.1","B2.2","C1.1","C1.2"].includes(v)).map(v=>s.jsx("option",{value:v,children:v},v))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ders Günü"}),s.jsxs("select",{value:S.day,onChange:v=>_(R=>({...R,day:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tüm Günler"}),["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"].map(v=>s.jsx("option",{value:v,children:v},v))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Saat Aralığı"}),s.jsxs("select",{value:S.timeRange,onChange:v=>_(R=>({...R,timeRange:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tüm Saatler"}),B.map(v=>s.jsx("option",{value:v,children:v},v))]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiket"}),s.jsxs("select",{value:S.tag,onChange:v=>_(R=>({...R,tag:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tüm Etiketler"}),F.map(v=>s.jsx("option",{value:v,children:v},v))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Öğretmen"}),s.jsxs("select",{value:S.teacherId,onChange:v=>_(R=>({...R,teacherId:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[s.jsx("option",{value:"",children:"Tüm Öğretmenler"}),s.jsx("option",{value:"unassigned",children:"Atanmamış Sınıflar"}),fe.map(v=>s.jsx("option",{value:v.id,children:v.name},v.id))]})]})]})]})]})}),x&&s.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("div",{className:"flex",children:s.jsxs("div",{className:"text-red-600",children:[s.jsx("p",{className:"text-sm font-medium",children:x}),s.jsx("button",{onClick:()=>{y(null),I()},className:"mt-2 text-sm text-red-600 hover:text-red-700 underline",children:"Tekrar dene"})]})})}),m&&s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Yükleniyor..."})]}),!m&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length===0?n.length===0?s.jsxs("div",{className:"col-span-full text-center py-12 bg-white rounded-lg shadow-sm",children:[s.jsx(Qt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz sınıf yok"}),s.jsx("p",{className:"text-gray-500 mb-4",children:'İlk sınıfınızı oluşturmak için "Yeni Sınıf" butonuna tıklayın.'}),s.jsxs("button",{onClick:()=>b("form"),className:"inline-flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(yr,{className:"h-4 w-4"}),s.jsx("span",{children:"Yeni Sınıf Oluştur"})]})]}):s.jsxs("div",{className:"col-span-full text-center py-12 bg-white rounded-lg shadow-sm",children:[s.jsx(Si,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Filtrelere uygun sınıf bulunamadı"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Arama kriterlerinizi değiştirmeyi deneyin."}),s.jsxs("button",{onClick:k,className:"inline-flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(qe,{className:"h-4 w-4"}),s.jsx("span",{children:"Filtreleri Temizle"})]})]}):a.map(v=>{const R=mt(v.id);return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t(v),children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:v.name}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:v.level}),v.startDate&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Başlama: ",new Date(v.startDate).toLocaleDateString("tr-TR")]}),v.endDate&&s.jsxs("p",{className:"text-xs text-gray-500",children:["Bitiş: ",new Date(v.endDate).toLocaleDateString("tr-TR")]}),v.days&&v.days.length>0&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Günler: ",v.days.join(", ")]}),v.timeRange&&s.jsxs("p",{className:"text-xs text-gray-500",children:["Saat: ",v.timeRange]}),v.tags&&v.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:v.tags.map(K=>s.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800",children:K},K))}),v.teacherName&&s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[s.jsx(Be,{className:"h-3 w-3 inline mr-1"}),"Öğretmen: ",s.jsx("span",{className:"font-medium",children:v.teacherName})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:K=>{K.stopPropagation(),f(v),b("form")},className:"text-gray-400 hover:text-blue-600 transition-colors",children:s.jsx(Bo,{className:"h-4 w-4"})}),s.jsx("button",{onClick:K=>{K.stopPropagation(),Re(v.id)},disabled:g,className:"text-gray-400 hover:text-red-600 transition-colors disabled:opacity-50",children:s.jsx(qi,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(st,{className:"h-4 w-4 text-gray-500"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[R.length," öğrenci"]})]}),s.jsxs("button",{onClick:K=>{K.stopPropagation(),f(v),b("addStudent")},className:"flex items-center space-x-1 text-sm bg-green-600 text-white px-3 py-1 rounded-md hover:bg-green-700 transition-colors",children:[s.jsx(Ll,{className:"h-3 w-3"}),s.jsx("span",{children:"Öğrenci Ekle"})]})]}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-blue-700",children:"Öğrenci detaylarını görmek için sınıfa tıklayın"})}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("p",{className:"text-xs text-gray-500",children:["Oluşturulma: ",new Date(v.createdAt).toLocaleDateString("tr-TR")]})})]},v.id)})})]})},qx={starter2:"Starter 2",starter3:"Starter 3",starter4:"Starter 4",level5:"Level 5",level6:"Level 6",level7:"Level 7",level8:"Level 8","A1.1":"A1.1","A1.2":"A1.2","A2.1":"A2.1","A2.2":"A2.2","B1.1":"B1.1","B1.2":"B1.2","B2.1":"B2.1","B2.2":"B2.2","C1.1":"C1.1","C1.2":"C1.2"},Yx={yeni:{label:"Yeni",color:"bg-yellow-100 text-yellow-800",icon:"🆕"},ilgili:{label:"İlgili",color:"bg-blue-100 text-blue-800",icon:"👀"},kayitli:{label:"Kayıtlı",color:"bg-green-100 text-green-800",icon:"✅"},iptal:{label:"İptal",color:"bg-red-100 text-red-800",icon:"❌"}},Qx=({classItem:e,studentsInClass:t,onBack:r,onRemoveStudent:n,onUpdateStudentNotes:i,loading:a})=>{const[l,o]=N.useState(!1),[c,u]=N.useState(null),[h,m]=N.useState(""),[p,x]=N.useState(!1),y=d=>new Date(d).toLocaleDateString("tr-TR"),w=d=>{u(d),m(d.notes||""),o(!0)},b=async()=>{if(!(!c||p))try{x(!0),await i(c.id,h),o(!1),u(null),m("")}catch(d){console.error("Error saving notes:",d)}finally{x(!1)}};return s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"bg-white shadow-sm rounded-lg mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:r,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(un,{className:"h-5 w-5"}),s.jsx("span",{children:"Sınıflar Listesi"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Qt,{className:"h-6 w-6 text-blue-600"}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Sınıf Detayı"})]}),s.jsx("div",{className:"w-24"})," "]})}),s.jsx("div",{className:"px-6 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx(Qt,{className:"h-8 w-8 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.name}),s.jsx("p",{className:"text-gray-600",children:qx[e.level]||e.level}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(st,{className:"h-4 w-4 text-gray-500"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[t.length," öğrenci"]})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Oluşturulma: ",y(e.createdAt)]})]}),e.startDate&&s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[s.jsx("span",{className:"font-medium",children:"Başlama Tarihi:"})," ",y(e.startDate)]}),e.endDate&&s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Bitiş Tarihi:"})," ",y(e.endDate)]}),e.days&&e.days.length>0&&s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[s.jsx("span",{className:"font-medium",children:"Ders Günleri:"})," ",e.days.join(", ")]}),e.timeRange&&s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Ders Saati:"})," ",e.timeRange]}),e.tags&&e.tags.length>0&&s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[s.jsx("span",{className:"font-medium",children:"Etiketler:"})," ",s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.tags.map(d=>s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:d},d))})]}),e.teacherName&&s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[s.jsx("span",{className:"font-medium",children:"Öğretmen:"})," ",e.teacherName]})]})]})})]}),s.jsxs("div",{className:"bg-white shadow-sm rounded-lg",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sınıftaki Öğrenciler"})}),s.jsx("div",{className:"p-6",children:a?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Öğrenciler yükleniyor..."})]}):t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(st,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Bu sınıfta henüz öğrenci yok"}),s.jsx("p",{className:"text-gray-500",children:'Öğrenci eklemek için sınıflar listesine dönün ve "Öğrenci Ekle" butonunu kullanın.'})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Öğrenci"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İletişim"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kayıt Tarihi"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notlar"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(d=>{const f=Yx[d.status];return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsxs("span",{className:"text-blue-600 font-medium",children:[d.name.charAt(0).toUpperCase(),d.surname.charAt(0).toUpperCase()]})})}),s.jsxs("div",{className:"ml-4",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[d.name," ",d.surname]}),s.jsx("div",{className:"text-sm text-gray-500",children:d.languages.join(", ")})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(dn,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-900",children:d.phone})]}),d.email&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fs,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-500",children:d.email})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f.color}`,children:[s.jsx("span",{className:"mr-1",children:f.icon}),f.label]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y(d.createdAt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.notes?s.jsx("p",{className:"text-xs text-gray-600 max-w-xs truncate",title:d.notes,children:d.notes}):s.jsx("span",{className:"text-xs text-gray-400 italic",children:"Not yok"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:()=>w(d),disabled:a||p,className:"flex items-center space-x-1 text-blue-600 hover:text-blue-900 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Vi,{className:"h-4 w-4"}),s.jsx("span",{children:"Not"})]}),s.jsxs("button",{onClick:()=>n(d.id,null),disabled:a||p,className:"flex items-center space-x-1 text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(cg,{className:"h-4 w-4"}),s.jsx("span",{children:"Sınıftan Çıkar"})]})]})})]},d.id)})})]})})})]}),l&&c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[c.name," ",c.surname," için Notlar"]}),s.jsx("textarea",{value:h,onChange:d=>m(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-y",rows:6,placeholder:"Öğrenci hakkında notlar..."}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsxs("button",{onClick:()=>o(!1),className:"flex items-center space-x-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:[s.jsx(qe,{className:"h-4 w-4"}),s.jsx("span",{children:"İptal"})]}),s.jsxs("button",{onClick:b,disabled:p,className:"flex items-center space-x-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:[p?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):s.jsx(Jt,{className:"h-4 w-4"}),s.jsx("span",{children:"Kaydet"})]})]})]})})]})},Jx=({teacher:e,onSubmit:t,onCancel:r,loading:n=!1})=>{const[i,a]=N.useState({name:(e==null?void 0:e.name)||"",isActive:(e==null?void 0:e.isActive)??!0}),l=o=>{o.preventDefault(),i.name.trim()&&t(i.name.trim(),i.isActive)};return s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-white shadow-sm rounded-lg",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center space-x-2",children:[s.jsx(Be,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{children:e?"Öğretmeni Düzenle":"Yeni Öğretmen Ekle"})]})}),s.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Öğretmen Adı *"}),s.jsx("input",{type:"text",required:!0,value:i.name,onChange:o=>a(c=>({...c,name:o.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Örn: Ahmet Yılmaz",maxLength:100}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Öğretmenin tam adını girin"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i.isActive,onChange:o=>a(c=>({...c,isActive:o.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Aktif öğretmen"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Aktif olmayan öğretmenler sınıf atama listesinde görünmez"})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Öğretmen Hakkında"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsx("li",{children:"• Öğretmenler sınıflara atanabilir"}),s.jsx("li",{children:"• Pasif öğretmenler sınıf seçim listesinde görünmez"}),s.jsx("li",{children:"• Öğretmen silinirse, atandığı sınıflardan otomatik çıkarılır"}),s.jsx("li",{children:"• Öğretmen adları benzersiz olmak zorunda değildir"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[s.jsxs("button",{type:"button",onClick:r,disabled:n,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[s.jsx(qe,{className:"h-4 w-4"}),s.jsx("span",{children:"İptal"})]}),s.jsxs("button",{type:"submit",disabled:n||!i.name.trim(),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:[n?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):s.jsx(Jt,{className:"h-4 w-4"}),s.jsx("span",{children:e?"Güncelle":"Kaydet"})]})]})]})]})})},Xx=({onBack:e})=>{const[t,r]=N.useState([]),[n,i]=N.useState([]),[a,l]=N.useState(!0),[o,c]=N.useState(null),[u,h]=N.useState("list"),[m,p]=N.useState(null),[x,y]=N.useState(!1),[w,b]=N.useState(""),[d,f]=N.useState(!1);N.useEffect(()=>{g()},[]),N.useEffect(()=>{let _=t.filter(I=>I.name.toLowerCase().includes(w.toLowerCase()));d&&(_=_.filter(I=>I.isActive)),i(_)},[t,w,d]);const g=async()=>{try{l(!0),c(null);const _=await It.getAllTeachers();r(_),i(_)}catch(_){console.error("Error loading teachers:",_),c("Öğretmenler yüklenirken hata oluştu.")}finally{l(!1)}},j=async(_,I=!0)=>{try{y(!0),await It.addTeacher(_),await g(),h("list")}catch(M){console.error("Error adding teacher:",M),c("Öğretmen eklenirken hata oluştu.")}finally{y(!1)}},C=async(_,I,M)=>{try{y(!0),await It.updateTeacher(_,I,M),await g(),h("list"),p(null)}catch(ce){console.error("Error updating teacher:",ce),c("Öğretmen güncellenirken hata oluştu.")}finally{y(!1)}},T=async(_,I)=>{if(confirm(`${I} isimli öğretmeni silmek istediğinizden emin misiniz? Bu işlem geri alınamaz.`))try{y(!0),await It.deleteTeacher(_),await g()}catch(M){console.error("Error deleting teacher:",M),c("Öğretmen silinirken hata oluştu.")}finally{y(!1)}},E=async _=>{try{y(!0),await It.updateTeacher(_.id,_.name,!_.isActive),await g()}catch(I){console.error("Error toggling teacher status:",I),c("Öğretmen durumu güncellenirken hata oluştu.")}finally{y(!1)}},A=_=>new Date(_).toLocaleDateString("tr-TR"),S={total:t.length,active:t.filter(_=>_.isActive).length,inactive:t.filter(_=>!_.isActive).length};return u==="form"?s.jsx(Jx,{teacher:m,onSubmit:m?(_,I)=>C(m.id,_,I):j,onCancel:()=>{h("list"),p(null)},loading:x}):s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"bg-white shadow-sm rounded-lg mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:e,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(un,{className:"h-5 w-5"}),s.jsx("span",{children:"Ana Sayfa"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(st,{className:"h-6 w-6 text-blue-600"}),s.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Öğretmen Yönetimi"})]}),s.jsxs("button",{onClick:()=>h("form"),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(yr,{className:"h-4 w-4"}),s.jsx("span",{children:"Yeni Öğretmen"})]})]})}),s.jsx("div",{className:"px-6 py-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(st,{className:"h-8 w-8 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Toplam Öğretmen"}),s.jsx("p",{className:"text-2xl font-bold text-blue-900",children:S.total})]})]})}),s.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(is,{className:"h-8 w-8 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-green-600",children:"Aktif Öğretmen"}),s.jsx("p",{className:"text-2xl font-bold text-green-900",children:S.active})]})]})}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(au,{className:"h-8 w-8 text-gray-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pasif Öğretmen"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.inactive})]})]})})]})})]}),s.jsx("div",{className:"bg-white shadow-sm rounded-lg mb-6",children:s.jsx("div",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[s.jsx("div",{className:"flex items-center space-x-4 flex-1 max-w-lg",children:s.jsxs("div",{className:"relative flex-1",children:[s.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Öğretmen adı ara...",value:w,onChange:_=>b(_.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:d,onChange:_=>f(_.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Sadece aktif öğretmenler"})]})})]})})}),o&&s.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("div",{className:"flex",children:s.jsxs("div",{className:"text-red-600",children:[s.jsx("p",{className:"text-sm font-medium",children:o}),s.jsx("button",{onClick:()=>{c(null),g()},className:"mt-2 text-sm text-red-600 hover:text-red-700 underline",children:"Tekrar dene"})]})})}),a&&s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Yükleniyor..."})]}),!a&&s.jsxs("div",{className:"bg-white shadow-sm rounded-lg",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Öğretmenler (",n.length,")"]})}),s.jsx("div",{className:"overflow-x-auto",children:n.length===0?t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(st,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz öğretmen yok"}),s.jsx("p",{className:"text-gray-500 mb-4",children:'İlk öğretmeninizi eklemek için "Yeni Öğretmen" butonuna tıklayın.'}),s.jsxs("button",{onClick:()=>h("form"),className:"inline-flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(yr,{className:"h-4 w-4"}),s.jsx("span",{children:"Yeni Öğretmen Ekle"})]})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(as,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Arama kriterlerine uygun öğretmen bulunamadı"}),s.jsx("p",{className:"text-gray-500",children:"Arama terimini değiştirmeyi deneyin."})]}):s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Öğretmen"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kayıt Tarihi"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(_=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx(Be,{className:"h-5 w-5 text-blue-600"})})}),s.jsx("div",{className:"ml-4",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.name})})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("button",{onClick:()=>E(_),disabled:x,className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium transition-colors disabled:opacity-50 ${_.isActive?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:_.isActive?s.jsxs(s.Fragment,{children:[s.jsx(is,{className:"h-3 w-3 mr-1"}),"Aktif"]}):s.jsxs(s.Fragment,{children:[s.jsx(au,{className:"h-3 w-3 mr-1"}),"Pasif"]})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A(_.createdAt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>{p(_),h("form")},disabled:x,className:"text-blue-600 hover:text-blue-900 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(Bo,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>T(_.id,_.name),disabled:x,className:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(qi,{className:"h-4 w-4"})})]})})]},_.id))})]})})]})]})};function Zx(){const{user:e,loading:t,signOut:r}=ea(),[n,i]=N.useState(null),[a,l]=N.useState([]),[o,c]=N.useState([]),[u,h]=N.useState(!0),[m,p]=N.useState(null),[x,y]=N.useState("list"),[w,b]=N.useState(null),[d,f]=N.useState(null),[g,j]=N.useState(""),[C,T]=N.useState(!1),[E,A]=N.useState({status:"",educationLevel:"",contactType:"",registrationType:"",languageLevel:"",placementTestLevel:"",followUpStatus:""});N.useEffect(()=>{e&&S()},[e]),N.useEffect(()=>{let k=a.filter(L=>L.name.toLowerCase().includes(g.toLowerCase())||L.surname.toLowerCase().includes(g.toLowerCase())||L.phone.includes(g));E.status&&(k=k.filter(L=>L.status===E.status)),E.educationLevel&&(k=k.filter(L=>L.educationLevel===E.educationLevel)),E.contactType&&(k=k.filter(L=>L.contactType===E.contactType)),E.registrationType&&(k=k.filter(L=>L.registrationType===E.registrationType)),E.languageLevel&&(k=k.filter(L=>L.interestedLevels.includes(E.languageLevel))),E.placementTestLevel&&(k=k.filter(L=>L.placementTestLevel===E.placementTestLevel)),E.followUpStatus&&(k=k.filter(L=>{if(!L.followUpDate)return!1;const O=new Date(L.followUpDate),B=new Date;if(B.setHours(0,0,0,0),E.followUpStatus==="geciken")return O<B;if(E.followUpStatus==="bu-hafta"){const F=new Date(B),fe=B.getDay(),v=fe===0?-6:1-fe;F.setDate(B.getDate()+v),F.setHours(0,0,0,0);const R=new Date(F);return R.setDate(F.getDate()+6),R.setHours(23,59,59,999),O>=F&&O<=R}if(E.followUpStatus==="gelecek-hafta"){const F=new Date(B),fe=B.getDay(),v=fe===0?1:8-fe;F.setDate(B.getDate()+v),F.setHours(0,0,0,0);const R=new Date(F);return R.setDate(F.getDate()+6),R.setHours(23,59,59,999),O>=F&&O<=R}return!1})),c(k)},[a,g,E]);const S=async()=>{try{h(!0),p(null);const k=await ut.getAllStudents();return l(k),c(k),k}catch(k){return console.error("Error loading students:",k),p("Öğrenciler yüklenirken hata oluştu. Lütfen sayfayı yenileyin."),[]}finally{h(!1)}},_=async(k,L)=>{try{h(!0),await ut.addStudent(k,L),y("list"),await S()}catch(O){console.error("Error adding student:",O),p("Öğrenci eklenirken hata oluştu.")}finally{h(!1)}},I=async k=>{try{h(!0),await ut.updateStudent(k.id,k);const L=await S();b(L.find(O=>O.id===k.id)||null)}catch(L){console.error("Error updating student:",L),p("Öğrenci güncellenirken hata oluştu.")}finally{h(!1)}},M=async()=>{if(w)try{h(!0);const k=await S();b(k.find(L=>L.id===w.id)||null)}catch(k){console.error("Error refreshing customer:",k),p("Öğrenci verileri yenilenirken hata oluştu.")}finally{h(!1)}},ce=async k=>{try{h(!0),await ut.deleteStudent(k),l(L=>L.filter(O=>O.id!==k)),y("list"),b(null)}catch(L){console.error("Error deleting student:",L),p("Öğrenci silinirken hata oluştu.")}finally{h(!1)}},Re=async(k,L)=>{try{h(!0),await ut.updateStudent(k,{notes:L}),await S()}catch(O){console.error("Error updating student notes:",O),p("Öğrenci notları güncellenirken hata oluştu.")}finally{h(!1)}},ft=k=>{b(k),y("detail")},mt=k=>{f(k),y("classDetail")},ue={total:a.length,new:a.filter(k=>k.status==="yeni").length,interested:a.filter(k=>k.status==="ilgili").length,enrolled:a.filter(k=>k.status==="kayitli").length,overdueFollowUps:a.filter(k=>{if(!k.followUpDate)return!1;const L=new Date(k.followUpDate),O=new Date;return O.setHours(0,0,0,0),L<O}).length,thisWeekFollowUps:a.filter(k=>{if(!k.followUpDate)return!1;const L=new Date(k.followUpDate),O=new Date,B=new Date(O),F=O.getDay(),fe=F===0?-6:1-F;B.setDate(O.getDate()+fe),B.setHours(0,0,0,0);const v=new Date(B);return v.setDate(B.getDate()+6),v.setHours(23,59,59,999),L>=B&&L<=v}).length};if(t)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"text-gray-600",children:"Yükleniyor..."})]})});if(n)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 mb-4",children:s.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Uygulama Hatası"}),s.jsx("p",{className:"text-gray-600 mb-4",children:n}),s.jsx("button",{onClick:()=>{i(null),window.location.reload()},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Sayfayı Yenile"})]})})});if(!e)return s.jsx(Sx,{});try{return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center py-4",children:[s.jsxs("button",{onClick:()=>y("list"),className:"flex items-center space-x-3 text-gray-900 hover:text-blue-600 transition-colors cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[s.jsx(Qt,{className:"h-8 w-8 text-blue-600"}),s.jsx("h1",{className:"text-2xl font-bold",children:"Dil Kursu Öğrenci Takip"}),s.jsxs("div",{className:"ml-4 text-sm text-gray-600",children:["Hoş geldiniz, ",e.email]})]}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsx("div",{className:"bg-gray-50 rounded-lg px-4 py-2",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(st,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:ue.total})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-600",children:ue.new})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-600",children:ue.interested})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-600",children:ue.enrolled})]})]})]})}),(ue.overdueFollowUps>0||ue.thisWeekFollowUps>0)&&s.jsx("div",{className:"bg-orange-50 rounded-lg px-3 py-2",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[ue.overdueFollowUps>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Qp,{className:"h-3 w-3 text-red-500"}),s.jsxs("span",{className:"text-sm text-red-600 font-medium",children:["Geciken: ",ue.overdueFollowUps]})]}),ue.thisWeekFollowUps>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Pl,{className:"h-3 w-3 text-orange-500"}),s.jsxs("span",{className:"text-sm text-orange-600 font-medium",children:["Bu Hafta: ",ue.thisWeekFollowUps]})]})]})}),s.jsxs("button",{onClick:()=>y("teachers"),className:"flex items-center space-x-1 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Be,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Öğretmenler"})]}),s.jsxs("button",{onClick:()=>y("classes"),className:"flex items-center space-x-1 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Qt,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Sınıflar"})]}),s.jsxs("button",{onClick:()=>y("reports"),className:"flex items-center space-x-1 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Gh,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Raporlar"})]}),s.jsxs("button",{onClick:()=>y("noticeBoard"),className:"flex items-center space-x-1 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Jp,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Ortak Pano"})]}),s.jsxs("button",{onClick:r,className:"flex items-center space-x-1 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(ng,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Çıkış"})]})]})]})})}),s.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m&&s.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:s.jsx("div",{className:"flex",children:s.jsxs("div",{className:"text-red-600",children:[s.jsx("p",{className:"text-sm font-medium",children:m}),s.jsx("button",{onClick:()=>{p(null),S()},className:"mt-2 text-sm text-red-600 hover:text-red-700 underline",children:"Tekrar dene"})]})})}),u&&s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Yükleniyor..."})]}),x==="list"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-4 flex-1 max-w-lg",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Ad, soyad veya telefon ara...",value:g,onChange:k=>j(k.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("button",{onClick:()=>T(!C),className:`flex items-center space-x-2 px-4 py-2 rounded-lg border transition-colors ${C?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[s.jsx(Si,{className:"h-4 w-4"}),s.jsx("span",{children:"Filtrele"})]})]}),s.jsxs("button",{onClick:()=>y("form"),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(yr,{className:"h-4 w-4"}),s.jsx("span",{children:"Yeni Öğrenci"})]})]}),C&&s.jsx(Bx,{filters:E,onFiltersChange:A,onClose:()=>T(!1)}),s.jsx(Px,{customers:o,onCustomerSelect:ft})]}),x==="form"&&s.jsx(gf,{onSubmit:_,onCancel:()=>y("list"),loading:u}),x==="detail"&&w&&s.jsx(Ix,{customer:w,onBack:()=>y("list"),onUpdate:I,onRefresh:M,onDelete:ce,loading:u}),x==="reports"&&s.jsx($x,{onBack:()=>y("list"),currentUserId:e.id,currentUserEmail:e.email||""}),x==="noticeBoard"&&s.jsx(Mx,{onBack:()=>y("list")}),x==="classes"&&s.jsx(Vx,{onBack:()=>y("list"),onViewClassDetails:mt,onStudentsUpdated:S}),x==="classDetail"&&d&&s.jsx(Qx,{classItem:d,studentsInClass:a.filter(k=>k.classId===d.id),onBack:()=>y("classes"),onRemoveStudent:async(k,L)=>{try{h(!0);const{classService:O}=await tt(async()=>{const{classService:B}=await Promise.resolve().then(()=>Fx);return{classService:B}},void 0);await O.assignStudentToClass(k,L),await S()}catch(O){console.error("Error removing student from class:",O),p("Öğrenci sınıftan çıkarılırken hata oluştu.")}finally{h(!1)}},onUpdateStudentNotes:Re,loading:u}),x==="teachers"&&s.jsx(Xx,{onBack:()=>y("list")})]})]})}catch(k){return console.error("App render error:",k),i("Uygulama yüklenirken bir hata oluştu. Lütfen sayfayı yenileyin."),null}}Fh(document.getElementById("root")).render(s.jsx(N.StrictMode,{children:s.jsx(Nx,{children:s.jsx(Zx,{})})}));
